"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lowerCaseKeys(e){for(var t,i=Object.keys(e),n=i.length,r={};n--;)t=i[n],r[t.toLowerCase()]=e[t];return r}function django2datepicker(e){for(var t={"%":"",y:"yy",Y:"yyyy",m:"mm",d:"dd",H:"hh",I:"hh",M:"ii",p:"aa",S:""},i="",n=0,r=e.length;r>n;n++)i+=e[n]in t?t[e[n]]:e[n];return":"==i.slice(-1)&&(i=i.slice(0,-1)),i}function inlineWidget(e,t,i,n){$(".inline-widget."+e).html(function(e,r){var s=!1,o=$(r).text(),a="";$(r).attr("href")&&(o=$(r).children(":first").text(),s=!0);var l=[o];for(n&&(l=o.split(n)),e=0;e<l.length;e++){var d=l[e];if(n&&(d+=n),i){var c=lowerCaseKeys(i),u=l[e].toLowerCase();u in c&&(d=t.replaceAll("{{ value }}",c[u]),d=d.replaceAll("{{ key }}",l[e]))}else d=t.replaceAll("{{ key }}",l[e]);a+=d}return s&&(a=$(r).empty().append(a)),a})}function set_input_widgets(){var e=$(".js-selectize");e.size()&&e.selectize({allowEmptyOption:!0,highlight:!1,plugins:["remove_button"]});var t=$(".js-selectize-tags");t.size()&&t.selectize({delimiter:",",persist:!1,plugins:["remove_button"],create:function(e){return{value:e,text:e}}}),$(".js-selectize-autocomplete").each(function(e){var t=$(this).attr("url");$(this).selectize({valueField:"value",labelField:"label",searchField:"label",create:!1,load:function(e,i){return e.length?void $.ajax({url:t+encodeURIComponent(e),type:"GET",error:function(){i()},success:function(e){i(e.options)}}):i()}})}),$(".js-datepicker").each(function(e){$(this).datepicker({todayButton:!0,language:"en",startDate:""==$(this).attr("date")?new Date:new Date($(this).attr("date")),dateFormat:django2datepicker(DATE_FORMAT)})}),$(".js-timepicker").each(function(e){$(this).datepicker({onlyTimepicker:!0,language:"en",startDate:""==$(this).attr("date")?new Date:new Date($(this).attr("date")),timeFormat:django2datepicker(TIME_FORMAT),timepicker:!0})}),$(".js-datetimepicker").each(function(e){$(this).datepicker({language:"en",todayButton:!0,startDate:""==$(this).attr("date")?new Date:new Date($(this).attr("date")),dateFormat:django2datepicker(DATE_FORMAT),timeFormat:django2datepicker(TIME_FORMAT),timepicker:!0})})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:void 0,function(e,t){function i(e){var t=!!e&&"length"in e&&e.length,i=se.type(e);return"function"===i||se.isWindow(e)?!1:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(se.isFunction(t))return se.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return se.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ge.test(t))return se.filter(t,e,i);t=se.filter(t,e)}return se.grep(e,function(e){return Z.call(t,e)>-1!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return se.each(e.match(we)||[],function(e,i){t[i]=!0}),t}function o(){Q.removeEventListener("DOMContentLoaded",o),e.removeEventListener("load",o),se.ready()}function a(){this.expando=se.expando+a.uid++}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(De,"-$&").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Te.test(i)?se.parseJSON(i):i}catch(r){}je.set(e,t,i)}else i=void 0;return i}function d(e,t,i,n){var r,s=1,o=20,a=n?function(){return n.cur()}:function(){return se.css(e,t,"")},l=a(),d=i&&i[3]||(se.cssNumber[t]?"":"px"),c=(se.cssNumber[t]||"px"!==d&&+l)&&Se.exec(se.css(e,t));if(c&&c[3]!==d){d=d||c[3],i=i||[],c=+l||1;do s=s||".5",c/=s,se.style(e,t,c+d);while(s!==(s=a()/l)&&1!==s&&--o)}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=r)),r}function c(e,t){var i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&se.nodeName(e,t)?se.merge([e],i):i}function u(e,t){for(var i=0,n=e.length;n>i;i++)$e.set(e[i],"globalEval",!t||$e.get(t[i],"globalEval"))}function h(e,t,i,n,r){for(var s,o,a,l,d,h,p=t.createDocumentFragment(),f=[],g=0,m=e.length;m>g;g++)if(s=e[g],s||0===s)if("object"===se.type(s))se.merge(f,s.nodeType?[s]:s);else if(Ne.test(s)){for(o=o||p.appendChild(t.createElement("div")),a=(Pe.exec(s)||["",""])[1].toLowerCase(),l=ze[a]||ze._default,o.innerHTML=l[1]+se.htmlPrefilter(s)+l[2],h=l[0];h--;)o=o.lastChild;se.merge(f,o.childNodes),o=p.firstChild,o.textContent=""}else f.push(t.createTextNode(s));for(p.textContent="",g=0;s=f[g++];)if(n&&se.inArray(s,n)>-1)r&&r.push(s);else if(d=se.contains(s.ownerDocument,s),o=c(p.appendChild(s),"script"),d&&u(o),i)for(h=0;s=o[h++];)Re.test(s.type||"")&&i.push(s);return p}function p(){return!0}function f(){return!1}function g(){try{return Q.activeElement}catch(e){}}function m(e,t,i,n,r,s){var o,a;if("object"===("undefined"==typeof t?"undefined":_typeof(t))){"string"!=typeof i&&(n=n||i,i=void 0);for(a in t)m(e,a,i,n,t[a],s);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=f;else if(!r)return e;return 1===s&&(o=r,r=function(e){return se().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=se.guid++)),e.each(function(){se.event.add(this,t,r,n,i)})}function v(e,t){return se.nodeName(e,"table")&&se.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function y(e){var t=We.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var i,n,r,s,o,a,l,d;if(1===t.nodeType){if($e.hasData(e)&&(s=$e.access(e),o=$e.set(t,s),d=s.events)){delete o.handle,o.events={};for(r in d)for(i=0,n=d[r].length;n>i;i++)se.event.add(t,r,d[r][i])}je.hasData(e)&&(a=je.access(e),l=se.extend({},a),je.set(t,l))}}function w(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Ae.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function k(e,t,i,n){t=X.apply([],t);var r,s,o,a,l,d,u=0,p=e.length,f=p-1,g=t[0],m=se.isFunction(g);if(m||p>1&&"string"==typeof g&&!ne.checkClone&&Be.test(g))return e.each(function(r){var s=e.eq(r);m&&(t[0]=g.call(this,r,s.html())),k(s,t,i,n)});if(p&&(r=h(t,e[0].ownerDocument,!1,e,n),s=r.firstChild,1===r.childNodes.length&&(r=s),s||n)){for(o=se.map(c(r,"script"),_),a=o.length;p>u;u++)l=r,u!==f&&(l=se.clone(l,!0,!0),a&&se.merge(o,c(l,"script"))),i.call(e[u],l,u);if(a)for(d=o[o.length-1].ownerDocument,se.map(o,y),u=0;a>u;u++)l=o[u],Re.test(l.type||"")&&!$e.access(l,"globalEval")&&se.contains(d,l)&&(l.src?se._evalUrl&&se._evalUrl(l.src):se.globalEval(l.textContent.replace(Ke,"")))}return e}function x(e,t,i){for(var n,r=t?se.filter(t,e):e,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||se.cleanData(c(n)),n.parentNode&&(i&&se.contains(n.ownerDocument,n)&&u(c(n,"script")),n.parentNode.removeChild(n));return e}function C(e,t){var i=se(t.createElement(e)).appendTo(t.body),n=se.css(i[0],"display");return i.detach(),n}function $(e){var t=Q,i=Ye[e];return i||(i=C(e,t),"none"!==i&&i||(Ue=(Ue||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ue[0].contentDocument,t.write(),t.close(),i=C(e,t),Ue.detach()),Ye[e]=i),i}function j(e,t,i){var n,r,s,o,a=e.style;return i=i||Ge(e),o=i?i.getPropertyValue(t)||i[t]:void 0,""!==o&&void 0!==o||se.contains(e.ownerDocument,e)||(o=se.style(e,t)),i&&!ne.pixelMarginRight()&&Qe.test(o)&&Ve.test(t)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s),void 0!==o?o+"":o}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function D(e){if(e in nt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=it.length;i--;)if(e=it[i]+t,e in nt)return e}function O(e,t,i){var n=Se.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function S(e,t,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===i&&(o+=se.css(e,i+Fe[s],!0,r)),n?("content"===i&&(o-=se.css(e,"padding"+Fe[s],!0,r)),"margin"!==i&&(o-=se.css(e,"border"+Fe[s]+"Width",!0,r))):(o+=se.css(e,"padding"+Fe[s],!0,r),"padding"!==i&&(o+=se.css(e,"border"+Fe[s]+"Width",!0,r)));return o}function F(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=Ge(e),o="border-box"===se.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=j(e,t,s),(0>r||null==r)&&(r=e.style[t]),Qe.test(r))return r;n=o&&(ne.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+S(e,t,i||(o?"border":"content"),n,s)+"px"}function E(e,t){for(var i,n,r,s=[],o=0,a=e.length;a>o;o++)n=e[o],n.style&&(s[o]=$e.get(n,"olddisplay"),i=n.style.display,t?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Ee(n)&&(s[o]=$e.access(n,"olddisplay",$(n.nodeName)))):(r=Ee(n),"none"===i&&r||$e.set(n,"olddisplay",r?i:se.css(n,"display"))));for(o=0;a>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[o]||"":"none"));return e}function A(e,t,i,n,r){return new A.prototype.init(e,t,i,n,r)}function P(){return e.setTimeout(function(){rt=void 0}),rt=se.now()}function R(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=Fe[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function z(e,t,i){for(var n,r=(I.tweeners[t]||[]).concat(I.tweeners["*"]),s=0,o=r.length;o>s;s++)if(n=r[s].call(i,t,e))return n}function N(e,t,i){var n,r,s,o,a,l,d,c,u=this,h={},p=e.style,f=e.nodeType&&Ee(e),g=$e.get(e,"fxshow");i.queue||(a=se._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,se.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],d=se.css(e,"display"),c="none"===d?$e.get(e,"olddisplay")||$(e.nodeName):d,"inline"===c&&"none"===se.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],ot.exec(r)){if(delete t[n],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;f=!0}h[n]=g&&g[n]||se.style(e,n)}else d=void 0;if(se.isEmptyObject(h))"inline"===("none"===d?$(e.nodeName):d)&&(p.display=d);else{g?"hidden"in g&&(f=g.hidden):g=$e.access(e,"fxshow",{}),s&&(g.hidden=!f),f?se(e).show():u.done(function(){se(e).hide()}),u.done(function(){var t;$e.remove(e,"fxshow");for(t in h)se.style(e,t,h[t])});for(n in h)o=z(f?g[n]:0,n,u),n in g||(g[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function M(e,t){var i,n,r,s,o;for(i in e)if(n=se.camelCase(i),r=t[n],s=e[i],se.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),o=se.cssHooks[n],o&&"expand"in o){s=o.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=r)}else t[n]=r}function I(e,t,i){var n,r,s=0,o=I.prefilters.length,a=se.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=rt||P(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,s=1-n,o=0,l=d.tweens.length;l>o;o++)d.tweens[o].run(s);return a.notifyWith(e,[d,s,i]),1>s&&l?i:(a.resolveWith(e,[d]),!1)},d=a.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{},easing:se.easing._default},i),originalProperties:t,originalOptions:i,startTime:rt||P(),duration:i.duration,tweens:[],createTween:function(t,i){var n=se.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)d.tweens[i].run(1);return t?(a.notifyWith(e,[d,1,0]),a.resolveWith(e,[d,t])):a.rejectWith(e,[d,t]),this}}),c=d.props;for(M(c,d.opts.specialEasing);o>s;s++)if(n=I.prefilters[s].call(d,e,c,d.opts))return se.isFunction(n.stop)&&(se._queueHooks(d.elem,d.opts.queue).stop=se.proxy(n.stop,n)),n;return se.map(c,z,d),se.isFunction(d.opts.start)&&d.opts.start.call(e,d),se.fx.timer(se.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function q(e){return e.getAttribute&&e.getAttribute("class")||""}function H(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,s=t.toLowerCase().match(we)||[];if(se.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function L(e,t,i,n){function r(a){var l;return s[a]=!0,se.each(e[a]||[],function(e,a){var d=a(t,i,n);return"string"!=typeof d||o||s[d]?o?!(l=d):void 0:(t.dataTypes.unshift(d),r(d),!1)}),l}var s={},o=e===jt;return r(t.dataTypes[0])||!s["*"]&&r("*")}function B(e,t){var i,n,r=se.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&se.extend(!0,e,n),e}function W(e,t,i){for(var n,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}function K(e,t,i,n){var r,s,o,a,l,d={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)d[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=d[l+" "+s]||d["* "+s],!o)for(r in d)if(a=r.split(" "),a[1]===s&&(o=d[l+" "+a[0]]||d["* "+a[0]])){o===!0?o=d[r]:d[r]!==!0&&(s=a[0],c.unshift(a[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function U(e,t,i,n){var r;if(se.isArray(t))se.each(t,function(t,r){i||St.test(e)?n(e,r):U(e+"["+("object"===("undefined"==typeof r?"undefined":_typeof(r))&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==se.type(t))n(e,t);else for(r in t)U(e+"["+r+"]",t[r],i,n)}function Y(e){return se.isWindow(e)?e:9===e.nodeType&&e.defaultView}var V=[],Q=e.document,G=V.slice,X=V.concat,J=V.push,Z=V.indexOf,ee={},te=ee.toString,ie=ee.hasOwnProperty,ne={},re="2.2.4",se=function Ht(e,t){return new Ht.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,le=/-([\da-z])/gi,de=function(e,t){return t.toUpperCase()};se.fn=se.prototype={jquery:re,constructor:se,selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:G.call(this)},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return se.each(this,e)},map:function(e){return this.pushStack(se.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:J,sort:V.sort,splice:V.splice},se.extend=se.fn.extend=function(){var e,t,i,n,r,s,o=arguments[0]||{},a=1,l=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[a]||{},a++),"object"===("undefined"==typeof o?"undefined":_typeof(o))||se.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)i=o[t],n=e[t],o!==n&&(d&&n&&(se.isPlainObject(n)||(r=se.isArray(n)))?(r?(r=!1,s=i&&se.isArray(i)?i:[]):s=i&&se.isPlainObject(i)?i:{},o[t]=se.extend(d,s,n)):void 0!==n&&(o[t]=n));return o},se.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!se.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;if(e.constructor&&!ie.call(e,"constructor")&&!ie.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ie.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e?ee[te.call(e)]||"object":"undefined"==typeof e?"undefined":_typeof(e)},globalEval:function(e){var t,i=eval;e=se.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(le,de)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;n>r&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?se.merge(n,"string"==typeof e?[e]:e):J.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:Z.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],s=0,o=e.length,a=!i;o>s;s++)n=!t(e[s],s),n!==a&&r.push(e[s]);return r},map:function(e,t,n){var r,s,o=0,a=[];if(i(e))for(r=e.length;r>o;o++)s=t(e[o],o,n),null!=s&&a.push(s);else for(o in e)s=t(e[o],o,n),null!=s&&a.push(s);return X.apply([],a)},guid:1,proxy:function Lt(e,t){var i,n,Lt;return"string"==typeof t&&(i=e[t],t=e,e=i),se.isFunction(e)?(n=G.call(arguments,2),Lt=function(){return e.apply(t||this,n.concat(G.call(arguments)))},Lt.guid=e.guid=e.guid||se.guid++,Lt):void 0},now:Date.now,support:ne}),"function"==typeof Symbol&&(se.fn[Symbol.iterator]=V[Symbol.iterator]),se.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,i,n){var r,s,o,a,l,d,u,p,f=t&&t.ownerDocument,g=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return i;if(!n&&((t?t.ownerDocument||t:q)!==E&&F(t),t=t||E,P)){if(11!==g&&(d=ve.exec(e)))if(r=d[1]){if(9===g){if(!(o=t.getElementById(r)))return i;if(o.id===r)return i.push(o),i}else if(f&&(o=f.getElementById(r))&&M(t,o)&&o.id===r)return i.push(o),i}else{if(d[2])return J.apply(i,t.getElementsByTagName(e)),i;if((r=d[3])&&w.getElementsByClassName&&t.getElementsByClassName)return J.apply(i,t.getElementsByClassName(r)),i}if(w.qsa&&!K[e+" "]&&(!R||!R.test(e))){if(1!==g)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(ye,"\\$&"):t.setAttribute("id",a=I),u=$(e),s=u.length,l=he.test(a)?"#"+a:"[id='"+a+"']";s--;)u[s]=l+" "+h(u[s]);p=u.join(","),f=_e.test(e)&&c(t.parentNode)||t}if(p)try{return J.apply(i,f.querySelectorAll(p)),i}catch(m){}finally{a===I&&t.removeAttribute("id")}}}return T(e.replace(ae,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>k.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[I]=!0,e}function r(e){var t=E.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=i.length;n--;)k.attrHandle[i[n]]=t}function o(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function d(e){return n(function(t){return t=+t,n(function(i,n){for(var r,s=e([],i.length,t),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function h(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,r=i&&"parentNode"===n,s=L++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,s)}:function(t,i,o){var a,l,d,c=[H,s];if(o){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(d=t[I]||(t[I]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),(a=l[n])&&a[0]===H&&a[1]===s)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,o))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function g(e,i,n){for(var r=0,s=i.length;s>r;r++)t(e,i[r],n);return n}function m(e,t,i,n,r){for(var s,o=[],a=0,l=e.length,d=null!=t;l>a;a++)(s=e[a])&&(!i||i(s,n,r))&&(o.push(s),d&&t.push(a));return o}function v(e,t,i,r,s,o){return r&&!r[I]&&(r=v(r)),s&&!s[I]&&(s=v(s,o)),n(function(n,o,a,l){var d,c,u,h=[],p=[],f=o.length,v=n||g(t||"*",a.nodeType?[a]:a,[]),_=!e||!n&&t?v:m(v,h,e,a,l),y=i?s||(n?e:f||r)?[]:o:_;if(i&&i(_,y,a,l),r)for(d=m(y,p),r(d,[],a,l),c=d.length;c--;)(u=d[c])&&(y[p[c]]=!(_[p[c]]=u));if(n){if(s||e){if(s){for(d=[],c=y.length;c--;)(u=y[c])&&d.push(_[c]=u);s(null,y=[],d,l)}for(c=y.length;c--;)(u=y[c])&&(d=s?ee(n,u):h[c])>-1&&(n[d]=!(o[d]=u))}}else y=m(y===o?y.splice(f,y.length):y),s?s(null,o,y,l):J.apply(o,y)})}function _(e){for(var t,i,n,r=e.length,s=k.relative[e[0].type],o=s||k.relative[" "],a=s?1:0,l=p(function(e){return e===t},o,!0),d=p(function(e){return ee(t,e)>-1},o,!0),c=[function(e,i,n){var r=!s&&(n||i!==D)||((t=i).nodeType?l(e,i,n):d(e,i,n));return t=null,r}];r>a;a++)if(i=k.relative[e[a].type])c=[p(f(c),i)];else{if(i=k.filter[e[a].type].apply(null,e[a].matches),i[I]){for(n=++a;r>n&&!k.relative[e[n].type];n++);return v(a>1&&f(c),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),i,n>a&&_(e.slice(a,n)),r>n&&_(e=e.slice(n)),r>n&&h(e))}c.push(i)}return f(c)}function y(e,i){var r=i.length>0,s=e.length>0,o=function(n,o,a,l,d){var c,u,h,p=0,f="0",g=n&&[],v=[],_=D,y=n||s&&k.find.TAG("*",d),b=H+=null==_?1:Math.random()||.1,w=y.length;for(d&&(D=o===E||o||d);f!==w&&null!=(c=y[f]);f++){if(s&&c){for(u=0,o||c.ownerDocument===E||(F(c),a=!P);h=e[u++];)if(h(c,o||E,a)){l.push(c);break}d&&(H=b)}r&&((c=!h&&c)&&p--,n&&g.push(c))}if(p+=f,r&&f!==p){for(u=0;h=i[u++];)h(g,v,o,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=G.call(l));v=m(v)}J.apply(l,v),d&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(l)}return d&&(H=b,D=_),g};return r?n(o):o}var b,w,k,x,C,$,j,T,D,O,S,F,E,A,P,R,z,N,M,I="sizzle"+1*new Date,q=e.document,H=0,L=0,B=i(),W=i(),K=i(),U=function(e,t){return e===t&&(S=!0),0},Y=1<<31,V={}.hasOwnProperty,Q=[],G=Q.pop,X=Q.push,J=Q.push,Z=Q.slice,ee=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",se=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ie+"+","g"),ae=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),de=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ce=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),ue=new RegExp(se),he=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,ye=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),we=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ke=function(){F()};try{J.apply(Q=Z.call(q.childNodes),q.childNodes),Q[q.childNodes.length].nodeType}catch(xe){J={apply:Q.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},F=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:q;return n!==E&&9===n.nodeType&&n.documentElement?(E=n,A=E.documentElement,P=!C(E),(i=E.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ke,!1):i.attachEvent&&i.attachEvent("onunload",ke)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(E.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(E.getElementsByClassName),w.getById=r(function(e){return A.appendChild(e).id=I,!E.getElementsByName||!E.getElementsByName(I).length}),w.getById?(k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var i=t.getElementById(e);return i?[i]:[]}},k.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(be,we);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),k.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},k.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&P?t.getElementsByClassName(e):void 0},z=[],R=[],(w.qsa=me.test(E.querySelectorAll))&&(r(function(e){A.appendChild(e).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+I+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+I+"+*").length||R.push(".#.+[+~]")}),r(function(e){var t=E.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(w.matchesSelector=me.test(N=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(e){w.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),z.push("!=",se)}),R=R.length&&new RegExp(R.join("|")),z=z.length&&new RegExp(z.join("|")),t=me.test(A.compareDocumentPosition),M=t||me.test(A.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return S=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===E||e.ownerDocument===q&&M(q,e)?-1:t===E||t.ownerDocument===q&&M(q,t)?1:O?ee(O,e)-ee(O,t):0:4&i?-1:1)}:function(e,t){if(e===t)return S=!0,0;var i,n=0,r=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!r||!s)return e===E?-1:t===E?1:r?-1:s?1:O?ee(O,e)-ee(O,t):0;if(r===s)return o(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?o(a[n],l[n]):a[n]===q?-1:l[n]===q?1:0},E):E},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==E&&F(e),i=i.replace(ce,"='$1']"),w.matchesSelector&&P&&!K[i+" "]&&(!z||!z.test(i))&&(!R||!R.test(i)))try{var n=N.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,E,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==E&&F(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==E&&F(e);var i=k.attrHandle[t.toLowerCase()],n=i&&V.call(k.attrHandle,t.toLowerCase())?i(e,t,!P):void 0;return void 0!==n?n:w.attributes||!P?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(S=!w.detectDuplicates,O=!w.sortStable&&e.slice(0),e.sort(U),S){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return O=null,e},x=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=x(t);return i},k=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},
find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ue.test(i)&&(t=$(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var s=t.attr(r,e);return null==s?"!="===i:i?(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(oe," ")+" ").indexOf(n)>-1:"|="===i?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var d,c,u,h,p,f,g=s!==o?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!l&&!a,y=!1;if(m){if(s){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&_){for(h=m,u=h[I]||(h[I]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],p=d[0]===H&&d[1],y=p&&d[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(y=p=0)||f.pop();)if(1===h.nodeType&&++y&&h===t){c[e]=[H,p,y];break}}else if(_&&(h=t,u=h[I]||(h[I]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],p=d[0]===H&&d[1],y=p),y===!1)for(;(h=++p&&h&&h[g]||(y=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(_&&(u=h[I]||(h[I]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),c[e]=[H,y]),h!==t)););return y-=r,y===n||y%n===0&&y/n>=0}}},PSEUDO:function(e,i){var r,s=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[I]?s(i):s.length>1?(r=[e,e,"",i],k.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=s(e,i),o=r.length;o--;)n=ee(e,r[o]),e[n]=!(t[n]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:n(function(e){var t=[],i=[],r=j(e.replace(ae,"$1"));return r[I]?n(function(e,t,i,n){for(var s,o=r(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,n,s){return t[0]=e,r(t,null,s,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var i;do if(i=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:d(function(){return[0]}),last:d(function(e,t){return[t-1]}),eq:d(function(e,t,i){return[0>i?i+t:i]}),even:d(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:d(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:d(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:d(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},k.pseudos.nth=k.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})k.pseudos[b]=l(b);return u.prototype=k.filters=k.pseudos,k.setFilters=new u,$=t.tokenize=function(e,i){var n,r,s,o,a,l,d,c=W[e+" "];if(c)return i?0:c.slice(0);for(a=e,l=[],d=k.preFilter;a;){(!n||(r=le.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=de.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(ae," ")}),a=a.slice(n.length));for(o in k.filter)!(r=pe[o].exec(a))||d[o]&&!(r=d[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):W(e,l).slice(0)},j=t.compile=function(e,t){var i,n=[],r=[],s=K[e+" "];if(!s){for(t||(t=$(e)),i=t.length;i--;)s=_(t[i]),s[I]?n.push(s):r.push(s);s=K(e,y(r,n)),s.selector=e}return s},T=t.select=function(e,t,i,n){var r,s,o,a,l,d="function"==typeof e&&e,u=!n&&$(e=d.selector||e);if(i=i||[],1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&w.getById&&9===t.nodeType&&P&&k.relative[s[1].type]){if(t=(k.find.ID(o.matches[0].replace(be,we),t)||[])[0],!t)return i;d&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=pe.needsContext.test(e)?0:s.length;r--&&(o=s[r],!k.relative[a=o.type]);)if((l=k.find[a])&&(n=l(o.matches[0].replace(be,we),_e.test(s[0].type)&&c(t.parentNode)||t))){if(s.splice(r,1),e=n.length&&h(s),!e)return J.apply(i,n),i;break}}return(d||j(e,u))(n,t,!P,i,!t||_e.test(e)&&c(t.parentNode)||t),i},w.sortStable=I.split("").sort(U).join("")===I,w.detectDuplicates=!!S,F(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);se.find=ce,se.expr=ce.selectors,se.expr[":"]=se.expr.pseudos,se.uniqueSort=se.unique=ce.uniqueSort,se.text=ce.getText,se.isXMLDoc=ce.isXML,se.contains=ce.contains;var ue=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&se(e).is(i))break;n.push(e)}return n},he=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},pe=se.expr.match.needsContext,fe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ge=/^.[^:#\[\.,]*$/;se.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?se.find.matchesSelector(n,e)?[n]:[]:se.find.matches(e,se.grep(t,function(e){return 1===e.nodeType}))},se.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(se(e).filter(function(){for(t=0;i>t;t++)if(se.contains(r[t],this))return!0}));for(t=0;i>t;t++)se.find(e,r[t],n);return n=this.pushStack(i>1?se.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&pe.test(e)?se(e):e||[],!1).length}});var me,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,_e=se.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||me,"string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof se?t[0]:t,se.merge(this,se.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),fe.test(n[1])&&se.isPlainObject(t))for(n in t)se.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?void 0!==i.ready?i.ready(e):e(se):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))};_e.prototype=se.fn,me=se(Q);var ye=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};se.fn.extend({has:function(e){var t=se(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(se.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,s=[],o=pe.test(e)||"string"!=typeof e?se(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&se.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?se.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?Z.call(se(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(se.uniqueSort(se.merge(this.get(),se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.each({parent:function Bt(e){var Bt=e.parentNode;return Bt&&11!==Bt.nodeType?Bt:null},parents:function(e){return ue(e,"parentNode")},parentsUntil:function(e,t,i){return ue(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return ue(e,"nextSibling")},prevAll:function(e){return ue(e,"previousSibling")},nextUntil:function(e,t,i){return ue(e,"nextSibling",i)},prevUntil:function(e,t,i){return ue(e,"previousSibling",i)},siblings:function(e){return he((e.parentNode||{}).firstChild,e)},children:function(e){return he(e.firstChild)},contents:function(e){return e.contentDocument||se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(i,n){var r=se.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=se.filter(n,r)),this.length>1&&(be[e]||se.uniqueSort(r),ye.test(e)&&r.reverse()),this.pushStack(r)}});var we=/\S+/g;se.Callbacks=function(e){e="string"==typeof e?s(e):se.extend({},e);var t,i,n,r,o=[],a=[],l=-1,d=function(){for(r=e.once,n=t=!0;a.length;l=-1)for(i=a.shift();++l<o.length;)o[l].apply(i[0],i[1])===!1&&e.stopOnFalse&&(l=o.length,i=!1);e.memory||(i=!1),t=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!t&&(l=o.length-1,a.push(i)),function n(t){se.each(t,function(t,i){se.isFunction(i)?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==se.type(i)&&n(i)})}(arguments),i&&!t&&d()),this},remove:function(){return se.each(arguments,function(e,t){for(var i;(i=se.inArray(t,o,i))>-1;)o.splice(i,1),l>=i&&l--}),this},has:function(e){return e?se.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=a=[],i||(o=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(i){se.each(t,function(t,s){var o=se.isFunction(e[t])&&e[t];r[s[1]](function(){var e=o&&o.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[s[0]+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,n):n}},r={};return n.pipe=n.then,se.each(t,function(e,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,s=G.call(arguments),o=s.length,a=1!==o||e&&se.isFunction(e.promise)?o:0,l=1===a?e:se.Deferred(),d=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?G.call(arguments):r,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)s[r]&&se.isFunction(s[r].promise)?s[r].promise().progress(d(r,i,t)).done(d(r,n,s)).fail(l.reject):--a;return a||l.resolveWith(n,s),l.promise()}});var ke;se.fn.ready=function(e){return se.ready.promise().done(e),this},se.extend({isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){(e===!0?--se.readyWait:se.isReady)||(se.isReady=!0,e!==!0&&--se.readyWait>0||(ke.resolveWith(Q,[se]),se.fn.triggerHandler&&(se(Q).triggerHandler("ready"),se(Q).off("ready"))))}}),se.ready.promise=function(t){return ke||(ke=se.Deferred(),"complete"===Q.readyState||"loading"!==Q.readyState&&!Q.documentElement.doScroll?e.setTimeout(se.ready):(Q.addEventListener("DOMContentLoaded",o),e.addEventListener("load",o))),ke.promise(t)},se.ready.promise();var xe=function Wt(e,t,i,n,r,s,o){var a=0,l=e.length,d=null==i;if("object"===se.type(i)){r=!0;for(a in i)Wt(e,t,a,i[a],!0,s,o)}else if(void 0!==n&&(r=!0,se.isFunction(n)||(o=!0),d&&(o?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(se(e),i)})),t))for(;l>a;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return r?e:d?t.call(e):l?t(e[0],i):s},Ce=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var i=t||{};return e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ce(e))return{};var t=e[this.expando];return t||(t={},Ce(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[t]=i;else for(n in t)r[n]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,se.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,s=e[this.expando];if(void 0!==s){if(void 0===t)this.register(e);else{se.isArray(t)?n=t.concat(t.map(se.camelCase)):(r=se.camelCase(t),t in s?n=[t,r]:(n=r,n=n in s?[n]:n.match(we)||[])),i=n.length;for(;i--;)delete s[n[i]]}(void 0===t||se.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!se.isEmptyObject(t)}};var $e=new a,je=new a,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/[A-Z]/g;se.extend({hasData:function(e){return je.hasData(e)||$e.hasData(e)},data:function(e,t,i){return je.access(e,t,i)},removeData:function(e,t){je.remove(e,t)},_data:function(e,t,i){return $e.access(e,t,i)},_removeData:function(e,t){$e.remove(e,t)}}),se.fn.extend({data:function Kt(e,t){var i,n,Kt,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(Kt=je.get(r),1===r.nodeType&&!$e.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=se.camelCase(n.slice(5)),l(r,n,Kt[n])));$e.set(r,"hasDataAttrs",!0)}return Kt}return"object"===("undefined"==typeof e?"undefined":_typeof(e))?this.each(function(){je.set(this,e)}):xe(this,function(t){var i,n;if(r&&void 0===t){if(i=je.get(r,e)||je.get(r,e.replace(De,"-$&").toLowerCase()),void 0!==i)return i;if(n=se.camelCase(e),i=je.get(r,n),void 0!==i)return i;if(i=l(r,n,void 0),void 0!==i)return i}else n=se.camelCase(e),this.each(function(){var i=je.get(this,n);je.set(this,n,t),e.indexOf("-")>-1&&void 0!==i&&je.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){je.remove(this,e)})}}),se.extend({queue:function Ut(e,t,i){var Ut;return e?(t=(t||"fx")+"queue",Ut=$e.get(e,t),i&&(!Ut||se.isArray(i)?Ut=$e.access(e,t,se.makeArray(i)):Ut.push(i)),Ut||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=se.queue(e,t),n=i.length,r=i.shift(),s=se._queueHooks(e,t),o=function(){se.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return $e.get(e,i)||$e.access(e,i,{empty:se.Callbacks("once memory").add(function(){$e.remove(e,[t+"queue",i])})})}}),se.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?se.queue(this[0],e):void 0===t?this:this.each(function(){var i=se.queue(this,e,t);se._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=se.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)i=$e.get(s[o],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],Ee=function(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)},Ae=/^(?:checkbox|radio)$/i,Pe=/<([\w:-]+)/,Re=/^$|\/(?:java|ecma)script/i,ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ze.optgroup=ze.option,ze.tbody=ze.tfoot=ze.colgroup=ze.caption=ze.thead,ze.th=ze.td;var Ne=/<|&#?\w+;/;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),i=Q.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Me=/^key/,Ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qe=/^([^.]*)(?:\.(.+)|)/;se.event={global:{},add:function(e,t,i,n,r){var s,o,a,l,d,c,u,h,p,f,g,m=$e.get(e);if(m)for(i.handler&&(s=i,i=s.handler,r=s.selector),i.guid||(i.guid=se.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof se&&se.event.triggered!==t.type?se.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],d=t.length;d--;)a=qe.exec(t[d])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(u=se.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=se.event.special[p]||{},c=se.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&se.expr.match.needsContext.test(r),namespace:f.join(".")},s),(h=l[p])||(h=l[p]=[],h.delegateCount=0,u.setup&&u.setup.call(e,n,f,o)!==!1||e.addEventListener&&e.addEventListener(p,o)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),se.event.global[p]=!0)},remove:function(e,t,i,n,r){var s,o,a,l,d,c,u,h,p,f,g,m=$e.hasData(e)&&$e.get(e);if(m&&(l=m.events)){for(t=(t||"").match(we)||[""],d=t.length;d--;)if(a=qe.exec(t[d])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(u=se.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)c=h[s],!r&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(s,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));o&&!h.length&&(u.teardown&&u.teardown.call(e,f,m.handle)!==!1||se.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)se.event.remove(e,p+t[d],i,n,!0);se.isEmptyObject(l)&&$e.remove(e,"handle events")}},dispatch:function(e){e=se.event.fix(e);var t,i,n,r,s,o=[],a=G.call(arguments),l=($e.get(this,"events")||{})[e.type]||[],d=se.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(o=se.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(s.namespace))&&(e.handleObj=s,e.data=s.data,n=((se.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,s,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(n=[],i=0;a>i;i++)s=t[i],r=s.selector+" ",void 0===n[r]&&(n[r]=s.needsContext?se(r,this).index(l)>-1:se.find(r,this,null,[l]).length),n[r]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,s=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||Q,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[se.expando])return e;var t,i,n,r=e.type,s=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Ie.test(r)?this.mouseHooks:Me.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new se.Event(s),t=n.length;t--;)i=n[t],e[i]=s[i];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&se.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return se.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},se.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},se.Event=function(e,t){return this instanceof se.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:f):this.type=e,t&&se.extend(this,t),this.timeStamp=e&&e.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(e,t)},se.Event.prototype={constructor:se.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==n&&!se.contains(n,r))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),se.fn.extend({on:function(e,t,i,n){return m(this,e,t,i,n)},one:function(e,t,i,n){return m(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,se(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"===("undefined"==typeof e?"undefined":_typeof(e))){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=f),this.each(function(){se.event.remove(this,e,i,t)})}});var He=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Le=/<script|<style|<link/i,Be=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^true\/(.*)/,Ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;se.extend({htmlPrefilter:function(e){return e.replace(He,"<$1></$2>")},clone:function Yt(e,t,i){var n,r,s,o,Yt=e.cloneNode(!0),a=se.contains(e.ownerDocument,e);if(!(ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(o=c(Yt),s=c(e),n=0,r=s.length;r>n;n++)w(s[n],o[n]);if(t)if(i)for(s=s||c(e),o=o||c(Yt),n=0,r=s.length;r>n;n++)b(s[n],o[n]);else b(e,Yt);return o=c(Yt,"script"),o.length>0&&u(o,!a&&c(e,"script")),Yt},cleanData:function(e){for(var t,i,n,r=se.event.special,s=0;void 0!==(i=e[s]);s++)if(Ce(i)){if(t=i[$e.expando]){if(t.events)for(n in t.events)r[n]?se.event.remove(i,n):se.removeEvent(i,n,t.handle);i[$e.expando]=void 0}i[je.expando]&&(i[je.expando]=void 0)}}}),se.fn.extend({domManip:k,detach:function(e){return x(this,e,!0)},remove:function(e){return x(this,e)},text:function(e){return xe(this,function(e){return void 0===e?se.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return k(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return k(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(se.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return xe(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!ze[(Pe.exec(e)||["",""])[1].toLowerCase()]){e=se.htmlPrefilter(e);try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(se.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return k(this,arguments,function(t){var i=this.parentNode;se.inArray(this,e)<0&&(se.cleanData(c(this)),i&&i.replaceChild(t,this))},e)}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var i,n=[],r=se(e),s=r.length-1,o=0;s>=o;o++)i=o===s?this:this.clone(!0),se(r[o])[t](i),J.apply(n,i.get());return this.pushStack(n)}});var Ue,Ye={HTML:"block",BODY:"block"},Ve=/^margin/,Qe=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),Ge=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Xe=function(e,t,i,n){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=i.apply(e,n||[]);for(s in t)e.style[s]=o[s];return r},Je=Q.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Je.appendChild(o);var t=e.getComputedStyle(a);i="1%"!==t.top,s="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",r="4px"===t.marginRight,Je.removeChild(o)}var i,n,r,s,o=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),se.extend(ne,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},pixelMarginRight:function(){return null==n&&t(),r},reliableMarginLeft:function(){return null==n&&t(),s},reliableMarginRight:function(){var t,i=a.appendChild(Q.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",Je.appendChild(o),t=!parseFloat(e.getComputedStyle(i).marginRight),Je.removeChild(o),a.removeChild(i),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},it=["Webkit","O","Moz","ms"],nt=Q.createElement("div").style;se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=j(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function Vt(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=se.camelCase(t),Vt=e.style;return t=se.cssProps[a]||(se.cssProps[a]=D(a)||a),o=se.cssHooks[t]||se.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:Vt[t]:(s="undefined"==typeof i?"undefined":_typeof(i),"string"===s&&(r=Se.exec(i))&&r[1]&&(i=d(e,t,r),s="number"),null!=i&&i===i&&("number"===s&&(i+=r&&r[3]||(se.cssNumber[a]?"":"px")),ne.clearCloneStyle||""!==i||0!==t.indexOf("background")||(Vt[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(Vt[t]=i)),void 0)}},css:function(e,t,i,n){var r,s,o,a=se.camelCase(t);return t=se.cssProps[a]||(se.cssProps[a]=D(a)||a),o=se.cssHooks[t]||se.cssHooks[a],o&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=j(e,t,n)),"normal"===r&&t in tt&&(r=tt[t]),""===i||i?(s=parseFloat(r),i===!0||isFinite(s)?s||0:r):r}}),se.each(["height","width"],function(e,t){se.cssHooks[t]={get:function(e,i,n){return i?Ze.test(se.css(e,"display"))&&0===e.offsetWidth?Xe(e,et,function(){return F(e,t,n)}):F(e,t,n):void 0},set:function(e,i,n){var r,s=n&&Ge(e),o=n&&S(e,t,n,"border-box"===se.css(e,"boxSizing",!1,s),s);return o&&(r=Se.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=se.css(e,t)),O(e,i,o)}}}),se.cssHooks.marginLeft=T(ne.reliableMarginLeft,function(e,t){return t?(parseFloat(j(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left;
}))+"px":void 0}),se.cssHooks.marginRight=T(ne.reliableMarginRight,function(e,t){return t?Xe(e,{display:"inline-block"},j,[e,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+Fe[n]+t]=s[n]||s[n-2]||s[0];return r}},Ve.test(e)||(se.cssHooks[e+t].set=O)}),se.fn.extend({css:function(e,t){return xe(this,function(e,t,i){var n,r,s={},o=0;if(se.isArray(t)){for(n=Ge(e),r=t.length;r>o;o++)s[t[o]]=se.css(e,t[o],!1,n);return s}return void 0!==i?se.style(e,t,i):se.css(e,t)},e,t,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ee(this)?se(this).show():se(this).hide()})}}),se.Tween=A,A.prototype={constructor:A,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||se.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(se.cssNumber[i]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,i=A.propHooks[this.prop];return this.options.duration?this.pos=t=se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[se.cssProps[e.prop]]&&!se.cssHooks[e.prop]?e.elem[e.prop]=e.now:se.style(e.elem,e.prop,e.now+e.unit)}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},se.fx=A.prototype.init,se.fx.step={};var rt,st,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;se.Animation=se.extend(I,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return d(i.elem,e,Se.exec(t),i),i}]},tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var i,n=0,r=e.length;r>n;n++)i=e[n],I.tweeners[i]=I.tweeners[i]||[],I.tweeners[i].unshift(t)},prefilters:[N],prefilter:function(e,t){t?I.prefilters.unshift(e):I.prefilters.push(e)}}),se.speed=function(e,t,i){var n=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?se.extend({},e):{complete:i||!i&&t||se.isFunction(e)&&e,duration:e,easing:i&&t||t&&!se.isFunction(t)&&t};return n.duration=se.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in se.fx.speeds?se.fx.speeds[n.duration]:se.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){se.isFunction(n.old)&&n.old.call(this),n.queue&&se.dequeue(this,n.queue)},n},se.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=se.isEmptyObject(e),s=se.speed(t,i,n),o=function(){var t=I(this,se.extend({},e),s);(r||$e.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=se.timers,o=$e.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&at.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(i),t=!1,s.splice(r,1));(t||!i)&&se.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=$e.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],s=se.timers,o=n?n.length:0;for(i.finish=!0,se.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),se.each(["toggle","show","hide"],function(e,t){var i=se.fn[t];se.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(R(t,!0),e,n,r)}}),se.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),se.timers=[],se.fx.tick=function(){var e,t=0,i=se.timers;for(rt=se.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||se.fx.stop(),rt=void 0},se.fx.timer=function(e){se.timers.push(e),e()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){st||(st=e.setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){e.clearInterval(st),st=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,i){return t=se.fx?se.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),i=t.appendChild(Q.createElement("option"));e.type="checkbox",ne.checkOn=""!==e.value,ne.optSelected=i.selected,t.disabled=!0,ne.optDisabled=!i.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",ne.radioValue="t"===e.value}();var lt,dt=se.expr.attrHandle;se.fn.extend({attr:function(e,t){return xe(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})}}),se.extend({attr:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof e.getAttribute?se.prop(e,t,i):(1===s&&se.isXMLDoc(e)||(t=t.toLowerCase(),r=se.attrHooks[t]||(se.expr.match.bool.test(t)?lt:void 0)),void 0!==i?null===i?void se.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=se.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&se.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,r=0,s=t&&t.match(we);if(s&&1===e.nodeType)for(;i=s[r++];)n=se.propFix[i]||i,se.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)}}),lt={set:function(e,t,i){return t===!1?se.removeAttr(e,i):e.setAttribute(i,i),i}},se.each(se.expr.match.bool.source.match(/\w+/g),function(e,t){var i=dt[t]||se.find.attr;dt[t]=function(e,t,n){var r,s;return n||(s=dt[t],dt[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,dt[t]=s),r}});var ct=/^(?:input|select|textarea|button)$/i,ut=/^(?:a|area)$/i;se.fn.extend({prop:function(e,t){return xe(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[se.propFix[e]||e]})}}),se.extend({prop:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&se.isXMLDoc(e)||(t=se.propFix[t]||t,r=se.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=se.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||ut.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ne.optSelected||(se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this});var ht=/[\t\r\n\f]/g;se.fn.extend({addClass:function(e){var t,i,n,r,s,o,a,l=0;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,q(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];i=this[l++];)if(r=q(i),n=1===i.nodeType&&(" "+r+" ").replace(ht," ")){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a=se.trim(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,r,s,o,a,l=0;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];i=this[l++];)if(r=q(i),n=1===i.nodeType&&(" "+r+" ").replace(ht," ")){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");a=se.trim(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i="undefined"==typeof e?"undefined":_typeof(e);return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):se.isFunction(e)?this.each(function(i){se(this).toggleClass(e.call(this,i,q(this),t),t)}):this.each(function(){var t,n,r,s;if("string"===i)for(n=0,r=se(this),s=e.match(we)||[];t=s[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(void 0===e||"boolean"===i)&&(t=q(this),t&&$e.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":$e.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+q(i)+" ").replace(ht," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g,ft=/[\x20\t\r\n\f]+/g;se.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=se.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,se(this).val()):e,null==r?r="":"number"==typeof r?r+="":se.isArray(r)&&(r=se.map(r,function(e){return null==e?"":e+""})),t=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=se.valHooks[r.type]||se.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(pt,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(e){var t=se.find.attr(e,"value");return null!=t?t:se.trim(se.text(e)).replace(ft," ")}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,o=s?null:[],a=s?r+1:n.length,l=0>r?a:s?r:0;a>l;l++)if(i=n[l],(i.selected||l===r)&&(ne.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!se.nodeName(i.parentNode,"optgroup"))){if(t=se(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,s=se.makeArray(t),o=r.length;o--;)n=r[o],(n.selected=se.inArray(se.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(e,t){return se.isArray(t)?e.checked=se.inArray(se(e).val(),t)>-1:void 0}},ne.checkOn||(se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;se.extend(se.event,{trigger:function(t,i,n,r){var s,o,a,l,d,c,u,h=[n||Q],p=ie.call(t,"type")?t.type:t,f=ie.call(t,"namespace")?t.namespace.split("."):[];if(o=a=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!gt.test(p+se.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),d=p.indexOf(":")<0&&"on"+p,t=t[se.expando]?t:new se.Event(p,"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:se.makeArray(i,[t]),u=se.event.special[p]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!se.isWindow(n)){for(l=u.delegateType||p,gt.test(l+p)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(n.ownerDocument||Q)&&h.push(a.defaultView||a.parentWindow||e)}for(s=0;(o=h[s++])&&!t.isPropagationStopped();)t.type=s>1?l:u.bindType||p,c=($e.get(o,"events")||{})[t.type]&&$e.get(o,"handle"),c&&c.apply(o,i),c=d&&o[d],c&&c.apply&&Ce(o)&&(t.result=c.apply(o,i),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||u._default&&u._default.apply(h.pop(),i)!==!1||!Ce(n)||d&&se.isFunction(n[p])&&!se.isWindow(n)&&(a=n[d],a&&(n[d]=null),se.event.triggered=p,n[p](),se.event.triggered=void 0,a&&(n[d]=a)),t.result}},simulate:function(e,t,i){var n=se.extend(new se.Event,i,{type:e,isSimulated:!0});se.event.trigger(n,null,t)}}),se.fn.extend({trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?se.event.trigger(e,t,i,!0):void 0}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ne.focusin="onfocusin"in e,ne.focusin||se.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){se.event.simulate(t,e.target,se.event.fix(e))};se.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=$e.access(n,t);r||n.addEventListener(e,i,!0),$e.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=$e.access(n,t)-1;r?$e.access(n,t,r):(n.removeEventListener(e,i,!0),$e.remove(n,t))}}});var mt=e.location,vt=se.now(),_t=/\?/;se.parseJSON=function(e){return JSON.parse(e+"")},se.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){i=void 0}return(!i||i.getElementsByTagName("parsererror").length)&&se.error("Invalid XML: "+t),i};var yt=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xt=/^(?:GET|HEAD)$/,Ct=/^\/\//,$t={},jt={},Tt="*/".concat("*"),Dt=Q.createElement("a");Dt.href=mt.href,se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:kt.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,se.ajaxSettings),t):B(se.ajaxSettings,e)},ajaxPrefilter:H($t),ajaxTransport:H(jt),ajax:function(t,i){function n(t,i,n,a){var d,u,_,y,w,x=i;2!==b&&(b=2,l&&e.clearTimeout(l),r=void 0,o=a||"",k.readyState=t>0?4:0,d=t>=200&&300>t||304===t,n&&(y=W(h,k,n)),y=K(h,y,k,d),d?(h.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(se.lastModified[s]=w),w=k.getResponseHeader("etag"),w&&(se.etag[s]=w)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=y.state,u=y.data,_=y.error,d=!_)):(_=x,(t||!x)&&(x="error",0>t&&(t=0))),k.status=t,k.statusText=(i||x)+"",d?g.resolveWith(p,[u,x,k]):g.rejectWith(p,[k,x,_]),k.statusCode(v),v=void 0,c&&f.trigger(d?"ajaxSuccess":"ajaxError",[k,h,d?u:_]),m.fireWith(p,[k,x]),c&&(f.trigger("ajaxComplete",[k,h]),--se.active||se.event.trigger("ajaxStop")))}"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(i=t,t=void 0),i=i||{};var r,s,o,a,l,d,c,u,h=se.ajaxSetup({},i),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?se(p):se.event,g=se.Deferred(),m=se.Callbacks("once memory"),v=h.statusCode||{},_={},y={},b=0,w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=wt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=y[i]=y[i]||e,_[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),n(0,t),this}};if(g.promise(k).complete=m.add,k.success=k.done,k.error=k.fail,h.url=((t||h.url||mt.href)+"").replace(yt,"").replace(Ct,mt.protocol+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=se.trim(h.dataType||"*").toLowerCase().match(we)||[""],null==h.crossDomain){d=Q.createElement("a");try{d.href=h.url,d.href=d.href,h.crossDomain=Dt.protocol+"//"+Dt.host!=d.protocol+"//"+d.host}catch(x){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=se.param(h.data,h.traditional)),L($t,h,i,k),2===b)return k;c=se.event&&h.global,c&&0===se.active++&&se.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!xt.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(_t.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=bt.test(s)?s.replace(bt,"$1_="+vt++):s+(_t.test(s)?"&":"?")+"_="+vt++)),h.ifModified&&(se.lastModified[s]&&k.setRequestHeader("If-Modified-Since",se.lastModified[s]),se.etag[s]&&k.setRequestHeader("If-None-Match",se.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Tt+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)k.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(p,k,h)===!1||2===b))return k.abort();w="abort";for(u in{success:1,error:1,complete:1})k[u](h[u]);if(r=L(jt,h,i,k)){if(k.readyState=1,c&&f.trigger("ajaxSend",[k,h]),2===b)return k;h.async&&h.timeout>0&&(l=e.setTimeout(function(){k.abort("timeout")},h.timeout));try{b=1,r.send(_,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return k},getJSON:function(e,t,i){return se.get(e,t,i,"json")},getScript:function(e,t){return se.get(e,void 0,t,"script")}}),se.each(["get","post"],function(e,t){se[t]=function(e,i,n,r){return se.isFunction(i)&&(r=r||n,n=i,i=void 0),se.ajax(se.extend({url:e,type:t,dataType:r,data:i,success:n},se.isPlainObject(e)&&e))}}),se._evalUrl=function(e){return se.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(e){var t;return se.isFunction(e)?this.each(function(t){se(this).wrapAll(e.call(this,t))}):(this[0]&&(t=se(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return se.isFunction(e)?this.each(function(t){se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=se(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(i){se(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(e){return!se.expr.filters.visible(e)},se.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Ot=/%20/g,St=/\[\]$/,Ft=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;se.param=function(e,t){var i,n=[],r=function(e,t){t=se.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){r(this.name,this.value)});else for(i in e)U(i,e[i],t,r);return n.join("&").replace(Ot,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&At.test(this.nodeName)&&!Et.test(e)&&(this.checked||!Ae.test(e))}).map(function(e,t){var i=se(this).val();return null==i?null:se.isArray(i)?se.map(i,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:i.replace(Ft,"\r\n")}}).get()}}),se.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Pt={0:200,1223:204},Rt=se.ajaxSettings.xhr();ne.cors=!!Rt&&"withCredentials"in Rt,ne.ajax=Rt=!!Rt,se.ajaxTransport(function(t){var i,n;return ne.cors||Rt&&!t.crossDomain?{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);i=function(e){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Pt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(l){if(i)throw l}},abort:function(){i&&i()}}:void 0}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),se.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=se("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){i&&i()}}}});var zt=[],Nt=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||se.expando+"_"+vt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(t,i,n){var r,s,o,a=t.jsonp!==!1&&(Nt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=se.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Nt,"$1"+r):t.jsonp!==!1&&(t.url+=(_t.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||se.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){o=arguments},n.always(function(){void 0===s?se(e).removeProp(r):e[r]=s,t[r]&&(t.jsonpCallback=i.jsonpCallback,zt.push(r)),o&&se.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),se.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=fe.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=h([e],t,r),r&&r.length&&se(r).remove(),se.merge([],n.childNodes))};var Mt=se.fn.load;se.fn.load=function(e,t,i){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var n,r,s,o=this,a=e.indexOf(" ");return a>-1&&(n=se.trim(e.slice(a)),e=e.slice(0,a)),se.isFunction(t)?(i=t,t=void 0):t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(r="POST"),o.length>0&&se.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(n?se("<div>").append(se.parseHTML(e)).find(n):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,s||[e.responseText,t,e])})}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length},se.offset={setOffset:function(e,t,i){var n,r,s,o,a,l,d,c=se.css(e,"position"),u=se(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=se.css(e,"top"),l=se.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,d?(n=u.position(),o=n.top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),se.isFunction(t)&&(t=t.call(e,i,se.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):u.css(h)}},se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){se.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;if(s)return t=s.documentElement,se.contains(t,n)?(r=n.getBoundingClientRect(),i=Y(s),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===se.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(n=e.offset()),n.top+=se.css(e[0],"borderTopWidth",!0),n.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-se.css(i,"marginTop",!0),left:t.left-n.left-se.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===se.css(e,"position");)e=e.offsetParent;return e||Je})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;se.fn[e]=function(n){return xe(this,function(e,n,r){var s=Y(e);return void 0===r?s?s[t]:e[n]:void(s?s.scrollTo(i?s.pageXOffset:r,i?r:s.pageYOffset):e[n]=r)},e,n,arguments.length)}}),se.each(["top","left"],function(e,t){se.cssHooks[t]=T(ne.pixelPosition,function(e,i){return i?(i=j(e,t),Qe.test(i)?se(e).position()[t]+"px":i):void 0})}),se.each({Height:"height",Width:"width"},function(e,t){se.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){se.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border");return xe(this,function(t,i,n){var r;return se.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?se.css(t,i,o):se.style(t,i,n,o)},t,s?n:void 0,s,null)}})}),se.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}}),se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var It=e.jQuery,qt=e.$;return se.noConflict=function(t){return e.$===se&&(e.$=qt),t&&e.jQuery===se&&(e.jQuery=It),se},t||(e.jQuery=e.$=se),se}),window.whatInput=function(){function e(){n(),r(event),g=!0,w=window.setTimeout(function(){g=!1},650)}function t(e){g||r(e)}function i(e){n(),r(e)}function n(){window.clearTimeout(w)}function r(e){var t=o(e),i=b[e.type];if("pointer"===i&&(i=l(e)),m!==i){var n=a(e),r=n.nodeName.toLowerCase(),c="input"===r?n.getAttribute("type"):null;!p.hasAttribute("data-whatinput-formtyping")&&m&&"keyboard"===i&&"tab"!==x[t]&&("textarea"===r||"select"===r||"input"===r&&v.indexOf(c)<0)||y.indexOf(t)>-1||s(i)}"keyboard"===i&&d(t)}function s(e){m=e,p.setAttribute("data-whatinput",m),-1===k.indexOf(m)&&k.push(m)}function o(e){return e.keyCode?e.keyCode:e.which}function a(e){return e.target||e.srcElement}function l(e){return"number"==typeof e.pointerType?C[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType}function d(e){-1===f.indexOf(x[e])&&x[e]&&f.push(x[e])}function c(e){var t=o(e),i=f.indexOf(x[t]);-1!==i&&f.splice(i,1)}function u(){p=document.body,window.PointerEvent?(p.addEventListener("pointerdown",t),p.addEventListener("pointermove",t)):window.MSPointerEvent?(p.addEventListener("MSPointerDown",t),p.addEventListener("MSPointerMove",t)):(p.addEventListener("mousedown",t),p.addEventListener("mousemove",t),"ontouchstart"in window&&p.addEventListener("touchstart",e)),p.addEventListener(_,t),p.addEventListener("keydown",i),p.addEventListener("keyup",i),document.addEventListener("keyup",c)}function h(){return _="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}var p,f=[],g=!1,m=null,v=["button","checkbox","file","image","radio","reset","submit"],_=h(),y=[16,17,18,91,93],b={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};b[h()]="mouse";var w,k=[],x={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},C={2:"touch",3:"touch",4:"mouse"};return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?u():document.addEventListener("DOMContentLoaded",u)),{ask:function(){return m},keys:function(){return f},types:function(){return k},set:s}}(),function(e){e.fn.areYouSure=function(t){var i=e.extend({message:"You have unsaved changes!",dirtyClass:"dirty",change:null,silent:!1,addRemoveFieldsMarksDirty:!1,fieldEvents:"change keyup propertychange input",fieldSelector:":input:not(input[type=submit]):not(input[type=button])"},t),n=function(t){if(t.hasClass("ays-ignore")||t.hasClass("aysIgnore")||t.attr("data-ays-ignore")||void 0===t.attr("name"))return null;if(t.is(":disabled"))return"ays-disabled";var i,n=t.attr("type");switch(t.is("select")&&(n="select"),n){case"checkbox":case"radio":i=t.is(":checked");break;case"select":i="",t.find("option").each(function(t){var n=e(this);n.is(":selected")&&(i+=n.val())});break;default:i=t.val()}return i},r=function(e){e.data("ays-orig",n(e))},s=function(t){var r=function(e){var t=e.data("ays-orig");return void 0===t?!1:n(e)!=t},s=e(this).is("form")?e(this):e(this).parents("form");if(r(e(t.target)))return void a(s,!0);var o=s.find(i.fieldSelector);if(i.addRemoveFieldsMarksDirty){var l=s.data("ays-orig-field-count");if(l!=o.length)return void a(s,!0)}var d=!1;o.each(function(){var t=e(this);return r(t)?(d=!0,!1):void 0}),a(s,d)},o=function(t){var n=t.find(i.fieldSelector);e(n).each(function(){r(e(this))}),e(n).unbind(i.fieldEvents,s),e(n).bind(i.fieldEvents,s),t.data("ays-orig-field-count",e(n).length),a(t,!1)},a=function(e,t){var n=t!=e.hasClass(i.dirtyClass);e.toggleClass(i.dirtyClass,t),n&&(i.change&&i.change.call(e,e),t&&e.trigger("dirty.areYouSure",[e]),t||e.trigger("clean.areYouSure",[e]),e.trigger("change.areYouSure",[e]))},l=function(){var t=e(this),n=t.find(i.fieldSelector);e(n).each(function(){var t=e(this);t.data("ays-orig")||(r(t),t.bind(i.fieldEvents,s))}),t.trigger("checkform.areYouSure")},d=function(){o(e(this))};return i.silent||window.aysUnloadSet||(window.aysUnloadSet=!0,e(window).bind("beforeunload",function(){var t=e("form").filter("."+i.dirtyClass);if(0!=t.length){if(navigator.userAgent.toLowerCase().match(/msie|chrome/)){if(window.aysHasPrompted)return;window.aysHasPrompted=!0,window.setTimeout(function(){window.aysHasPrompted=!1},900)}return i.message}})),this.each(function(t){if(e(this).is("form")){var n=e(this);n.submit(function(){n.removeClass(i.dirtyClass)}),n.bind("reset",function(){a(n,!1)}),n.bind("rescan.areYouSure",l),n.bind("reinitialize.areYouSure",d),n.bind("checkform.areYouSure",s),o(n)}})}}(jQuery),function(e,t,i){!function(){var n,r,s,o="2.2.0",a="datepicker",l=".datepicker-here",d=!1,c='<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>',u={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",
offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},h={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},p=function(e,r){this.el=e,this.$el=t(e),this.opts=t.extend(!0,{},u,r,this.$el.data()),n==i&&(n=t("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()};s=p,s.prototype={VERSION:o,viewIndexes:["days","months","years"],init:function(){d||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new t.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new t.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new t.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),t(e).on("resize.adp",this._onResize.bind(this)),t("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){"string"==typeof e?(this.loc=t.fn.datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru)),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,t.fn.datepicker.language[e])):this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var i=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(i("aa"))||this.loc.timeFormat.match(i("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){d=!0,n.append('<div class="datepickers-container" id="datepickers-container"></div>'),r=t("#datepickers-container")},_buildBaseHtml:function(){var e,i=t('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?i.insertAfter(this.$el):r:i.appendTo(this.$el),this.$datepicker=t(c).appendTo(e),this.$content=t(".datepicker--content",this.$datepicker),this.$nav=t(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var e,t=this.selectedDates,i=s.getParsedDate(t[0]),n=this,r=new Date(i.year,i.month,i.date,i.hours,i.minutes);e=t.map(function(e){return n.formatDate(n.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(r=t.map(function(e){var t=s.getParsedDate(e);return new Date(t.year,t.month,t.date,t.hours,t.minutes)})),this._prevOnSelectValue=e,this.opts.onSelect(e,r,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i,n=e,r=this._getWordBoundaryRegExp,o=this.loc,a=s.getLeadingZeroNum,l=s.getDecade(t),d=s.getParsedDate(t),c=d.fullHours,u=d.hours,h=e.match(r("aa"))||e.match(r("AA")),p="am";switch(this.opts.timepicker&&this.timepicker&&h&&(i=this.timepicker._getValidHoursFromDate(t,h),c=a(i.hours),u=i.hours,p=i.dayPeriod),!0){case/@/.test(n):n=n.replace(/@/,t.getTime());case/aa/.test(n):n=n.replace(r("aa"),p);case/AA/.test(n):n=n.replace(r("AA"),p.toUpperCase());case/dd/.test(n):n=n.replace(r("dd"),d.fullDate);case/d/.test(n):n=n.replace(r("d"),d.date);case/DD/.test(n):n=n.replace(r("DD"),o.days[d.day]);case/D/.test(n):n=n.replace(r("D"),o.daysShort[d.day]);case/mm/.test(n):n=n.replace(r("mm"),d.fullMonth);case/m/.test(n):n=n.replace(r("m"),d.month+1);case/MM/.test(n):n=n.replace(r("MM"),this.loc.months[d.month]);case/M/.test(n):n=n.replace(r("M"),o.monthsShort[d.month]);case/ii/.test(n):n=n.replace(r("ii"),d.fullMinutes);case/i/.test(n):n=n.replace(r("i"),d.minutes);case/hh/.test(n):n=n.replace(r("hh"),c);case/h/.test(n):n=n.replace(r("h"),u);case/yyyy/.test(n):n=n.replace(r("yyyy"),d.year);case/yyyy1/.test(n):n=n.replace(r("yyyy1"),l[0]);case/yyyy2/.test(n):n=n.replace(r("yyyy2"),l[1]);case/yy/.test(n):n=n.replace(r("yy"),d.year.toString().slice(-2))}return n},_getWordBoundaryRegExp:function(e){return new RegExp("\\b(?=[a-zA-Z0-9áäöüúÁßÉÄÖÜÚ<])"+e+"(?![>a-zA-Z0-9áäöüÁßÉÄÖÜÚ])")},selectDate:function(e){var t=this,i=t.opts,n=t.parsedDate,r=t.selectedDates,o=r.length,a="";if(Array.isArray(e))return void e.forEach(function(e){t.selectDate(e)});if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==t.view&&e.getMonth()!=n.month&&i.moveToOtherMonthsOnSelect&&(a=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=n.year&&i.moveToOtherYearsOnSelect&&(a=new Date(e.getFullYear(),0,1)),a&&(t.silent=!0,t.date=a,t.silent=!1,t.nav._render()),i.multipleDates&&!i.range){if(o===i.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else i.range?2==o?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==o?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,s.bigger(t.maxRange,t.minRange)&&(t.maxRange=t.minRange,t.minRange=e),t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),i.onSelect&&t._triggerOnChange(),i.autoClose&&!this.timepickerIsActive&&(i.multipleDates||i.range?i.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(e){var t=this.selectedDates,i=this;if(e instanceof Date)return t.some(function(n,r){return s.isSame(n,e)?(t.splice(r,1),i.selectedDates.length?i.lastSelectedDate=i.selectedDates[i.selectedDates.length-1]:(i.minRange="",i.maxRange="",i.lastSelectedDate=""),i.views[i.currentView]._render(),i._setInputValue(),i.opts.onSelect&&i._triggerOnChange(),!0):void 0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,i){var n=arguments.length,r=this.lastSelectedDate;return 2==n?this.opts[e]=i:1==n&&"object"==typeof e&&(this.opts=t.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(r&&this.timepicker._handleDate(r),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),r&&(r.setHours(this.timepicker.hours),r.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(e,t){var i=!1;return this.selectedDates.some(function(n){return s.isSame(n,e,t)?(i=n,!0):void 0}),i},_setInputValue:function(){var e,t=this,i=t.opts,n=t.loc.dateFormat,r=i.altFieldDateFormat,s=t.selectedDates.map(function(e){return t.formatDate(n,e)});i.altField&&t.$altField.length&&(e=this.selectedDates.map(function(e){return t.formatDate(r,e)}),e=e.join(this.opts.multipleDatesSeparator),this.$altField.val(e)),s=s.join(this.opts.multipleDatesSeparator),this.$el.val(s)},_isInRange:function(e,t){var i=e.getTime(),n=s.getParsedDate(e),r=s.getParsedDate(this.minDate),o=s.getParsedDate(this.maxDate),a=new Date(n.year,n.month,r.date).getTime(),l=new Date(n.year,n.month,o.date).getTime(),d={day:i>=this.minTime&&i<=this.maxTime,month:a>=this.minTime&&l<=this.maxTime,year:n.year>=r.year&&n.year<=o.year};return t?d[t]:d.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,n=e.data("year")||t.year,r=e.data("month")==i?t.month:e.data("month"),s=e.data("date")||1;return new Date(n,r,s)},_setPositionClasses:function(e){e=e.split(" ");var t=e[0],i=e[1],n="datepicker -"+t+"-"+i+"- -from-"+t+"-";this.visible&&(n+=" active"),this.$datepicker.removeAttr("class").addClass(n)},setPosition:function(e){e=e||this.opts.position;var t,i,n=this._getDimensions(this.$el),r=this._getDimensions(this.$datepicker),s=e.split(" "),o=this.opts.offset,a=s[0],l=s[1];switch(a){case"top":t=n.top-r.height-o;break;case"right":i=n.left+n.width+o;break;case"bottom":t=n.top+n.height+o;break;case"left":i=n.left-r.width-o}switch(l){case"top":t=n.top;break;case"right":i=n.left+n.width-r.width;break;case"bottom":t=n.top+n.height-r.height;break;case"left":i=n.left;break;case"center":/left|right/.test(a)?t=n.top+n.height/2-r.height/2:i=n.left+n.width/2-r.width/2}this.$datepicker.css({left:i,top:t})},show:function(){var e=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,e&&this._bindVisionEvents(e)},hide:function(){var e=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),e&&this._bindVisionEvents(e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;var i="up"==t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),0>i&&(i=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[i]},_handleHotKey:function(e){var t,i,n,r=s.getParsedDate(this._getFocusedDate()),o=this.opts,a=!1,l=!1,d=!1,c=r.year,u=r.month,h=r.date;switch(e){case"ctrlRight":case"ctrlUp":u+=1,a=!0;break;case"ctrlLeft":case"ctrlDown":u-=1,a=!0;break;case"shiftRight":case"shiftUp":l=!0,c+=1;break;case"shiftLeft":case"shiftDown":l=!0,c-=1;break;case"altRight":case"altUp":d=!0,c+=10;break;case"altLeft":case"altDown":d=!0,c-=10;break;case"ctrlShiftUp":this.up()}n=s.getDaysCount(new Date(c,u)),i=new Date(c,u,h),h>n&&(h=n),i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i,t=s.getParsedDate(i),a&&o.onChangeMonth&&o.onChangeMonth(t.month,t.year),l&&o.onChangeYear&&o.onChangeYear(t.year),d&&o.onChangeDecade&&o.onChangeDecade(this.curDecade)},_registerKey:function(e){var t=this.keys.some(function(t){return t==e});t||this.keys.push(e)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,i=this,n=this.keys.sort();for(var r in h)e=h[r],n.length==e.length&&e.every(function(e,t){return e==n[t]})&&(i._trigger("hotKey",r),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=s.getParsedDate(this._getFocusedDate()),n=i.year,r=i.month,o=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t?o-=1:"","month"==t?r-=1:"","year"==t?n-=1:"";break;case 38:"day"==t?o-=7:"","month"==t?r-=3:"","year"==t?n-=4:"";break;case 39:"day"==t?o+=1:"","month"==t?r+=1:"","year"==t?n+=1:"";break;case 40:"day"==t?o+=7:"","month"==t?r+=3:"","year"==t?n+=4:""}var a=new Date(n,r,o);a.getTime()<this.minTime?a=this.minDate:a.getTime()>this.maxTime&&(a=this.maxDate),this.focused=a}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,i){i=i||this.cellType;var n,r=s.getParsedDate(e),o='.datepicker--cell[data-year="'+r.year+'"]';switch(i){case"month":o='[data-month="'+r.month+'"]';break;case"day":o+='[data-month="'+r.month+'"][data-date="'+r.date+'"]'}return n=this.views[this.currentView].$el.find(o),n.length?n:t("")},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_handleAlreadySelectedDates:function(e,t){this.opts.range?this.opts.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.opts.toggleSelected&&this.removeDate(t),this.opts.toggleSelected||(this.lastSelectedDate=e,this.opts.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){var t=this.$el.val();t||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),t>=37&&40>=t&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var i=this._isSelected(this.focused,this.cellType);if(!i)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(i,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var i=t(e.target).closest(".datepicker--cell"),n=this._getDateFromCell(i);this.silent=!0,this.focused&&(this.focused=""),i.addClass("-focus-"),this.focused=n,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",s.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){var i=t(e.target).closest(".datepicker--cell");i.removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,t,i){var n=new Date,r=this.selectedDates,s=!1;r.length&&(s=!0,n=this.lastSelectedDate),n.setHours(t),n.setMinutes(i),s||this._getCell(n).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(n)},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",s.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return s.getParsedDate(this.date)},set date(e){return e instanceof Date?(this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e):void 0},get date(){return this.currentDate},set view(e){return this.viewIndex=this.viewIndexes.indexOf(e),this.viewIndex<0?void 0:(this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new t.fn.datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e)},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=s.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=s.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return s.getDecade(this.date)}},s.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},s.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},s.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},s.template=function(e,t){return e.replace(/#\{([\w]+)\}/g,function(e,i){return t[i]||0===t[i]?t[i]:void 0})},s.isSame=function(e,t,i){if(!e||!t)return!1;var n=s.getParsedDate(e),r=s.getParsedDate(t),o=i?i:"day",a={day:n.date==r.date&&n.month==r.month&&n.year==r.year,month:n.month==r.month&&n.year==r.year,year:n.year==r.year};return a[o]},s.less=function(e,t,i){return e&&t?t.getTime()<e.getTime():!1},s.bigger=function(e,t,i){return e&&t?t.getTime()>e.getTime():!1},s.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},s.resetTime=function(e){return"object"==typeof e?(e=s.getParsedDate(e),new Date(e.year,e.month,e.date)):void 0},t.fn.datepicker=function(e){return this.each(function(){if(t.data(this,a)){var i=t.data(this,a);i.opts=t.extend(!0,i.opts,e),i.update()}else t.data(this,a,new p(this,e))})},t.fn.datepicker.Constructor=p,t.fn.datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},t(function(){t(l).datepicker()})}(),function(){var e={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},n=t.fn.datepicker,r=n.Constructor;n.Body=function(e,i,n){this.d=e,this.type=i,this.opts=n,this.$el=t(""),this.opts.onlyTimepicker||this.init()},n.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",t.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=t(e[this.type]).appendTo(this.d.$content),this.$names=t(".datepicker--days-names",this.$el),this.$cells=t(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,n,r){return t=t!=i?t:e,n=n?n:"",r=r!=i?r:0,r>7?n:7==t?this._getDayNamesHtml(e,0,n,++r):(n+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,n,++r))},_getCellContents:function(e,t){var i="datepicker--cell datepicker--cell-"+t,n=new Date,s=this.d,o=r.resetTime(s.minRange),a=r.resetTime(s.maxRange),l=s.opts,d=r.getParsedDate(e),c={},u=d.date;switch(t){case"day":s.isWeekend(d.day)&&(i+=" -weekend-"),d.month!=this.d.parsedDate.month&&(i+=" -other-month-",l.selectOtherMonths||(i+=" -disabled-"),l.showOtherMonths||(u=""));break;case"month":u=s.loc[s.opts.monthsField][d.month];break;case"year":var h=s.curDecade;u=d.year,(d.year<h[0]||d.year>h[1])&&(i+=" -other-decade-",l.selectOtherYears||(i+=" -disabled-"),l.showOtherYears||(u=""))}return l.onRenderCell&&(c=l.onRenderCell(e,t)||{},u=c.html?c.html:u,i+=c.classes?" "+c.classes:""),l.range&&(r.isSame(o,e,t)&&(i+=" -range-from-"),r.isSame(a,e,t)&&(i+=" -range-to-"),1==s.selectedDates.length&&s.focused?((r.bigger(o,e)&&r.less(s.focused,e)||r.less(a,e)&&r.bigger(s.focused,e))&&(i+=" -in-range-"),r.less(a,e)&&r.isSame(s.focused,e)&&(i+=" -range-from-"),r.bigger(o,e)&&r.isSame(s.focused,e)&&(i+=" -range-to-")):2==s.selectedDates.length&&r.bigger(o,e)&&r.less(a,e)&&(i+=" -in-range-")),r.isSame(n,e,t)&&(i+=" -current-"),s.focused&&r.isSame(e,s.focused,t)&&(i+=" -focus-"),s._isSelected(e,t)&&(i+=" -selected-"),(!s._isInRange(e,t)||c.disabled)&&(i+=" -disabled-"),{html:u,classes:i}},_getDaysHtml:function(e){var t=r.getDaysCount(e),i=new Date(e.getFullYear(),e.getMonth(),1).getDay(),n=new Date(e.getFullYear(),e.getMonth(),t).getDay(),s=i-this.d.loc.firstDay,o=6-n+this.d.loc.firstDay;s=0>s?s+7:s,o=o>6?o-7:o;for(var a,l,d=-s+1,c="",u=d,h=t+o;h>=u;u++)l=e.getFullYear(),a=e.getMonth(),c+=this._getDayHtml(new Date(l,a,u));return c},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",i=r.getParsedDate(e),n=0;12>n;)t+=this._getMonthHtml(new Date(i.year,n)),n++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){var t=(r.getParsedDate(e),r.getDecade(e)),i=t[0]-1,n="",s=i;for(s;s<=t[1]+1;s++)n+=this._getYearHtml(new Date(s,0));return n},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var e,i,n,r=t(".datepicker--cell",this.$cells),s=this;r.each(function(r,o){i=t(this),n=s.d._getDateFromCell(t(this)),e=s._getCellContents(n,s.d.cellType),i.attr("class",e.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,n=e.data("year")||this.d.parsedDate.year,r=this.d;if(r.view!=this.opts.minView)return void r.down(new Date(n,i,t));var s=new Date(n,i,t),o=this.d._isSelected(s,this.d.cellType);return o?void r._handleAlreadySelectedDates.bind(r,o,s)():void r._trigger("clickCell",s)},_onClickCell:function(e){var i=t(e.target).closest(".datepicker--cell");i.hasClass("-disabled-")||this._handleClick.bind(this)(i)}}}(),function(){var e='<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',i='<div class="datepicker--buttons"></div>',n='<span class="datepicker--button" data-action="#{action}">#{label}</span>',r=t.fn.datepicker,s=r.Constructor;r.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},r.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",t.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",t.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",t.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var i=this._getTitle(this.d.currentDate),n=s.template(e,t.extend({title:i},this.opts));this.d.$nav.html(n),"years"==this.d.view&&t(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var i={action:e,label:this.d.loc[e]},r=s.template(n,i);t("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(r)},_addButtonsContainer:function(){this.d.$datepicker.append(i),this.$buttonsContainer=t(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,i=e.year,n=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(i,t-1,n),"month")||this._disableNav("prev"),this.d._isInRange(new Date(i,t+1,n),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(i-1,t,n),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+1,t,n),"year")||this._disableNav("next");break;case"years":this.d._isInRange(new Date(i-10,t,n),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+10,t,n),"year")||this._disableNav("next")}}},_disableNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var i=t(e.target).closest("[data-action]"),n=i.data("action");this.d[n]()},_onClickNavTitle:function(e){return t(e.target).hasClass("-disabled-")?void 0:"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),function(){var e='<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',i=t.fn.datepicker,n=i.Constructor;i.Timepicker=function(e,t){this.d=e,this.opts=t,this.init()},i.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=n.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var e=23,t=59,i=this.opts;this.minHours=i.minHours<0||i.minHours>e?0:i.minHours,this.minMinutes=i.minMinutes<0||i.minMinutes>t?0:i.minMinutes,this.maxHours=i.maxHours<0||i.maxHours>e?e:i.maxHours,this.maxMinutes=i.maxMinutes<0||i.maxMinutes>t?t:i.maxMinutes;
},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var i=n.getLeadingZeroNum,r={hourMin:this.minHours,hourMax:i(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:i(this.displayHours),minMin:this.minMinutes,minMax:i(this.maxMinutes),minStep:this.opts.minutesStep,minValue:i(this.minutes)},s=n.template(e,r);this.$timepicker=t(s).appendTo(this.d.$datepicker),this.$ranges=t('[type="range"]',this.$timepicker),this.$hours=t('[name="hours"]',this.$timepicker),this.$minutes=t('[name="minutes"]',this.$timepicker),this.$hoursText=t(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=t(".datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=t('<span class="datepicker--time-current-ampm">').appendTo(t(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=n.getLeadingZeroNum(this.displayHours),t=n.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(n.isSame(e,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):n.isSame(e,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var i=e,r=e;e instanceof Date&&(i=n.getParsedDate(e),r=i.hours);var s=t||this.d.ampm,o="am";if(s)switch(!0){case 0==r:r=12;break;case 12==r:o="pm";break;case r>11:r-=12,o="pm"}return{hours:r,dayPeriod:o}},set hours(e){this._hours=e;var t=this._getValidHoursFromDate(e);this.displayHours=t.hours,this.dayPeriod=t.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var i=t(e.target),n=i.attr("name");this.d.timepickerIsActive=!0,this[n]=i.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){var i=t(e.target).attr("name");t(".datepicker--time-current-"+i,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var i=t(e.target).attr("name");this.d.inFocus||t(".datepicker--time-current-"+i,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}()}(window,jQuery),function(e){e.fn.datepicker.language.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"mm/dd/yyyy",timeFormat:"hh:ii aa",firstDay:0}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e){if(void 0===Function.prototype.name){var t=/function\s([^(]{1,})\(/,i=t.exec(e.toString());return i&&i.length>1?i[1].trim():""}return void 0===e.prototype?e.constructor.name:e.prototype.constructor.name}function i(e){return/true/.test(e)?!0:/false/.test(e)?!1:isNaN(1*e)?e:parseFloat(e)}function n(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var r="6.2.2",s={version:r,_plugins:{},_uuids:[],rtl:function(){return"rtl"===e("html").attr("dir")},plugin:function(e,i){var r=i||t(e),s=n(r);this._plugins[s]=this[r]=e},registerPlugin:function(e,i){var r=i?n(i):t(e.constructor).toLowerCase();e.uuid=this.GetYoDigits(6,r),e.$element.attr("data-"+r)||e.$element.attr("data-"+r,e.uuid),e.$element.data("zfPlugin")||e.$element.data("zfPlugin",e),e.$element.trigger("init.zf."+r),this._uuids.push(e.uuid)},unregisterPlugin:function(e){var i=n(t(e.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(e.uuid),1),e.$element.removeAttr("data-"+i).removeData("zfPlugin").trigger("destroyed.zf."+i);for(var r in e)e[r]=null},reInit:function(t){var i=t instanceof e;try{if(i)t.each(function(){e(this).data("zfPlugin")._init()});else{var r="undefined"==typeof t?"undefined":_typeof(t),s=this,o={object:function(t){t.forEach(function(t){t=n(t),e("[data-"+t+"]").foundation("_init")})},string:function(){t=n(t),e("[data-"+t+"]").foundation("_init")},undefined:function(){this.object(Object.keys(s._plugins))}};o[r](t)}}catch(a){console.error(a)}finally{return t}},GetYoDigits:function(e,t){return e=e||6,Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)+(t?"-"+t:"")},reflow:function(t,n){"undefined"==typeof n?n=Object.keys(this._plugins):"string"==typeof n&&(n=[n]);var r=this;e.each(n,function(n,s){var o=r._plugins[s],a=e(t).find("[data-"+s+"]").addBack("[data-"+s+"]");a.each(function(){var t=e(this),n={};if(t.data("zfPlugin"))return void console.warn("Tried to initialize "+s+" on an element that already has a Foundation plugin.");if(t.attr("data-options")){t.attr("data-options").split(";").forEach(function(e,t){var r=e.split(":").map(function(e){return e.trim()});r[0]&&(n[r[0]]=i(r[1]))})}try{t.data("zfPlugin",new o(e(this),n))}catch(r){console.error(r)}finally{return}})})},getFnName:t,transitionend:function(e){var t,i={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},n=document.createElement("div");for(var r in i)"undefined"!=typeof n.style[r]&&(t=i[r]);return t?t:(t=setTimeout(function(){e.triggerHandler("transitionend",[e])},1),"transitionend")}};s.util={throttle:function(e,t){var i=null;return function(){var n=this,r=arguments;null===i&&(i=setTimeout(function(){e.apply(n,r),i=null},t))}}};var o=function(i){var n="undefined"==typeof i?"undefined":_typeof(i),r=e("meta.foundation-mq"),o=e(".no-js");if(r.length||e('<meta class="foundation-mq">').appendTo(document.head),o.length&&o.removeClass("no-js"),"undefined"===n)s.MediaQuery._init(),s.reflow(this);else{if("string"!==n)throw new TypeError("We're sorry, "+n+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var a=Array.prototype.slice.call(arguments,1),l=this.data("zfPlugin");if(void 0===l||void 0===l[i])throw new ReferenceError("We're sorry, '"+i+"' is not an available method for "+(l?t(l):"this element")+".");1===this.length?l[i].apply(l,a):this.each(function(t,n){l[i].apply(e(n).data("zfPlugin"),a)})}return this};window.Foundation=s,e.fn.foundation=o,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var i=e[t];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var t=Date.now(),i=Math.max(n+16,t);return setTimeout(function(){e(n=i)},i-t)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),r.prototype=new n,r})}(jQuery),!function(e){function t(e,t,n,r){var s,o,a,l,d=i(e);if(t){var c=i(t);o=d.offset.top+d.height<=c.height+c.offset.top,s=d.offset.top>=c.offset.top,a=d.offset.left>=c.offset.left,l=d.offset.left+d.width<=c.width+c.offset.left}else o=d.offset.top+d.height<=d.windowDims.height+d.windowDims.offset.top,s=d.offset.top>=d.windowDims.offset.top,a=d.offset.left>=d.windowDims.offset.left,l=d.offset.left+d.width<=d.windowDims.width;var u=[o,s,a,l];return n?a===l==!0:r?s===o==!0:-1===u.indexOf(!1)}function i(e,t){if(e=e.length?e[0]:e,e===window||e===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var i=e.getBoundingClientRect(),n=e.parentNode.getBoundingClientRect(),r=document.body.getBoundingClientRect(),s=window.pageYOffset,o=window.pageXOffset;return{width:i.width,height:i.height,offset:{top:i.top+s,left:i.left+o},parentDims:{width:n.width,height:n.height,offset:{top:n.top+s,left:n.left+o}},windowDims:{width:r.width,height:r.height,offset:{top:s,left:o}}}}function n(e,t,n,r,s,o){var a=i(e),l=t?i(t):null;switch(n){case"top":return{left:Foundation.rtl()?l.offset.left-a.width+l.width:l.offset.left,top:l.offset.top-(a.height+r)};case"left":return{left:l.offset.left-(a.width+s),top:l.offset.top};case"right":return{left:l.offset.left+l.width+s,top:l.offset.top};case"center top":return{left:l.offset.left+l.width/2-a.width/2,top:l.offset.top-(a.height+r)};case"center bottom":return{left:o?s:l.offset.left+l.width/2-a.width/2,top:l.offset.top+l.height+r};case"center left":return{left:l.offset.left-(a.width+s),top:l.offset.top+l.height/2-a.height/2};case"center right":return{left:l.offset.left+l.width+s+1,top:l.offset.top+l.height/2-a.height/2};case"center":return{left:a.windowDims.offset.left+a.windowDims.width/2-a.width/2,top:a.windowDims.offset.top+a.windowDims.height/2-a.height/2};case"reveal":return{left:(a.windowDims.width-a.width)/2,top:a.windowDims.offset.top+r};case"reveal full":return{left:a.windowDims.offset.left,top:a.windowDims.offset.top};case"left bottom":return{left:l.offset.left-(a.width+s),top:l.offset.top+l.height};case"right bottom":return{left:l.offset.left+l.width+s-a.width,top:l.offset.top+l.height};default:return{left:Foundation.rtl()?l.offset.left-a.width+l.width:l.offset.left,top:l.offset.top+l.height+r}}}Foundation.Box={ImNotTouchingYou:t,GetDimensions:i,GetOffsets:n}}(jQuery),!function(e){function t(e){var t={};for(var i in e)t[e[i]]=e[i];return t}var i={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},n={},r={keys:t(i),parseKey:function(e){var t=i[e.which||e.keyCode]||String.fromCharCode(e.which).toUpperCase();return e.shiftKey&&(t="SHIFT_"+t),e.ctrlKey&&(t="CTRL_"+t),e.altKey&&(t="ALT_"+t),t},handleKey:function(t,i,r){var s,o,a,l=n[i],d=this.parseKey(t);if(!l)return console.warn("Component not defined!");if(s="undefined"==typeof l.ltr?l:Foundation.rtl()?e.extend({},l.ltr,l.rtl):e.extend({},l.rtl,l.ltr),o=s[d],a=r[o],a&&"function"==typeof a){var c=a.apply();(r.handled||"function"==typeof r.handled)&&r.handled(c)}else(r.unhandled||"function"==typeof r.unhandled)&&r.unhandled()},findFocusable:function(t){return t.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return!e(this).is(":visible")||e(this).attr("tabindex")<0?!1:!0})},register:function(e,t){n[e]=t}};Foundation.Keyboard=r}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e){var t={};return"string"!=typeof e?t:(e=e.trim().slice(1,-1))?t=e.split("&").reduce(function(e,t){var i=t.replace(/\+/g," ").split("="),n=i[0],r=i[1];return n=decodeURIComponent(n),r=void 0===r?null:decodeURIComponent(r),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]:e[n]=r,e},{}):t}var i={queries:[],current:"",_init:function(){var i,n=this,r=e(".foundation-mq").css("font-family");i=t(r);for(var s in i)i.hasOwnProperty(s)&&n.queries.push({name:s,value:"only screen and (min-width: "+i[s]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(e){var t=this.get(e);return t?window.matchMedia(t).matches:!1},get:function(e){for(var t in this.queries)if(this.queries.hasOwnProperty(t)){var i=this.queries[t];if(e===i.name)return i.value}return null},_getCurrentSize:function(){for(var e,t=0;t<this.queries.length;t++){var i=this.queries[t];window.matchMedia(i.value).matches&&(e=i)}return"object"===("undefined"==typeof e?"undefined":_typeof(e))?e.name:e},_watcher:function(){var t=this;e(window).on("resize.zf.mediaquery",function(){var i=t._getCurrentSize(),n=t.current;i!==n&&(t.current=i,e(window).trigger("changed.zf.mediaquery",[i,n]))})}};Foundation.MediaQuery=i,window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),i=document.getElementsByTagName("script")[0],n=null;t.type="text/css",t.id="matchmediajs-test",i.parentNode.insertBefore(t,i),n="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var i="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=i:t.textContent=i,"1px"===n.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),Foundation.MediaQuery=i}(jQuery),!function(e){function t(e,t,i){function n(a){o||(o=window.performance.now()),s=a-o,i.apply(t),e>s?r=window.requestAnimationFrame(n,t):(window.cancelAnimationFrame(r),t.trigger("finished.zf.animate",[t]).triggerHandler("finished.zf.animate",[t]))}var r,s,o=null;r=window.requestAnimationFrame(n)}function i(t,i,s,o){function a(){t||i.hide(),l(),o&&o.apply(i)}function l(){i[0].style.transitionDuration=0,i.removeClass(d+" "+c+" "+s)}if(i=e(i).eq(0),i.length){var d=t?n[0]:n[1],c=t?r[0]:r[1];l(),i.addClass(s).css("transition","none"),requestAnimationFrame(function(){i.addClass(d),t&&i.show()}),requestAnimationFrame(function(){i[0].offsetWidth,i.css("transition","").addClass(c)}),i.one(Foundation.transitionend(i),a)}}var n=["mui-enter","mui-leave"],r=["mui-enter-active","mui-leave-active"],s={animateIn:function(e,t,n){i(!0,e,t,n)},animateOut:function(e,t,n){i(!1,e,t,n)}};Foundation.Move=t,Foundation.Motion=s}(jQuery),!function(e){var t={Feather:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zf";t.attr("role","menubar");var n=t.find("li").attr({role:"menuitem"}),r="is-"+i+"-submenu",s=r+"-item",o="is-"+i+"-submenu-parent";t.find("a:first").attr("tabindex",0),n.each(function(){var t=e(this),i=t.children("ul");i.length&&(t.addClass(o).attr({"aria-haspopup":!0,"aria-expanded":!1,"aria-label":t.children("a:first").text()}),i.addClass("submenu "+r).attr({"data-submenu":"","aria-hidden":!0,role:"menu"})),t.parent("[data-submenu]").length&&t.addClass("is-submenu-item "+s)})},Burn:function(e,t){var i=(e.find("li").removeAttr("tabindex"),"is-"+t+"-submenu"),n=i+"-item",r="is-"+t+"-submenu-parent";e.find("*").removeClass(i+" "+n+" "+r+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=t}(jQuery),!function(e){function t(e,t,i){var n,r,s=this,o=t.duration,a=Object.keys(e.data())[0]||"timer",l=-1;this.isPaused=!1,this.restart=function(){l=-1,clearTimeout(r),this.start()},this.start=function(){this.isPaused=!1,clearTimeout(r),l=0>=l?o:l,e.data("paused",!1),n=Date.now(),r=setTimeout(function(){t.infinite&&s.restart(),i()},l),e.trigger("timerstart.zf."+a)},this.pause=function(){this.isPaused=!0,clearTimeout(r),e.data("paused",!0);var t=Date.now();l-=t-n,e.trigger("timerpaused.zf."+a)}}function i(t,i){function n(){r--,0===r&&i()}var r=t.length;0===r&&i(),t.each(function(){this.complete?n():"undefined"!=typeof this.naturalWidth&&this.naturalWidth>0?n():e(this).one("load",function(){n()})})}Foundation.Timer=t,Foundation.onImagesLoaded=i}(jQuery),function(e){function t(){this.removeEventListener("touchmove",i),this.removeEventListener("touchend",t),d=!1}function i(i){if(e.spotSwipe.preventDefault&&i.preventDefault(),d){var n,r=i.touches[0].pageX,o=(i.touches[0].pageY,s-r);l=(new Date).getTime()-a,Math.abs(o)>=e.spotSwipe.moveThreshold&&l<=e.spotSwipe.timeThreshold&&(n=o>0?"left":"right"),n&&(i.preventDefault(),t.call(this),e(this).trigger("swipe",n).trigger("swipe"+n))}}function n(e){1==e.touches.length&&(s=e.touches[0].pageX,o=e.touches[0].pageY,d=!0,a=(new Date).getTime(),this.addEventListener("touchmove",i,!1),this.addEventListener("touchend",t,!1))}function r(){this.addEventListener&&this.addEventListener("touchstart",n,!1)}e.spotSwipe={version:"1.0.0",enabled:"ontouchstart"in document.documentElement,preventDefault:!1,moveThreshold:75,timeThreshold:200};var s,o,a,l,d=!1;e.event.special.swipe={setup:r},e.each(["left","up","down","right"],function(){e.event.special["swipe"+this]={setup:function(){e(this).on("swipe",e.noop)}}})}(jQuery),!function(e){e.fn.addTouch=function(){this.each(function(i,n){e(n).bind("touchstart touchmove touchend touchcancel",function(){t(event)})});var t=function(e){var t,i=e.changedTouches,n=i[0],r={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},s=r[e.type];"MouseEvent"in window&&"function"==typeof window.MouseEvent?t=new window.MouseEvent(s,{bubbles:!0,cancelable:!0,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY}):(t=document.createEvent("MouseEvent"),t.initMouseEvent(s,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null)),n.target.dispatchEvent(t)}}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(){s(),n(),r(),i()}function i(t){var i=e("[data-yeti-box]"),n=["dropdown","tooltip","reveal"];if(t&&("string"==typeof t?n.push(t):"object"===("undefined"==typeof t?"undefined":_typeof(t))&&"string"==typeof t[0]?n.concat(t):console.error("Plugin names must be strings")),i.length){var r=n.map(function(e){return"closeme.zf."+e}).join(" ");e(window).off(r).on(r,function(t,i){var n=t.namespace.split(".")[0],r=e("[data-"+n+"]").not('[data-yeti-box="'+i+'"]');r.each(function(){var t=e(this);t.triggerHandler("close.zf.trigger",[t])})})}}function n(t){var i=void 0,n=e("[data-resize]");n.length&&e(window).off("resize.zf.trigger").on("resize.zf.trigger",function(r){i&&clearTimeout(i),i=setTimeout(function(){o||n.each(function(){e(this).triggerHandler("resizeme.zf.trigger")}),n.attr("data-events","resize")},t||10)})}function r(t){var i=void 0,n=e("[data-scroll]");n.length&&e(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(r){i&&clearTimeout(i),i=setTimeout(function(){o||n.each(function(){e(this).triggerHandler("scrollme.zf.trigger")}),n.attr("data-events","scroll")},t||10)})}function s(){if(!o)return!1;var t=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),i=function(t){var i=e(t[0].target);switch(i.attr("data-events")){case"resize":i.triggerHandler("resizeme.zf.trigger",[i]);break;case"scroll":i.triggerHandler("scrollme.zf.trigger",[i,window.pageYOffset]);break;default:return!1}};if(t.length)for(var n=0;n<=t.length-1;n++){var r=new o(i);r.observe(t[n],{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["data-events"]})}}var o=function(){for(var e=["WebKit","Moz","O","Ms",""],t=0;t<e.length;t++)if(e[t]+"MutationObserver"in window)return window[e[t]+"MutationObserver"];return!1}(),a=function(t,i){t.data(i).split(" ").forEach(function(n){e("#"+n)["close"===i?"trigger":"triggerHandler"](i+".zf.trigger",[t])})};e(document).on("click.zf.trigger","[data-open]",function(){a(e(this),"open")}),e(document).on("click.zf.trigger","[data-close]",function(){var t=e(this).data("close");t?a(e(this),"close"):e(this).trigger("close.zf.trigger")}),e(document).on("click.zf.trigger","[data-toggle]",function(){a(e(this),"toggle")}),e(document).on("close.zf.trigger","[data-closable]",function(t){t.stopPropagation();var i=e(this).data("closable");""!==i?Foundation.Motion.animateOut(e(this),i,function(){e(this).trigger("closed.zf")}):e(this).fadeOut().trigger("closed.zf")}),e(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",function(){var t=e(this).data("toggle-focus");e("#"+t).triggerHandler("toggle.zf.trigger",[e(this)])}),e(window).load(function(){t()}),Foundation.IHearYou=t}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Abide")}return _createClass(t,[{key:"_init",value:function(){this.$inputs=this.$element.find("input, textarea, select"),this._events()}},{key:"_events",value:function(){var t=this;this.$element.off(".abide").on("reset.zf.abide",function(){t.resetForm()}).on("submit.zf.abide",function(){return t.validateForm()}),"fieldChange"===this.options.validateOn&&this.$inputs.off("change.zf.abide").on("change.zf.abide",function(i){t.validateInput(e(i.target))}),this.options.liveValidate&&this.$inputs.off("input.zf.abide").on("input.zf.abide",function(i){t.validateInput(e(i.target))})}},{key:"_reflow",value:function(){this._init()}},{key:"requiredCheck",value:function(e){if(!e.attr("required"))return!0;var t=!0;switch(e[0].type){case"checkbox":t=e[0].checked;break;case"select":case"select-one":case"select-multiple":var i=e.find("option:selected");i.length&&i.val()||(t=!1);break;default:e.val()&&e.val().length||(t=!1)}return t}},{key:"findFormError",value:function(e){var t=e.siblings(this.options.formErrorSelector);return t.length||(t=e.parent().find(this.options.formErrorSelector)),t}},{key:"findLabel",value:function(e){var t=e[0].id,i=this.$element.find('label[for="'+t+'"]');return i.length?i:e.closest("label")}},{key:"findRadioLabels",value:function(t){var i=this,n=t.map(function(t,n){var r=n.id,s=i.$element.find('label[for="'+r+'"]');return s.length||(s=e(n).closest("label")),s[0]});return e(n)}},{key:"addErrorClasses",value:function(e){var t=this.findLabel(e),i=this.findFormError(e);t.length&&t.addClass(this.options.labelErrorClass),i.length&&i.addClass(this.options.formErrorClass),e.addClass(this.options.inputErrorClass).attr("data-invalid","")}},{key:"removeRadioErrorClasses",value:function(e){var t=this.$element.find(':radio[name="'+e+'"]'),i=this.findRadioLabels(t),n=this.findFormError(t);i.length&&i.removeClass(this.options.labelErrorClass),n.length&&n.removeClass(this.options.formErrorClass),t.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"removeErrorClasses",value:function(e){if("radio"==e[0].type)return this.removeRadioErrorClasses(e.attr("name"));var t=this.findLabel(e),i=this.findFormError(e);t.length&&t.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"validateInput",value:function(e){var t=this.requiredCheck(e),i=!1,n=!0,r=e.attr("data-validator"),s=!0;if(e.is("[data-abide-ignore]")||e.is('[type="hidden"]'))return!0;switch(e[0].type){case"radio":i=this.validateRadio(e.attr("name"));break;case"checkbox":i=t;break;case"select":case"select-one":case"select-multiple":i=t;break;default:i=this.validateText(e)}r&&(n=this.matchValidation(e,r,e.attr("required"))),e.attr("data-equalto")&&(s=this.options.validators.equalTo(e));var o=-1===[t,i,n,s].indexOf(!1),a=(o?"valid":"invalid")+".zf.abide";return this[o?"removeErrorClasses":"addErrorClasses"](e),e.trigger(a,[e]),o}},{key:"validateForm",value:function(){var t=[],i=this;this.$inputs.each(function(){t.push(i.validateInput(e(this)))});var n=-1===t.indexOf(!1);return this.$element.find("[data-abide-error]").css("display",n?"none":"block"),this.$element.trigger((n?"formvalid":"forminvalid")+".zf.abide",[this.$element]),n}},{key:"validateText",value:function(e,t){t=t||e.attr("pattern")||e.attr("type");var i=e.val(),n=!1;return i.length?n=this.options.patterns.hasOwnProperty(t)?this.options.patterns[t].test(i):t!==e.attr("type")?new RegExp(t).test(i):!0:e.prop("required")||(n=!0),n}},{key:"validateRadio",value:function(t){var i=this.$element.find(':radio[name="'+t+'"]'),n=!1,r=!1;return i.each(function(t,i){e(i).attr("required")&&(r=!0)}),r||(n=!0),n||i.each(function(t,i){e(i).prop("checked")&&(n=!0)}),n}},{key:"matchValidation",value:function(e,t,i){var n=this;i=i?!0:!1;var r=t.split(" ").map(function(t){return n.options.validators[t](e,i,e.parent())});return-1===r.indexOf(!1)}},{key:"resetForm",value:function(){var t=this.$element,i=this.options;e("."+i.labelErrorClass,t).not("small").removeClass(i.labelErrorClass),e("."+i.inputErrorClass,t).not("small").removeClass(i.inputErrorClass),e(i.formErrorSelector+"."+i.formErrorClass).removeClass(i.formErrorClass),t.find("[data-abide-error]").css("display","none"),e(":input",t).not(":button, :submit, :reset, :hidden, :radio, :checkbox, [data-abide-ignore]").val("").removeAttr("data-invalid"),e(":input:radio",t).not("[data-abide-ignore]").prop("checked",!1).removeAttr("data-invalid"),e(":input:checkbox",t).not("[data-abide-ignore]").prop("checked",!1).removeAttr("data-invalid"),t.trigger("formreset.zf.abide",[t])}},{key:"destroy",value:function(){var t=this;this.$element.off(".abide").find("[data-abide-error]").css("display","none"),this.$inputs.off(".abide").each(function(){t.removeErrorClasses(e(this))}),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",liveValidate:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(t,i,n){return e("#"+t.attr("data-equalto")).val()===t.val()}}},Foundation.plugin(t,"Abide")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Accordion"),Foundation.Keyboard.register("Accordion",{ENTER:"toggle",SPACE:"toggle",ARROW_DOWN:"next",ARROW_UP:"previous"})}return _createClass(t,[{key:"_init",value:function(){this.$element.attr("role","tablist"),this.$tabs=this.$element.children("li, [data-accordion-item]"),this.$tabs.each(function(t,i){var n=e(i),r=n.children("[data-tab-content]"),s=r[0].id||Foundation.GetYoDigits(6,"accordion"),o=i.id||s+"-label";n.find("a:first").attr({"aria-controls":s,role:"tab",id:o,"aria-expanded":!1,"aria-selected":!1}),r.attr({role:"tabpanel","aria-labelledby":o,"aria-hidden":!0,id:s})});var t=this.$element.find(".is-active").children("[data-tab-content]");t.length&&this.down(t,!0),this._events()}},{key:"_events",value:function(){var t=this;this.$tabs.each(function(){var i=e(this),n=i.children("[data-tab-content]");n.length&&i.children("a").off("click.zf.accordion keydown.zf.accordion").on("click.zf.accordion",function(e){e.preventDefault(),i.hasClass("is-active")?(t.options.allowAllClosed||i.siblings().hasClass("is-active"))&&t.up(n):t.down(n)}).on("keydown.zf.accordion",function(e){Foundation.Keyboard.handleKey(e,"Accordion",{toggle:function(){t.toggle(n)},next:function(){var e=i.next().find("a").focus();t.options.multiExpand||e.trigger("click.zf.accordion")},previous:function(){var e=i.prev().find("a").focus();t.options.multiExpand||e.trigger("click.zf.accordion")},handled:function(){e.preventDefault(),e.stopPropagation()}})})})}},{key:"toggle",value:function(e){if(e.parent().hasClass("is-active")){if(!this.options.allowAllClosed&&!e.parent().siblings().hasClass("is-active"))return;this.up(e)}else this.down(e)}},{key:"down",value:function(t,i){var n=this;if(!this.options.multiExpand&&!i){var r=this.$element.children(".is-active").children("[data-tab-content]");r.length&&this.up(r)}t.attr("aria-hidden",!1).parent("[data-tab-content]").addBack().parent().addClass("is-active"),t.slideDown(this.options.slideSpeed,function(){n.$element.trigger("down.zf.accordion",[t])}),e("#"+t.attr("aria-labelledby")).attr({"aria-expanded":!0,"aria-selected":!0})}},{key:"up",value:function(t){var i=t.parent().siblings(),n=this,r=this.options.multiExpand?i.hasClass("is-active"):t.parent().hasClass("is-active");(this.options.allowAllClosed||r)&&(t.slideUp(n.options.slideSpeed,function(){n.$element.trigger("up.zf.accordion",[t])}),t.attr("aria-hidden",!0).parent().removeClass("is-active"),e("#"+t.attr("aria-labelledby")).attr({"aria-expanded":!1,"aria-selected":!1}))}},{key:"destroy",value:function(){this.$element.find("[data-tab-content]").stop(!0).slideUp(0).css("display",""),
this.$element.find("a").off(".zf.accordion"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={slideSpeed:250,multiExpand:!1,allowAllClosed:!1},Foundation.plugin(t,"Accordion")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),Foundation.Nest.Feather(this.$element,"accordion"),this._init(),Foundation.registerPlugin(this,"AccordionMenu"),Foundation.Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll",TAB:"down",SHIFT_TAB:"up"})}return _createClass(t,[{key:"_init",value:function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"tablist","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each(function(){var t=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),i=e(this),n=i.children("[data-submenu]"),r=n[0].id||Foundation.GetYoDigits(6,"acc-menu"),s=n.hasClass("is-active");i.attr({"aria-controls":r,"aria-expanded":s,role:"tab",id:t}),n.attr({"aria-labelledby":t,"aria-hidden":!s,role:"tabpanel",id:r})});var t=this.$element.find(".is-active");if(t.length){var i=this;t.each(function(){i.down(e(this))})}this._events()}},{key:"_events",value:function(){var t=this;this.$element.find("li").each(function(){var i=e(this).children("[data-submenu]");i.length&&e(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",function(e){e.preventDefault(),t.toggle(i)})}).on("keydown.zf.accordionmenu",function(i){var n,r,s=e(this),o=s.parent("ul").children("li"),a=s.children("[data-submenu]");o.each(function(t){return e(this).is(s)?(n=o.eq(Math.max(0,t-1)).find("a").first(),r=o.eq(Math.min(t+1,o.length-1)).find("a").first(),e(this).children("[data-submenu]:visible").length&&(r=s.find("li:first-child").find("a").first()),e(this).is(":first-child")?n=s.parents("li").first().find("a").first():n.children("[data-submenu]:visible").length&&(n=n.find("li:last-child").find("a").first()),void(e(this).is(":last-child")&&(r=s.parents("li").first().next("li").find("a").first()))):void 0}),Foundation.Keyboard.handleKey(i,"AccordionMenu",{open:function(){a.is(":hidden")&&(t.down(a),a.find("li").first().find("a").first().focus())},close:function(){a.length&&!a.is(":hidden")?t.up(a):s.parent("[data-submenu]").length&&(t.up(s.parent("[data-submenu]")),s.parents("li").first().find("a").first().focus())},up:function(){return n.attr("tabindex",-1).focus(),!0},down:function(){return r.attr("tabindex",-1).focus(),!0},toggle:function(){s.children("[data-submenu]").length&&t.toggle(s.children("[data-submenu]"))},closeAll:function(){t.hideAll()},handled:function(e){e&&i.preventDefault(),i.stopImmediatePropagation()}})})}},{key:"hideAll",value:function(){this.$element.find("[data-submenu]").slideUp(this.options.slideSpeed)}},{key:"toggle",value:function(e){e.is(":animated")||(e.is(":hidden")?this.down(e):this.up(e))}},{key:"down",value:function(e){var t=this;this.options.multiOpen||this.up(this.$element.find(".is-active").not(e.parentsUntil(this.$element).add(e))),e.addClass("is-active").attr({"aria-hidden":!1}).parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),e.slideDown(t.options.slideSpeed,function(){t.$element.trigger("down.zf.accordionMenu",[e])})}},{key:"up",value:function(e){var t=this;e.slideUp(t.options.slideSpeed,function(){t.$element.trigger("up.zf.accordionMenu",[e])});var i=e.find("[data-submenu]").slideUp(0).addBack().attr("aria-hidden",!0);i.parent(".is-accordion-submenu-parent").attr("aria-expanded",!1)}},{key:"destroy",value:function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),Foundation.Nest.Burn(this.$element,"accordion"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={slideSpeed:250,multiOpen:!0},Foundation.plugin(t,"AccordionMenu")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),Foundation.Nest.Feather(this.$element,"drilldown"),this._init(),Foundation.registerPlugin(this,"Drilldown"),Foundation.Keyboard.register("Drilldown",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close",TAB:"down",SHIFT_TAB:"up"})}return _createClass(t,[{key:"_init",value:function(){this.$submenuAnchors=this.$element.find("li.is-drilldown-submenu-parent").children("a"),this.$submenus=this.$submenuAnchors.parent("li").children("[data-submenu]"),this.$menuItems=this.$element.find("li").not(".js-drilldown-back").attr("role","menuitem").find("a"),this._prepareMenu(),this._keyboardEvents()}},{key:"_prepareMenu",value:function(){var t=this;this.$submenuAnchors.each(function(){var i=e(this),n=i.parent();t.options.parentLink&&i.clone().prependTo(n.children("[data-submenu]")).wrap('<li class="is-submenu-parent-item is-submenu-item is-drilldown-submenu-item" role="menu-item"></li>'),i.data("savedHref",i.attr("href")).removeAttr("href"),i.children("[data-submenu]").attr({"aria-hidden":!0,tabindex:0,role:"menu"}),t._events(i)}),this.$submenus.each(function(){var i=e(this),n=i.find(".js-drilldown-back");n.length||i.prepend(t.options.backButton),t._back(i)}),this.$element.parent().hasClass("is-drilldown")||(this.$wrapper=e(this.options.wrapper).addClass("is-drilldown"),this.$wrapper=this.$element.wrap(this.$wrapper).parent().css(this._getMaxDims()))}},{key:"_events",value:function(t){var i=this;t.off("click.zf.drilldown").on("click.zf.drilldown",function(n){if(e(n.target).parentsUntil("ul","li").hasClass("is-drilldown-submenu-parent")&&(n.stopImmediatePropagation(),n.preventDefault()),i._show(t.parent("li")),i.options.closeOnClick){var r=e("body");r.off(".zf.drilldown").on("click.zf.drilldown",function(t){t.target===i.$element[0]||e.contains(i.$element[0],t.target)||(t.preventDefault(),i._hideAll(),r.off(".zf.drilldown"))})}})}},{key:"_keyboardEvents",value:function(){var t=this;this.$menuItems.add(this.$element.find(".js-drilldown-back > a")).on("keydown.zf.drilldown",function(i){var n,r,s=e(this),o=s.parent("li").parent("ul").children("li").children("a");o.each(function(t){return e(this).is(s)?(n=o.eq(Math.max(0,t-1)),void(r=o.eq(Math.min(t+1,o.length-1)))):void 0}),Foundation.Keyboard.handleKey(i,"Drilldown",{next:function(){return s.is(t.$submenuAnchors)?(t._show(s.parent("li")),s.parent("li").one(Foundation.transitionend(s),function(){s.parent("li").find("ul li a").filter(t.$menuItems).first().focus()}),!0):void 0},previous:function(){return t._hide(s.parent("li").parent("ul")),s.parent("li").parent("ul").one(Foundation.transitionend(s),function(){setTimeout(function(){s.parent("li").parent("ul").parent("li").children("a").first().focus()},1)}),!0},up:function(){return n.focus(),!0},down:function(){return r.focus(),!0},close:function(){t._back()},open:function(){return s.is(t.$menuItems)?s.is(t.$submenuAnchors)&&(t._show(s.parent("li")),s.parent("li").one(Foundation.transitionend(s),function(){s.parent("li").find("ul li a").filter(t.$menuItems).first().focus()})):(t._hide(s.parent("li").parent("ul")),s.parent("li").parent("ul").one(Foundation.transitionend(s),function(){setTimeout(function(){s.parent("li").parent("ul").parent("li").children("a").first().focus()},1)})),!0},handled:function(e){e&&i.preventDefault(),i.stopImmediatePropagation()}})})}},{key:"_hideAll",value:function(){var e=this.$element.find(".is-drilldown-submenu.is-active").addClass("is-closing");e.one(Foundation.transitionend(e),function(t){e.removeClass("is-active is-closing")}),this.$element.trigger("closed.zf.drilldown")}},{key:"_back",value:function(e){var t=this;e.off("click.zf.drilldown"),e.children(".js-drilldown-back").on("click.zf.drilldown",function(i){i.stopImmediatePropagation(),t._hide(e)})}},{key:"_menuLinkEvents",value:function(){var e=this;this.$menuItems.not(".is-drilldown-submenu-parent").off("click.zf.drilldown").on("click.zf.drilldown",function(t){setTimeout(function(){e._hideAll()},0)})}},{key:"_show",value:function(e){e.children("[data-submenu]").addClass("is-active"),this.$element.trigger("open.zf.drilldown",[e])}},{key:"_hide",value:function(e){e.addClass("is-closing").one(Foundation.transitionend(e),function(){e.removeClass("is-active is-closing"),e.blur()}),e.trigger("hide.zf.drilldown",[e])}},{key:"_getMaxDims",value:function(){var t=0,i={};return this.$submenus.add(this.$element).each(function(){var i=e(this).children("li").length;t=i>t?i:t}),i["min-height"]=t*this.$menuItems[0].getBoundingClientRect().height+"px",i["max-width"]=this.$element[0].getBoundingClientRect().width+"px",i}},{key:"destroy",value:function(){this._hideAll(),Foundation.Nest.Burn(this.$element,"drilldown"),this.$element.unwrap().find(".js-drilldown-back, .is-submenu-parent-item").remove().end().find(".is-active, .is-closing, .is-drilldown-submenu").removeClass("is-active is-closing is-drilldown-submenu").end().find("[data-submenu]").removeAttr("aria-hidden tabindex role"),this.$submenuAnchors.each(function(){e(this).off(".zf.drilldown")}),this.$element.find("a").each(function(){var t=e(this);t.data("savedHref")&&t.attr("href",t.data("savedHref")).removeData("savedHref")}),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={backButton:'<li class="js-drilldown-back"><a tabindex="0">Back</a></li>',wrapper:"<div></div>",parentLink:!1,closeOnClick:!1},Foundation.plugin(t,"Drilldown")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Dropdown"),Foundation.Keyboard.register("Dropdown",{ENTER:"open",SPACE:"open",ESCAPE:"close",TAB:"tab_forward",SHIFT_TAB:"tab_backward"})}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("id");this.$anchor=e('[data-toggle="'+t+'"]')||e('[data-open="'+t+'"]'),this.$anchor.attr({"aria-controls":t,"data-is-focus":!1,"data-yeti-box":t,"aria-haspopup":!0,"aria-expanded":!1}),this.options.positionClass=this.getPositionClass(),this.counter=4,this.usedPositions=[],this.$element.attr({"aria-hidden":"true","data-yeti-box":t,"data-resize":t,"aria-labelledby":this.$anchor[0].id||Foundation.GetYoDigits(6,"dd-anchor")}),this._events()}},{key:"getPositionClass",value:function(){var e=this.$element[0].className.match(/(top|left|right|bottom)/g);e=e?e[0]:"";var t=/float-(\S+)\s/.exec(this.$anchor[0].className);t=t?t[1]:"";var i=t?t+" "+e:e;return i}},{key:"_reposition",value:function(e){this.usedPositions.push(e?e:"bottom"),!e&&this.usedPositions.indexOf("top")<0?this.$element.addClass("top"):"top"===e&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(e):"left"===e&&this.usedPositions.indexOf("right")<0?this.$element.removeClass(e).addClass("right"):"right"===e&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(e).addClass("left"):!e&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.$element.addClass("left"):"top"===e&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(e).addClass("left"):"left"===e&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(e):"right"===e&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(e):this.$element.removeClass(e),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){if("false"===this.$anchor.attr("aria-expanded"))return!1;var e=this.getPositionClass(),t=Foundation.Box.GetDimensions(this.$element),i=(Foundation.Box.GetDimensions(this.$anchor),"left"===e?"left":"right"===e?"left":"top"),n="top"===i?"height":"width";"height"===n?this.options.vOffset:this.options.hOffset;if(t.width>=t.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.$element))return this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:t.windowDims.width-2*this.options.hOffset,height:"auto"}),this.classChanged=!0,!1;for(this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,e,this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.$element,!1,!0)&&this.counter;)this._reposition(e),this._setPosition()}},{key:"_events",value:function(){var t=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.options.hover&&(this.$anchor.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.open(),t.$anchor.data("hover",!0)},t.options.hoverDelay)}).on("mouseleave.zf.dropdown",function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.close(),t.$anchor.data("hover",!1)},t.options.hoverDelay)}),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(t.timeout)}).on("mouseleave.zf.dropdown",function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.close(),t.$anchor.data("hover",!1)},t.options.hoverDelay)})),this.$anchor.add(this.$element).on("keydown.zf.dropdown",function(i){var n=e(this),r=Foundation.Keyboard.findFocusable(t.$element);Foundation.Keyboard.handleKey(i,"Dropdown",{tab_forward:function(){t.$element.find(":focus").is(r.eq(-1))&&(t.options.trapFocus?(r.eq(0).focus(),i.preventDefault()):t.close())},tab_backward:function(){(t.$element.find(":focus").is(r.eq(0))||t.$element.is(":focus"))&&(t.options.trapFocus?(r.eq(-1).focus(),i.preventDefault()):t.close())},open:function(){n.is(t.$anchor)&&(t.open(),t.$element.attr("tabindex",-1).focus(),i.preventDefault())},close:function(){t.close(),t.$anchor.focus()}})})}},{key:"_addBodyHandler",value:function(){var t=e(document.body).not(this.$element),i=this;t.off("click.zf.dropdown").on("click.zf.dropdown",function(e){i.$anchor.is(e.target)||i.$anchor.find(e.target).length||i.$element.find(e.target).length||(i.close(),t.off("click.zf.dropdown"))})}},{key:"open",value:function(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchor.addClass("hover").attr({"aria-expanded":!0}),this._setPosition(),this.$element.addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var e=Foundation.Keyboard.findFocusable(this.$element);e.length&&e.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdown",[this.$element])}},{key:"close",value:function(){if(!this.$element.hasClass("is-open"))return!1;if(this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchor.removeClass("hover").attr("aria-expanded",!1),this.classChanged){var e=this.getPositionClass();e&&this.$element.removeClass(e),this.$element.addClass(this.options.positionClass).css({height:"",width:""}),this.classChanged=!1,this.counter=4,this.usedPositions.length=0}this.$element.trigger("hide.zf.dropdown",[this.$element])}},{key:"toggle",value:function(){if(this.$element.hasClass("is-open")){if(this.$anchor.data("hover"))return;this.close()}else this.open()}},{key:"destroy",value:function(){this.$element.off(".zf.trigger").hide(),this.$anchor.off(".zf.dropdown"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={hoverDelay:250,hover:!1,hoverPane:!1,vOffset:1,hOffset:1,positionClass:"",trapFocus:!1,autoFocus:!1,closeOnClick:!1},Foundation.plugin(t,"Dropdown")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),Foundation.Nest.Feather(this.$element,"dropdown"),this._init(),Foundation.registerPlugin(this,"DropdownMenu"),Foundation.Keyboard.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}return _createClass(t,[{key:"_init",value:function(){var e=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('[role="menuitem"]'),this.$tabs=this.$element.children('[role="menuitem"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),this.$element.hasClass(this.options.rightClass)||"right"===this.options.alignment||Foundation.rtl()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",e.addClass("opens-left")):e.addClass("opens-right"),this.changed=!1,this._events()}},{key:"_events",value:function(){var t=this,i="ontouchstart"in window||"undefined"!=typeof window.ontouchstart,n="is-dropdown-submenu-parent",r=function(r){var s=e(r.target).parentsUntil("ul","."+n),o=s.hasClass(n),a="true"===s.attr("data-is-click");s.children(".is-dropdown-submenu");if(o)if(a){if(!t.options.closeOnClick||!t.options.clickOpen&&!i||t.options.forceFollow&&i)return;r.stopImmediatePropagation(),r.preventDefault(),t._hide(s)}else r.preventDefault(),r.stopImmediatePropagation(),t._show(s.children(".is-dropdown-submenu")),s.add(s.parentsUntil(t.$element,"."+n)).attr("data-is-click",!0)};(this.options.clickOpen||i)&&this.$menuItems.on("click.zf.dropdownmenu touchstart.zf.dropdownmenu",r),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownmenu",function(i){var r=e(this),s=r.hasClass(n);s&&(clearTimeout(t.delay),t.delay=setTimeout(function(){t._show(r.children(".is-dropdown-submenu"))},t.options.hoverDelay))}).on("mouseleave.zf.dropdownmenu",function(i){var r=e(this),s=r.hasClass(n);if(s&&t.options.autoclose){if("true"===r.attr("data-is-click")&&t.options.clickOpen)return!1;clearTimeout(t.delay),t.delay=setTimeout(function(){t._hide(r)},t.options.closingTime)}}),this.$menuItems.on("keydown.zf.dropdownmenu",function(i){var n,r,s=e(i.target).parentsUntil("ul",'[role="menuitem"]'),o=t.$tabs.index(s)>-1,a=o?t.$tabs:s.siblings("li").add(s);a.each(function(t){return e(this).is(s)?(n=a.eq(t-1),void(r=a.eq(t+1))):void 0});var l=function(){s.is(":last-child")||(r.children("a:first").focus(),i.preventDefault())},d=function(){n.children("a:first").focus(),i.preventDefault()},c=function(){var e=s.children("ul.is-dropdown-submenu");e.length&&(t._show(e),s.find("li > a:first").focus(),i.preventDefault())},u=function(){var e=s.parent("ul").parent("li");e.children("a:first").focus(),t._hide(e),i.preventDefault()},h={open:c,close:function(){t._hide(t.$element),t.$menuItems.find("a:first").focus(),i.preventDefault()},handled:function(){i.stopImmediatePropagation()}};o?t.$element.hasClass(t.options.verticalClass)?"left"===t.options.alignment?e.extend(h,{down:l,up:d,next:c,previous:u}):e.extend(h,{down:l,up:d,next:u,previous:c}):e.extend(h,{next:l,previous:d,down:c,up:u}):"left"===t.options.alignment?e.extend(h,{next:c,previous:u,down:l,up:d}):e.extend(h,{next:u,previous:c,down:l,up:d}),Foundation.Keyboard.handleKey(i,"DropdownMenu",h)})}},{key:"_addBodyHandler",value:function(){var t=e(document.body),i=this;t.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu").on("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu",function(e){var n=i.$element.find(e.target);n.length||(i._hide(),t.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu"))})}},{key:"_show",value:function(t){var i=this.$tabs.index(this.$tabs.filter(function(i,n){return e(n).find(t).length>0})),n=t.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(n,i),t.css("visibility","hidden").addClass("js-dropdown-active").attr({"aria-hidden":!1}).parent("li.is-dropdown-submenu-parent").addClass("is-active").attr({"aria-expanded":!0});var r=Foundation.Box.ImNotTouchingYou(t,null,!0);if(!r){var s="left"===this.options.alignment?"-right":"-left",o=t.parent(".is-dropdown-submenu-parent");o.removeClass("opens"+s).addClass("opens-"+this.options.alignment),r=Foundation.Box.ImNotTouchingYou(t,null,!0),r||o.removeClass("opens-"+this.options.alignment).addClass("opens-inner"),this.changed=!0}t.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownmenu",[t])}},{key:"_hide",value:function(e,t){var i;i=e&&e.length?e:void 0!==t?this.$tabs.not(function(e,i){return e===t}):this.$element;var n=i.hasClass("is-active")||i.find(".is-active").length>0;if(n){if(i.find("li.is-active").add(i).attr({"aria-expanded":!1,"data-is-click":!1}).removeClass("is-active"),i.find("ul.js-dropdown-active").attr({"aria-hidden":!0}).removeClass("js-dropdown-active"),this.changed||i.find("opens-inner").length){var r="left"===this.options.alignment?"right":"left";i.find("li.is-dropdown-submenu-parent").add(i).removeClass("opens-inner opens-"+this.options.alignment).addClass("opens-"+r),this.changed=!1}this.$element.trigger("hide.zf.dropdownmenu",[i])}}},{key:"destroy",value:function(){this.$menuItems.off(".zf.dropdownmenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),e(document.body).off(".zf.dropdownmenu"),Foundation.Nest.Burn(this.$element,"dropdown"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={disableHover:!1,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"left",closeOnClick:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0},Foundation.plugin(t,"DropdownMenu")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Equalizer")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("data-equalizer")||"",i=this.$element.find('[data-equalizer-watch="'+t+'"]');this.$watched=i.length?i:this.$element.find("[data-equalizer-watch]"),this.$element.attr("data-resize",t||Foundation.GetYoDigits(6,"eq")),this.hasNested=this.$element.find("[data-equalizer]").length>0,this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0,this.isOn=!1,this._bindHandler={onResizeMeBound:this._onResizeMe.bind(this),onPostEqualizedBound:this._onPostEqualized.bind(this)};var n,r=this.$element.find("img");this.options.equalizeOn?(n=this._checkMQ(),e(window).on("changed.zf.mediaquery",this._checkMQ.bind(this))):this._events(),(void 0!==n&&n===!1||void 0===n)&&(r.length?Foundation.onImagesLoaded(r,this._reflow.bind(this)):this._reflow())}},{key:"_pauseEvents",value:function(){this.isOn=!1,this.$element.off({".zf.equalizer":this._bindHandler.onPostEqualizedBound,"resizeme.zf.trigger":this._bindHandler.onResizeMeBound})}},{key:"_onResizeMe",value:function(e){this._reflow()}},{key:"_onPostEqualized",value:function(e){e.target!==this.$element[0]&&this._reflow()}},{key:"_events",value:function(){this._pauseEvents(),this.hasNested?this.$element.on("postequalized.zf.equalizer",this._bindHandler.onPostEqualizedBound):this.$element.on("resizeme.zf.trigger",this._bindHandler.onResizeMeBound),this.isOn=!0}},{key:"_checkMQ",value:function(){var e=!Foundation.MediaQuery.atLeast(this.options.equalizeOn);return e?this.isOn&&(this._pauseEvents(),this.$watched.css("height","auto")):this.isOn||this._events(),e}},{key:"_killswitch",value:function(){}},{key:"_reflow",value:function(){return!this.options.equalizeOnStack&&this._isStacked()?(this.$watched.css("height","auto"),!1):void(this.options.equalizeByRow?this.getHeightsByRow(this.applyHeightByRow.bind(this)):this.getHeights(this.applyHeight.bind(this)))}},{key:"_isStacked",value:function(){return this.$watched[0].getBoundingClientRect().top!==this.$watched[1].getBoundingClientRect().top}},{key:"getHeights",value:function(e){for(var t=[],i=0,n=this.$watched.length;n>i;i++)this.$watched[i].style.height="auto",t.push(this.$watched[i].offsetHeight);e(t)}},{key:"getHeightsByRow",value:function(t){var i=this.$watched.length?this.$watched.first().offset().top:0,n=[],r=0;n[r]=[];for(var s=0,o=this.$watched.length;o>s;s++){this.$watched[s].style.height="auto";var a=e(this.$watched[s]).offset().top;a!=i&&(r++,n[r]=[],i=a),n[r].push([this.$watched[s],this.$watched[s].offsetHeight])}for(var l=0,d=n.length;d>l;l++){var c=e(n[l]).map(function(){return this[1]}).get(),u=Math.max.apply(null,c);n[l].push(u)}t(n)}},{key:"applyHeight",value:function(e){var t=Math.max.apply(null,e);this.$element.trigger("preequalized.zf.equalizer"),this.$watched.css("height",t),this.$element.trigger("postequalized.zf.equalizer")}},{key:"applyHeightByRow",value:function(t){this.$element.trigger("preequalized.zf.equalizer");for(var i=0,n=t.length;n>i;i++){var r=t[i].length,s=t[i][r-1];if(2>=r)e(t[i][0][0]).css({height:"auto"});else{this.$element.trigger("preequalizedrow.zf.equalizer");for(var o=0,a=r-1;a>o;o++)e(t[i][o][0]).css({height:s});this.$element.trigger("postequalizedrow.zf.equalizer")}}this.$element.trigger("postequalized.zf.equalizer")}},{key:"destroy",value:function(){this._pauseEvents(),this.$watched.css("height","auto"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={equalizeOnStack:!0,equalizeByRow:!1,equalizeOn:""},Foundation.plugin(t,"Equalizer")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,n),this.rules=[],this.currentPath="",this._init(),this._events(),Foundation.registerPlugin(this,"Interchange")}return _createClass(t,[{key:"_init",value:function(){this._addBreakpoints(),this._generateRules(),this._reflow()}},{key:"_events",value:function(){e(window).on("resize.zf.interchange",Foundation.util.throttle(this._reflow.bind(this),50))}},{key:"_reflow",value:function(){var e;for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var i=this.rules[t];window.matchMedia(i.query).matches&&(e=i)}e&&this.replace(e.path)}},{key:"_addBreakpoints",value:function(){for(var e in Foundation.MediaQuery.queries)if(Foundation.MediaQuery.queries.hasOwnProperty(e)){var i=Foundation.MediaQuery.queries[e];t.SPECIAL_QUERIES[i.name]=i.value}}},{key:"_generateRules",value:function(e){var i,n=[];i=this.options.rules?this.options.rules:this.$element.data("interchange").match(/\[.*?\]/g);for(var r in i)if(i.hasOwnProperty(r)){var s=i[r].slice(1,-1).split(", "),o=s.slice(0,-1).join(""),a=s[s.length-1];t.SPECIAL_QUERIES[a]&&(a=t.SPECIAL_QUERIES[a]),n.push({path:o,query:a})}this.rules=n}},{key:"replace",value:function(t){if(this.currentPath!==t){var i=this,n="replaced.zf.interchange";"IMG"===this.$element[0].nodeName?this.$element.attr("src",t).load(function(){i.currentPath=t}).trigger(n):t.match(/\.(gif|jpg|jpeg|png|svg|tiff)([?#].*)?/i)?this.$element.css({"background-image":"url("+t+")"}).trigger(n):e.get(t,function(r){i.$element.html(r).trigger(n),e(r).foundation(),i.currentPath=t})}}},{key:"destroy",value:function(){}}]),t}();t.defaults={rules:null},t.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"},Foundation.plugin(t,"Interchange")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Magellan")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element[0].id||Foundation.GetYoDigits(6,"magellan");this.$targets=e("[data-magellan-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":t,"data-scroll":t,id:t}),this.$active=e(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()}},{key:"calcPoints",value:function(){var t=this,i=document.body,n=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,n.clientHeight)),this.docHeight=Math.round(Math.max(i.scrollHeight,i.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)),this.$targets.each(function(){var i=e(this),n=Math.round(i.offset().top-t.options.threshold);i.targetPoint=n,t.points.push(n)})}},{key:"_events",value:function(){var t=this;e("html, body"),{duration:t.options.animationDuration,easing:t.options.animationEasing};e(window).one("load",function(){t.options.deepLinking&&location.hash&&t.scrollToLoc(location.hash),t.calcPoints(),t._updateActive()}),this.$element.on({"resizeme.zf.trigger":this.reflow.bind(this),"scrollme.zf.trigger":this._updateActive.bind(this)}).on("click.zf.magellan",'a[href^="#"]',function(e){e.preventDefault();var i=this.getAttribute("href");t.scrollToLoc(i)})}},{key:"scrollToLoc",value:function(t){var i=Math.round(e(t).offset().top-this.options.threshold/2-this.options.barOffset);e("html, body").stop(!0).animate({scrollTop:i},this.options.animationDuration,this.options.animationEasing)}},{key:"reflow",value:function(){this.calcPoints(),this._updateActive()}},{key:"_updateActive",value:function(){var e,t=parseInt(window.pageYOffset,10);if(t+this.winHeight===this.docHeight)e=this.points.length-1;else if(t<this.points[0])e=0;else{var i=this.scrollPos<t,n=this,r=this.points.filter(function(e,r){return i?e-n.options.barOffset<=t:e-n.options.barOffset-n.options.threshold<=t});e=r.length?r.length-1:0}if(this.$active.removeClass(this.options.activeClass),this.$active=this.$links.eq(e).addClass(this.options.activeClass),this.options.deepLinking){var s=this.$active[0].getAttribute("href");window.history.pushState?window.history.pushState(null,null,s):window.location.hash=s}this.scrollPos=t,this.$element.trigger("update.zf.magellan",[this.$active])}},{key:"destroy",value:function(){if(this.$element.off(".zf.trigger .zf.magellan").find("."+this.options.activeClass).removeClass(this.options.activeClass),this.options.deepLinking){
var e=this.$active[0].getAttribute("href");window.location.hash.replace(e,"")}Foundation.unregisterPlugin(this)}}]),t}();t.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Foundation.plugin(t,"Magellan")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this.$lastTrigger=e(),this.$triggers=e(),this._init(),this._events(),Foundation.registerPlugin(this,"OffCanvas")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("id");if(this.$element.attr("aria-hidden","true"),this.$triggers=e(document).find('[data-open="'+t+'"], [data-close="'+t+'"], [data-toggle="'+t+'"]').attr("aria-expanded","false").attr("aria-controls",t),this.options.closeOnClick)if(e(".js-off-canvas-exit").length)this.$exiter=e(".js-off-canvas-exit");else{var i=document.createElement("div");i.setAttribute("class","js-off-canvas-exit"),e("[data-off-canvas-content]").append(i),this.$exiter=e(i)}this.options.isRevealed=this.options.isRevealed||new RegExp(this.options.revealClass,"g").test(this.$element[0].className),this.options.isRevealed&&(this.options.revealOn=this.options.revealOn||this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split("-")[2],this._setMQChecker()),this.options.transitionTime||(this.options.transitionTime=1e3*parseFloat(window.getComputedStyle(e("[data-off-canvas-wrapper]")[0]).transitionDuration))}},{key:"_events",value:function(){this.$element.off(".zf.trigger .zf.offcanvas").on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"keydown.zf.offcanvas":this._handleKeyboard.bind(this)}),this.options.closeOnClick&&this.$exiter.length&&this.$exiter.on({"click.zf.offcanvas":this.close.bind(this)})}},{key:"_setMQChecker",value:function(){var t=this;e(window).on("changed.zf.mediaquery",function(){Foundation.MediaQuery.atLeast(t.options.revealOn)?t.reveal(!0):t.reveal(!1)}).one("load.zf.offcanvas",function(){Foundation.MediaQuery.atLeast(t.options.revealOn)&&t.reveal(!0)})}},{key:"reveal",value:function(e){var t=this.$element.find("[data-close]");e?(this.close(),this.isRevealed=!0,this.$element.off("open.zf.trigger toggle.zf.trigger"),t.length&&t.hide()):(this.isRevealed=!1,this.$element.on({"open.zf.trigger":this.open.bind(this),"toggle.zf.trigger":this.toggle.bind(this)}),t.length&&t.show())}},{key:"open",value:function(t,i){if(!this.$element.hasClass("is-open")&&!this.isRevealed){var n=this;e(document.body);this.options.forceTop&&e("body").scrollTop(0),Foundation.Move(this.options.transitionTime,this.$element,function(){e("[data-off-canvas-wrapper]").addClass("is-off-canvas-open is-open-"+n.options.position),n.$element.addClass("is-open")}),this.$triggers.attr("aria-expanded","true"),this.$element.attr("aria-hidden","false").trigger("opened.zf.offcanvas"),this.options.closeOnClick&&this.$exiter.addClass("is-visible"),i&&(this.$lastTrigger=i),this.options.autoFocus&&this.$element.one(Foundation.transitionend(this.$element),function(){n.$element.find("a, button").eq(0).focus()}),this.options.trapFocus&&(e("[data-off-canvas-content]").attr("tabindex","-1"),this._trapFocus())}}},{key:"_trapFocus",value:function(){var e=Foundation.Keyboard.findFocusable(this.$element),t=e.eq(0),i=e.eq(-1);e.off(".zf.offcanvas").on("keydown.zf.offcanvas",function(e){(9===e.which||9===e.keycode)&&(e.target!==i[0]||e.shiftKey||(e.preventDefault(),t.focus()),e.target===t[0]&&e.shiftKey&&(e.preventDefault(),i.focus()))})}},{key:"close",value:function(t){if(this.$element.hasClass("is-open")&&!this.isRevealed){var i=this;e("[data-off-canvas-wrapper]").removeClass("is-off-canvas-open is-open-"+i.options.position),i.$element.removeClass("is-open"),this.$element.attr("aria-hidden","true").trigger("closed.zf.offcanvas"),this.options.closeOnClick&&this.$exiter.removeClass("is-visible"),this.$triggers.attr("aria-expanded","false"),this.options.trapFocus&&e("[data-off-canvas-content]").removeAttr("tabindex")}}},{key:"toggle",value:function(e,t){this.$element.hasClass("is-open")?this.close(e,t):this.open(e,t)}},{key:"_handleKeyboard",value:function(e){27===e.which&&(e.stopPropagation(),e.preventDefault(),this.close(),this.$lastTrigger.focus())}},{key:"destroy",value:function(){this.close(),this.$element.off(".zf.trigger .zf.offcanvas"),this.$exiter.off(".zf.offcanvas"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={closeOnClick:!0,transitionTime:0,position:"left",forceTop:!0,isRevealed:!1,revealOn:null,autoFocus:!0,revealClass:"reveal-for-",trapFocus:!1},Foundation.plugin(t,"OffCanvas")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Orbit"),Foundation.Keyboard.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}return _createClass(t,[{key:"_init",value:function(){this.$wrapper=this.$element.find("."+this.options.containerClass),this.$slides=this.$element.find("."+this.options.slideClass);var e=this.$element.find("img"),t=this.$slides.filter(".is-active");t.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),e.length?Foundation.onImagesLoaded(e,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&this.$slides.length>1&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}},{key:"_loadBullets",value:function(){this.$bullets=this.$element.find("."+this.options.boxOfBullets).find("button")}},{key:"geoSync",value:function(){var e=this;this.timer=new Foundation.Timer(this.$element,{duration:this.options.timerDelay,infinite:!1},function(){e.changeSlide(!0)}),this.timer.start()}},{key:"_prepareForOrbit",value:function(){var e=this;this._setWrapperHeight(function(t){e._setSlideHeight(t)})}},{key:"_setWrapperHeight",value:function(t){var i,n=0,r=0;this.$slides.each(function(){i=this.getBoundingClientRect().height,e(this).attr("data-slide",r),r&&e(this).css({position:"relative",display:"none"}),n=i>n?i:n,r++}),r===this.$slides.length&&(this.$wrapper.css({height:n}),t(n))}},{key:"_setSlideHeight",value:function(t){this.$slides.each(function(){e(this).css("max-height",t)})}},{key:"_events",value:function(){var t=this;if(this.$slides.length>1){if(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",function(e){e.preventDefault(),t.changeSlide(!0)}).on("swiperight.zf.orbit",function(e){e.preventDefault(),t.changeSlide(!1)}),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",function(){t.$element.data("clickedOn",t.$element.data("clickedOn")?!1:!0),t.timer[t.$element.data("clickedOn")?"pause":"start"]()}),this.options.pauseOnHover&&this.$element.on("mouseenter.zf.orbit",function(){t.timer.pause()}).on("mouseleave.zf.orbit",function(){t.$element.data("clickedOn")||t.timer.start()})),this.options.navButtons){var i=this.$element.find("."+this.options.nextClass+", ."+this.options.prevClass);i.attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",function(i){i.preventDefault(),t.changeSlide(e(this).hasClass(t.options.nextClass))})}this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",function(){if(/is-active/g.test(this.className))return!1;var i=e(this).data("slide"),n=i>t.$slides.filter(".is-active").data("slide"),r=t.$slides.eq(i);t.changeSlide(n,r,i)}),this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",function(i){Foundation.Keyboard.handleKey(i,"Orbit",{next:function(){t.changeSlide(!0)},previous:function(){t.changeSlide(!1)},handled:function(){e(i.target).is(t.$bullets)&&t.$bullets.filter(".is-active").focus()}})})}}},{key:"changeSlide",value:function(e,t,i){var n=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(n[0].className))return!1;var r,s=this.$slides.first(),o=this.$slides.last(),a=e?"Right":"Left",l=e?"Left":"Right",d=this;r=t?t:e?this.options.infiniteWrap?n.next("."+this.options.slideClass).length?n.next("."+this.options.slideClass):s:n.next("."+this.options.slideClass):this.options.infiniteWrap?n.prev("."+this.options.slideClass).length?n.prev("."+this.options.slideClass):o:n.prev("."+this.options.slideClass),r.length&&(this.options.bullets&&(i=i||this.$slides.index(r),this._updateBullets(i)),this.options.useMUI?(Foundation.Motion.animateIn(r.addClass("is-active").css({position:"absolute",top:0}),this.options["animInFrom"+a],function(){r.css({position:"relative",display:"block"}).attr("aria-live","polite")}),Foundation.Motion.animateOut(n.removeClass("is-active"),this.options["animOutTo"+l],function(){n.removeAttr("aria-live"),d.options.autoPlay&&!d.timer.isPaused&&d.timer.restart()})):(n.removeClass("is-active is-in").removeAttr("aria-live").hide(),r.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[r]))}},{key:"_updateBullets",value:function(e){var t=this.$element.find("."+this.options.boxOfBullets).find(".is-active").removeClass("is-active").blur(),i=t.find("span:last").detach();this.$bullets.eq(e).addClass("is-active").append(i)}},{key:"destroy",value:function(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide(),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0},Foundation.plugin(t,"Orbit")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=e(i),this.rules=this.$element.data("responsive-menu"),this.currentMq=null,this.currentPlugin=null,this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveMenu")}return _createClass(t,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var t={},n=this.rules.split(" "),r=0;r<n.length;r++){var s=n[r].split("-"),o=s.length>1?s[0]:"small",a=s.length>1?s[1]:s[0];null!==i[a]&&(t[o]=i[a])}this.rules=t}e.isEmptyObject(this.rules)||this._checkMediaQueries()}},{key:"_events",value:function(){var t=this;e(window).on("changed.zf.mediaquery",function(){t._checkMediaQueries()})}},{key:"_checkMediaQueries",value:function(){var t,n=this;e.each(this.rules,function(e){Foundation.MediaQuery.atLeast(e)&&(t=e)}),t&&(this.currentPlugin instanceof this.rules[t].plugin||(e.each(i,function(e,t){n.$element.removeClass(t.cssClass)}),this.$element.addClass(this.rules[t].cssClass),this.currentPlugin&&this.currentPlugin.destroy(),this.currentPlugin=new this.rules[t].plugin(this.$element,{})))}},{key:"destroy",value:function(){this.currentPlugin.destroy(),e(window).off(".zf.ResponsiveMenu"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={};var i={dropdown:{cssClass:"dropdown",plugin:Foundation._plugins["dropdown-menu"]||null},drilldown:{cssClass:"drilldown",plugin:Foundation._plugins.drilldown||null},accordion:{cssClass:"accordion-menu",plugin:Foundation._plugins["accordion-menu"]||null}};Foundation.plugin(t,"ResponsiveMenu")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=e(i),this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveToggle")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.data("responsive-toggle");t||console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar."),this.$targetMenu=e("#"+t),this.$toggler=this.$element.find("[data-toggle]"),this._update()}},{key:"_events",value:function(){this._updateMqHandler=this._update.bind(this),e(window).on("changed.zf.mediaquery",this._updateMqHandler),this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this))}},{key:"_update",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)?(this.$element.hide(),this.$targetMenu.show()):(this.$element.show(),this.$targetMenu.hide())}},{key:"toggleMenu",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)||(this.$targetMenu.toggle(0),this.$element.trigger("toggled.zf.responsiveToggle"))}},{key:"destroy",value:function(){this.$element.off(".zf.responsiveToggle"),this.$toggler.off(".zf.responsiveToggle"),e(window).off("changed.zf.mediaquery",this._updateMqHandler),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={hideFor:"medium"},Foundation.plugin(t,"ResponsiveToggle")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){function t(){return/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)}function i(){return/Android/.test(window.navigator.userAgent)}function n(){return t()||i()}var r=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Reveal"),Foundation.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close",TAB:"tab_forward",SHIFT_TAB:"tab_backward"})}return _createClass(t,[{key:"_init",value:function(){this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:Foundation.MediaQuery.current},this.isMobile=n(),this.$anchor=e(e('[data-open="'+this.id+'"]').length?'[data-open="'+this.id+'"]':'[data-toggle="'+this.id+'"]'),this.$anchor.attr({"aria-controls":this.id,"aria-haspopup":!0,tabindex:0}),(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo(e("body")),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#"+this.id&&e(window).one("load.zf.reveal",this.open.bind(this))}},{key:"_makeOverlay",value:function(t){var i=e("<div></div>").addClass("reveal-overlay").appendTo("body");return i}},{key:"_updatePosition",value:function(){var t,i,n=this.$element.outerWidth(),r=e(window).width(),s=this.$element.outerHeight(),o=e(window).height();t="auto"===this.options.hOffset?parseInt((r-n)/2,10):parseInt(this.options.hOffset,10),i="auto"===this.options.vOffset?s>o?parseInt(Math.min(100,o/10),10):parseInt((o-s)/4,10):parseInt(this.options.vOffset,10),this.$element.css({top:i+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:t+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var t=this,i=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":function(n,r){return n.target===i.$element[0]||e(n.target).parents("[data-closable]")[0]===r?t.close.apply(t):void 0},"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){i._updatePosition()}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",function(e){(13===e.which||32===e.which)&&(e.stopPropagation(),e.preventDefault(),i.open())}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",function(t){t.target===i.$element[0]||e.contains(i.$element[0],t.target)||i.close()}),this.options.deepLink&&e(window).on("popstate.zf.reveal:"+this.id,this._handleState.bind(this))}},{key:"_handleState",value:function(e){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"open",value:function(){var t=this;if(this.options.deepLink){var i="#"+this.id;window.history.pushState?window.history.pushState(null,null,i):window.location.hash=i}if(this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&(this.$overlay.css({visibility:""}).hide(),this.$element.hasClass("fast")?this.$overlay.addClass("fast"):this.$element.hasClass("slow")&&this.$overlay.addClass("slow")),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id),this.options.animationIn){var n=function(){r.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),console.log("focus")},r=this;this.options.overlay&&Foundation.Motion.animateIn(this.$overlay,"fade-in"),Foundation.Motion.animateIn(this.$element,this.options.animationIn,function(){t.focusableElements=Foundation.Keyboard.findFocusable(t.$element),n()})}else this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay);this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),this.$element.trigger("open.zf.reveal"),this.isMobile?(this.originalScrollPos=window.pageYOffset,e("html, body").addClass("is-reveal-open")):e("body").addClass("is-reveal-open"),setTimeout(function(){t._extraHandlers()},0)}},{key:"_extraHandlers",value:function(){var t=this;this.focusableElements=Foundation.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||e("body").on("click.zf.reveal",function(i){i.target===t.$element[0]||e.contains(t.$element[0],i.target)||t.close()}),this.options.closeOnEsc&&e(window).on("keydown.zf.reveal",function(e){Foundation.Keyboard.handleKey(e,"Reveal",{close:function(){t.options.closeOnEsc&&(t.close(),t.$anchor.focus())}})}),this.$element.on("keydown.zf.reveal",function(i){var n=e(this);Foundation.Keyboard.handleKey(i,"Reveal",{tab_forward:function(){return t.$element.find(":focus").is(t.focusableElements.eq(-1))?(t.focusableElements.eq(0).focus(),!0):0===t.focusableElements.length?!0:void 0},tab_backward:function(){return t.$element.find(":focus").is(t.focusableElements.eq(0))||t.$element.is(":focus")?(t.focusableElements.eq(-1).focus(),!0):0===t.focusableElements.length?!0:void 0},open:function(){t.$element.find(":focus").is(t.$element.find("[data-close]"))?setTimeout(function(){t.$anchor.focus()},1):n.is(t.focusableElements)&&t.open()},close:function(){t.options.closeOnEsc&&(t.close(),t.$anchor.focus())},handled:function(e){e&&i.preventDefault()}})})}},{key:"close",value:function(){function t(){i.isMobile?(e("html, body").removeClass("is-reveal-open"),i.originalScrollPos&&(e("body").scrollTop(i.originalScrollPos),i.originalScrollPos=null)):e("body").removeClass("is-reveal-open"),i.$element.attr("aria-hidden",!0),i.$element.trigger("closed.zf.reveal")}if(!this.isActive||!this.$element.is(":visible"))return!1;var i=this;this.options.animationOut?(this.options.overlay?Foundation.Motion.animateOut(this.$overlay,"fade-out",t):t(),Foundation.Motion.animateOut(this.$element,this.options.animationOut)):(this.options.overlay?this.$overlay.hide(0,t):t(),this.$element.hide(this.options.hideDelay)),this.options.closeOnEsc&&e(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&e("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,i.options.deepLink&&(window.history.replaceState?window.history.replaceState("",document.title,window.location.pathname):window.location.hash="")}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"destroy",value:function(){this.options.overlay&&(this.$element.appendTo(e("body")),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),e(window).off(".zf.reveal:"+this.id),Foundation.unregisterPlugin(this)}}]),t}();r.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1,deepLink:!1},Foundation.plugin(r,"Reveal")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){function t(e,t){return e/t}function i(e,t,i,n){return Math.abs(e.position()[t]+e[n]()/2-i)}var n=function(){function n(t,i){_classCallCheck(this,n),this.$element=t,this.options=e.extend({},n.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Slider"),Foundation.Keyboard.register("Slider",{ltr:{ARROW_RIGHT:"increase",ARROW_UP:"increase",ARROW_DOWN:"decrease",ARROW_LEFT:"decrease",SHIFT_ARROW_RIGHT:"increase_fast",SHIFT_ARROW_UP:"increase_fast",SHIFT_ARROW_DOWN:"decrease_fast",SHIFT_ARROW_LEFT:"decrease_fast"},rtl:{ARROW_LEFT:"increase",ARROW_RIGHT:"decrease",SHIFT_ARROW_LEFT:"increase_fast",SHIFT_ARROW_RIGHT:"decrease_fast"}})}return _createClass(n,[{key:"_init",value:function(){this.inputs=this.$element.find("input"),this.handles=this.$element.find("[data-slider-handle]"),this.$handle=this.handles.eq(0),this.$input=this.inputs.length?this.inputs.eq(0):e("#"+this.$handle.attr("aria-controls")),this.$fill=this.$element.find("[data-slider-fill]").css(this.options.vertical?"height":"width",0);var t=!1,i=this;(this.options.disabled||this.$element.hasClass(this.options.disabledClass))&&(this.options.disabled=!0,this.$element.addClass(this.options.disabledClass)),this.inputs.length||(this.inputs=e().add(this.$input),this.options.binding=!0),this._setInitAttr(0),this._events(this.$handle),this.handles[1]&&(this.options.doubleSided=!0,this.$handle2=this.handles.eq(1),this.$input2=this.inputs.length>1?this.inputs.eq(1):e("#"+this.$handle2.attr("aria-controls")),this.inputs[1]||(this.inputs=this.inputs.add(this.$input2)),t=!0,this._setHandlePos(this.$handle,this.options.initialStart,!0,function(){i._setHandlePos(i.$handle2,i.options.initialEnd,!0)}),this._setInitAttr(1),this._events(this.$handle2)),t||this._setHandlePos(this.$handle,this.options.initialStart,!0)}},{key:"_setHandlePos",value:function(e,i,n,r){if(!this.$element.hasClass(this.options.disabledClass)){i=parseFloat(i),i<this.options.start?i=this.options.start:i>this.options.end&&(i=this.options.end);var s=this.options.doubleSided;if(s)if(0===this.handles.index(e)){var o=parseFloat(this.$handle2.attr("aria-valuenow"));i=i>=o?o-this.options.step:i}else{var a=parseFloat(this.$handle.attr("aria-valuenow"));i=a>=i?a+this.options.step:i}this.options.vertical&&!n&&(i=this.options.end-i);var l=this,d=this.options.vertical,c=d?"height":"width",u=d?"top":"left",h=e[0].getBoundingClientRect()[c],p=this.$element[0].getBoundingClientRect()[c],f=t(i-this.options.start,this.options.end-this.options.start).toFixed(2),g=(p-h)*f,m=(100*t(g,p)).toFixed(this.options.decimal);i=parseFloat(i.toFixed(this.options.decimal));var v={};if(this._setValues(e,i),s){var _,y=0===this.handles.index(e),b=~~(100*t(h,p));if(y)v[u]=m+"%",_=parseFloat(this.$handle2[0].style[u])-m+b,r&&"function"==typeof r&&r();else{var w=parseFloat(this.$handle[0].style[u]);_=m-(isNaN(w)?this.options.initialStart/((this.options.end-this.options.start)/100):w)+b}v["min-"+c]=_+"%"}this.$element.one("finished.zf.animate",function(){l.$element.trigger("moved.zf.slider",[e])});var k=this.$element.data("dragging")?1e3/60:this.options.moveTime;Foundation.Move(k,e,function(){e.css(u,m+"%"),l.options.doubleSided?l.$fill.css(v):l.$fill.css(c,100*f+"%")}),clearTimeout(l.timeout),l.timeout=setTimeout(function(){l.$element.trigger("changed.zf.slider",[e])},l.options.changedDelay)}}},{key:"_setInitAttr",value:function(e){var t=this.inputs.eq(e).attr("id")||Foundation.GetYoDigits(6,"slider");this.inputs.eq(e).attr({id:t,max:this.options.end,min:this.options.start,step:this.options.step}),this.handles.eq(e).attr({role:"slider","aria-controls":t,"aria-valuemax":this.options.end,"aria-valuemin":this.options.start,"aria-valuenow":0===e?this.options.initialStart:this.options.initialEnd,"aria-orientation":this.options.vertical?"vertical":"horizontal",tabindex:0})}},{key:"_setValues",value:function(e,t){var i=this.options.doubleSided?this.handles.index(e):0;this.inputs.eq(i).val(t),e.attr("aria-valuenow",t)}},{key:"_handleEvent",value:function(n,r,s){var o,a;if(s)o=this._adjustValue(null,s),a=!0;else{n.preventDefault();var l=this,d=this.options.vertical,c=d?"height":"width",u=d?"top":"left",h=d?n.pageY:n.pageX,p=(this.$handle[0].getBoundingClientRect()[c]/2,this.$element[0].getBoundingClientRect()[c]),f=d?e(window).scrollTop():e(window).scrollLeft(),g=this.$element.offset()[u];n.clientY===n.pageY&&(h+=f);var m,v=h-g;if(m=0>v?0:v>p?p:v,offsetPct=t(m,p),o=(this.options.end-this.options.start)*offsetPct+this.options.start,Foundation.rtl()&&!this.options.vertical&&(o=this.options.end-o),o=l._adjustValue(null,o),a=!1,!r){var _=i(this.$handle,u,m,c),y=i(this.$handle2,u,m,c);r=y>=_?this.$handle:this.$handle2}}this._setHandlePos(r,o,a)}},{key:"_adjustValue",value:function(e,t){var i,n,r,s,o=this.options.step,a=parseFloat(o/2);return i=e?parseFloat(e.attr("aria-valuenow")):t,n=i%o,r=i-n,s=r+o,0===n?i:i=i>=r+a?s:r}},{key:"_events",value:function(t){var i,n=this;if(this.inputs.off("change.zf.slider").on("change.zf.slider",function(t){var i=n.inputs.index(e(this));n._handleEvent(t,n.handles.eq(i),e(this).val())}),this.options.clickSelect&&this.$element.off("click.zf.slider").on("click.zf.slider",function(t){return n.$element.data("dragging")?!1:void(e(t.target).is("[data-slider-handle]")||(n.options.doubleSided?n._handleEvent(t):n._handleEvent(t,n.$handle)))}),this.options.draggable){this.handles.addTouch();var r=e("body");t.off("mousedown.zf.slider").on("mousedown.zf.slider",function(s){t.addClass("is-dragging"),n.$fill.addClass("is-dragging"),n.$element.data("dragging",!0),i=e(s.currentTarget),r.on("mousemove.zf.slider",function(e){e.preventDefault(),n._handleEvent(e,i)}).on("mouseup.zf.slider",function(e){n._handleEvent(e,i),t.removeClass("is-dragging"),n.$fill.removeClass("is-dragging"),n.$element.data("dragging",!1),r.off("mousemove.zf.slider mouseup.zf.slider")})}).on("selectstart.zf.slider touchmove.zf.slider",function(e){e.preventDefault()})}t.off("keydown.zf.slider").on("keydown.zf.slider",function(t){var i,r=e(this),s=n.options.doubleSided?n.handles.index(r):0,o=parseFloat(n.inputs.eq(s).val());Foundation.Keyboard.handleKey(t,"Slider",{decrease:function(){i=o-n.options.step},increase:function(){i=o+n.options.step},decrease_fast:function(){i=o-10*n.options.step},increase_fast:function(){i=o+10*n.options.step},handled:function(){t.preventDefault(),n._setHandlePos(r,i,!0)}})})}},{key:"destroy",value:function(){this.handles.off(".zf.slider"),this.inputs.off(".zf.slider"),this.$element.off(".zf.slider"),Foundation.unregisterPlugin(this)}}]),n}();n.defaults={start:0,end:100,step:1,initialStart:0,initialEnd:100,binding:!1,clickSelect:!0,vertical:!1,draggable:!0,disabled:!1,doubleSided:!1,decimal:2,moveTime:200,disabledClass:"disabled",invertVertical:!1,changedDelay:500},Foundation.plugin(n,"Slider")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){function t(e){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*e}var i=function(){function i(t,n){_classCallCheck(this,i),this.$element=t,this.options=e.extend({},i.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Sticky")}return _createClass(i,[{key:"_init",value:function(){var t=this.$element.parent("[data-sticky-container]"),i=this.$element[0].id||Foundation.GetYoDigits(6,"sticky"),n=this;t.length||(this.wasWrapped=!0),this.$container=t.length?t:e(this.options.container).wrapInner(this.$element),this.$container.addClass(this.options.containerClass),this.$element.addClass(this.options.stickyClass).attr({"data-resize":i}),this.scrollCount=this.options.checkEvery,this.isStuck=!1,e(window).one("load.zf.sticky",function(){""!==n.options.anchor?n.$anchor=e("#"+n.options.anchor):n._parsePoints(),n._setSizes(function(){n._calc(!1)}),n._events(i.split("-").reverse().join("-"))})}},{key:"_parsePoints",value:function(){for(var t=""==this.options.topAnchor?1:this.options.topAnchor,i=""==this.options.btmAnchor?document.documentElement.scrollHeight:this.options.btmAnchor,n=[t,i],r={},s=0,o=n.length;o>s&&n[s];s++){var a;if("number"==typeof n[s])a=n[s];else{var l=n[s].split(":"),d=e("#"+l[0]);a=d.offset().top,l[1]&&"bottom"===l[1].toLowerCase()&&(a+=d[0].getBoundingClientRect().height)}r[s]=a}this.points=r}},{key:"_events",value:function(t){var i=this,n=this.scrollListener="scroll.zf."+t;this.isOn||(this.canStick&&(this.isOn=!0,e(window).off(n).on(n,function(e){0===i.scrollCount?(i.scrollCount=i.options.checkEvery,i._setSizes(function(){i._calc(!1,window.pageYOffset)})):(i.scrollCount--,i._calc(!1,window.pageYOffset))})),this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",function(e,r){i._setSizes(function(){i._calc(!1),i.canStick?i.isOn||i._events(t):i.isOn&&i._pauseListeners(n)})}))}},{key:"_pauseListeners",value:function(t){this.isOn=!1,e(window).off(t),this.$element.trigger("pause.zf.sticky")}},{key:"_calc",value:function(e,t){return e&&this._setSizes(),this.canStick?(t||(t=window.pageYOffset),void(t>=this.topPoint?t<=this.bottomPoint?this.isStuck||this._setSticky():this.isStuck&&this._removeSticky(!1):this.isStuck&&this._removeSticky(!0))):(this.isStuck&&this._removeSticky(!0),!1)}},{key:"_setSticky",value:function(){var e=this,t=this.options.stickTo,i="top"===t?"marginTop":"marginBottom",n="top"===t?"bottom":"top",r={};r[i]=this.options[i]+"em",r[t]=0,r[n]="auto",r.left=this.$container.offset().left+parseInt(window.getComputedStyle(this.$container[0])["padding-left"],10),this.isStuck=!0,this.$element.removeClass("is-anchored is-at-"+n).addClass("is-stuck is-at-"+t).css(r).trigger("sticky.zf.stuckto:"+t),this.$element.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){e._setSizes()})}},{key:"_removeSticky",value:function(e){var t=this.options.stickTo,i="top"===t,n={},r=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,s=i?"marginTop":"marginBottom",o=e?"top":"bottom";n[s]=0,n.bottom="auto",e?n.top=0:n.top=r,n.left="",this.isStuck=!1,this.$element.removeClass("is-stuck is-at-"+t).addClass("is-anchored is-at-"+o).css(n).trigger("sticky.zf.unstuckfrom:"+o);
}},{key:"_setSizes",value:function(e){this.canStick=Foundation.MediaQuery.atLeast(this.options.stickyOn),this.canStick||e();var t=this.$container[0].getBoundingClientRect().width,i=window.getComputedStyle(this.$container[0]),n=parseInt(i["padding-right"],10);this.$anchor&&this.$anchor.length?this.anchorHeight=this.$anchor[0].getBoundingClientRect().height:this._parsePoints(),this.$element.css({"max-width":t-n+"px"});var r=this.$element[0].getBoundingClientRect().height||this.containerHeight;"none"==this.$element.css("display")&&(r=0),this.containerHeight=r,this.$container.css({height:r}),this.elemHeight=r,this.isStuck&&this.$element.css({left:this.$container.offset().left+parseInt(i["padding-left"],10)}),this._setBreakPoints(r,function(){e&&e()})}},{key:"_setBreakPoints",value:function(e,i){if(!this.canStick){if(!i)return!1;i()}var n=t(this.options.marginTop),r=t(this.options.marginBottom),s=this.points?this.points[0]:this.$anchor.offset().top,o=this.points?this.points[1]:s+this.anchorHeight,a=window.innerHeight;"top"===this.options.stickTo?(s-=n,o-=e+n):"bottom"===this.options.stickTo&&(s-=a-(e+r),o-=a-r),this.topPoint=s,this.bottomPoint=o,i&&i()}},{key:"destroy",value:function(){this._removeSticky(!0),this.$element.removeClass(this.options.stickyClass+" is-anchored is-at-top").css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger"),this.$anchor&&this.$anchor.length&&this.$anchor.off("change.zf.sticky"),e(window).off(this.scrollListener),this.wasWrapped?this.$element.unwrap():this.$container.removeClass(this.options.containerClass).css({height:""}),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",checkEvery:-1},Foundation.plugin(i,"Sticky")}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Tabs"),Foundation.Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}return _createClass(t,[{key:"_init",value:function(){var t=this;if(this.$tabTitles=this.$element.find("."+this.options.linkClass),this.$tabContent=e('[data-tabs-content="'+this.$element[0].id+'"]'),this.$tabTitles.each(function(){var i=e(this),n=i.find("a"),r=i.hasClass("is-active"),s=n[0].hash.slice(1),o=n[0].id?n[0].id:s+"-label",a=e("#"+s);i.attr({role:"presentation"}),n.attr({role:"tab","aria-controls":s,"aria-selected":r,id:o}),a.attr({role:"tabpanel","aria-hidden":!r,"aria-labelledby":o}),r&&t.options.autoFocus&&n.focus()}),this.options.matchHeight){var i=this.$tabContent.find("img");i.length?Foundation.onImagesLoaded(i,this._setHeight.bind(this)):this._setHeight()}this._events()}},{key:"_events",value:function(){this._addKeyHandler(),this._addClickHandler(),this._setHeightMqHandler=null,this.options.matchHeight&&(this._setHeightMqHandler=this._setHeight.bind(this),e(window).on("changed.zf.mediaquery",this._setHeightMqHandler))}},{key:"_addClickHandler",value:function(){var t=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,function(i){i.preventDefault(),i.stopPropagation(),e(this).hasClass("is-active")||t._handleTabChange(e(this))})}},{key:"_addKeyHandler",value:function(){var t=this;t.$element.find("li:first-of-type"),t.$element.find("li:last-of-type");this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(i){if(9!==i.which){var n,r,s=e(this),o=s.parent("ul").children("li");o.each(function(i){return e(this).is(s)?void(t.options.wrapOnKeys?(n=0===i?o.last():o.eq(i-1),r=i===o.length-1?o.first():o.eq(i+1)):(n=o.eq(Math.max(0,i-1)),r=o.eq(Math.min(i+1,o.length-1)))):void 0}),Foundation.Keyboard.handleKey(i,"Tabs",{open:function(){s.find('[role="tab"]').focus(),t._handleTabChange(s)},previous:function(){n.find('[role="tab"]').focus(),t._handleTabChange(n)},next:function(){r.find('[role="tab"]').focus(),t._handleTabChange(r)},handled:function(){i.stopPropagation(),i.preventDefault()}})}})}},{key:"_handleTabChange",value:function(t){var i=t.find('[role="tab"]'),n=i[0].hash,r=this.$tabContent.find(n),s=this.$element.find("."+this.options.linkClass+".is-active").removeClass("is-active").find('[role="tab"]').attr({"aria-selected":"false"});e("#"+s.attr("aria-controls")).removeClass("is-active").attr({"aria-hidden":"true"}),t.addClass("is-active"),i.attr({"aria-selected":"true"}),r.addClass("is-active").attr({"aria-hidden":"false"}),this.$element.trigger("change.zf.tabs",[t])}},{key:"selectTab",value:function(e){var t;t="object"===("undefined"==typeof e?"undefined":_typeof(e))?e[0].id:e,t.indexOf("#")<0&&(t="#"+t);var i=this.$tabTitles.find('[href="'+t+'"]').parent("."+this.options.linkClass);this._handleTabChange(i)}},{key:"_setHeight",value:function(){var t=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each(function(){var i=e(this),n=i.hasClass("is-active");n||i.css({visibility:"hidden",display:"block"});var r=this.getBoundingClientRect().height;n||i.css({visibility:"",display:""}),t=r>t?r:t}).css("height",t+"px")}},{key:"destroy",value:function(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide(),this.options.matchHeight&&null!=this._setHeightMqHandler&&e(window).off("changed.zf.mediaquery",this._setHeightMqHandler),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,linkClass:"tabs-title",panelClass:"tabs-panel"},Foundation.plugin(t,"Tabs")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,i.data(),n),this.className="",this._init(),this._events(),Foundation.registerPlugin(this,"Toggler")}return _createClass(t,[{key:"_init",value:function(){var t;this.options.animate?(t=this.options.animate.split(" "),this.animationIn=t[0],this.animationOut=t[1]||null):(t=this.$element.data("toggler"),this.className="."===t[0]?t.slice(1):t);var i=this.$element[0].id;e('[data-open="'+i+'"], [data-close="'+i+'"], [data-toggle="'+i+'"]').attr("aria-controls",i),this.$element.attr("aria-expanded",this.$element.is(":hidden")?!1:!0)}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var e=this.$element.hasClass(this.className);e?this.$element.trigger("on.zf.toggler"):this.$element.trigger("off.zf.toggler"),this._updateARIA(e)}},{key:"_toggleAnimate",value:function(){var e=this;this.$element.is(":hidden")?Foundation.Motion.animateIn(this.$element,this.animationIn,function(){e._updateARIA(!0),this.trigger("on.zf.toggler")}):Foundation.Motion.animateOut(this.$element,this.animationOut,function(){e._updateARIA(!1),this.trigger("off.zf.toggler")})}},{key:"_updateARIA",value:function(e){this.$element.attr("aria-expanded",e?!0:!1)}},{key:"destroy",value:function(){this.$element.off(".zf.toggler"),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={animate:!1},Foundation.plugin(t,"Toggler")}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.$element=i,this.options=e.extend({},t.defaults,this.$element.data(),n),this.isActive=!1,this.isClick=!1,this._init(),Foundation.registerPlugin(this,"Tooltip")}return _createClass(t,[{key:"_init",value:function(){var t=this.$element.attr("aria-describedby")||Foundation.GetYoDigits(6,"tooltip");this.options.positionClass=this.options.positionClass||this._getPositionClass(this.$element),this.options.tipText=this.options.tipText||this.$element.attr("title"),this.template=this.options.template?e(this.options.template):this._buildTemplate(t),this.template.appendTo(document.body).text(this.options.tipText).hide(),this.$element.attr({title:"","aria-describedby":t,"data-yeti-box":t,"data-toggle":t,"data-resize":t}).addClass(this.triggerClass),this.usedPositions=[],this.counter=4,this.classChanged=!1,this._events()}},{key:"_getPositionClass",value:function(e){if(!e)return"";var t=e[0].className.match(/\b(top|left|right)\b/g);return t=t?t[0]:""}},{key:"_buildTemplate",value:function(t){var i=(this.options.tooltipClass+" "+this.options.positionClass+" "+this.options.templateClasses).trim(),n=e("<div></div>").addClass(i).attr({role:"tooltip","aria-hidden":!0,"data-is-active":!1,"data-is-focus":!1,id:t});return n}},{key:"_reposition",value:function(e){this.usedPositions.push(e?e:"bottom"),!e&&this.usedPositions.indexOf("top")<0?this.template.addClass("top"):"top"===e&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(e):"left"===e&&this.usedPositions.indexOf("right")<0?this.template.removeClass(e).addClass("right"):"right"===e&&this.usedPositions.indexOf("left")<0?this.template.removeClass(e).addClass("left"):!e&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.template.addClass("left"):"top"===e&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.template.removeClass(e).addClass("left"):"left"===e&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(e):"right"===e&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(e):this.template.removeClass(e),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){var e=this._getPositionClass(this.template),t=Foundation.Box.GetDimensions(this.template),i=Foundation.Box.GetDimensions(this.$element),n="left"===e?"left":"right"===e?"left":"top",r="top"===n?"height":"width";"height"===r?this.options.vOffset:this.options.hOffset;if(t.width>=t.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.template))return this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:i.windowDims.width-2*this.options.hOffset,height:"auto"}),!1;for(this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center "+(e||"bottom"),this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.template)&&this.counter;)this._reposition(e),this._setPosition()}},{key:"show",value:function(){if("all"!==this.options.showOn&&!Foundation.MediaQuery.atLeast(this.options.showOn))return!1;var e=this;this.template.css("visibility","hidden").show(),this._setPosition(),this.$element.trigger("closeme.zf.tooltip",this.template.attr("id")),this.template.attr({"data-is-active":!0,"aria-hidden":!1}),e.isActive=!0,this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,function(){}),this.$element.trigger("show.zf.tooltip")}},{key:"hide",value:function(){var e=this;this.template.stop().attr({"aria-hidden":!0,"data-is-active":!1}).fadeOut(this.options.fadeOutDuration,function(){e.isActive=!1,e.isClick=!1,e.classChanged&&(e.template.removeClass(e._getPositionClass(e.template)).addClass(e.options.positionClass),e.usedPositions=[],e.counter=4,e.classChanged=!1)}),this.$element.trigger("hide.zf.tooltip")}},{key:"_events",value:function(){var e=this,t=(this.template,!1);this.options.disableHover||this.$element.on("mouseenter.zf.tooltip",function(t){e.isActive||(e.timeout=setTimeout(function(){e.show()},e.options.hoverDelay))}).on("mouseleave.zf.tooltip",function(i){clearTimeout(e.timeout),(!t||e.isClick&&!e.options.clickOpen)&&e.hide()}),this.options.clickOpen?this.$element.on("mousedown.zf.tooltip",function(t){t.stopImmediatePropagation(),e.isClick||(e.isClick=!0,!e.options.disableHover&&e.$element.attr("tabindex")||e.isActive||e.show())}):this.$element.on("mousedown.zf.tooltip",function(t){t.stopImmediatePropagation(),e.isClick=!0}),this.options.disableForTouch||this.$element.on("tap.zf.tooltip touchend.zf.tooltip",function(t){e.isActive?e.hide():e.show()}),this.$element.on({"close.zf.trigger":this.hide.bind(this)}),this.$element.on("focus.zf.tooltip",function(i){return t=!0,e.isClick?(e.options.clickOpen||(t=!1),!1):void e.show()}).on("focusout.zf.tooltip",function(i){t=!1,e.isClick=!1,e.hide()}).on("resizeme.zf.trigger",function(){e.isActive&&e._setPosition()})}},{key:"toggle",value:function(){this.isActive?this.hide():this.show()}},{key:"destroy",value:function(){this.$element.attr("title",this.template.text()).off(".zf.trigger .zf.tootip").removeAttr("aria-describedby").removeAttr("data-yeti-box").removeAttr("data-toggle").removeAttr("data-resize"),this.template.remove(),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={disableForTouch:!1,hoverDelay:200,fadeInDuration:150,fadeOutDuration:150,disableHover:!1,templateClasses:"",tooltipClass:"tooltip",triggerClass:"has-tip",showOn:"small",template:"",tipText:"",touchCloseText:"Tap to close.",clickOpen:!0,positionClass:"",vOffset:10,hOffset:12},Foundation.plugin(t,"Tooltip")}(jQuery),function(e,t){"function"==typeof define&&define.amd?define("jQuery.extendext",["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){e.extendext=function(){var t,i,n,r,s,o,a=arguments[0]||{},l=1,d=arguments.length,c=!1,u="default";for("boolean"==typeof a&&(c=a,a=arguments[l++]||{}),"string"==typeof a&&(u=a.toLowerCase(),"concat"!==u&&"replace"!==u&&"extend"!==u&&(u="default"),a=arguments[l++]||{}),"object"==typeof a||e.isFunction(a)||(a={}),l===d&&(a=this,l--);d>l;l++)if(null!==(t=arguments[l]))if(e.isArray(t)&&"default"!==u)switch(o=a&&e.isArray(a)?a:[],u){case"concat":a=o.concat(e.extend(c,[],t));break;case"replace":a=e.extend(c,[],t);break;case"extend":t.forEach(function(t,i){if("object"==typeof t){var n=e.isArray(t)?[]:{};o[i]=e.extendext(c,u,o[i]||n,t)}else-1===o.indexOf(t)&&o.push(t)}),a=o}else for(i in t)n=a[i],r=t[i],a!==r&&(c&&r&&(e.isPlainObject(r)||(s=e.isArray(r)))?(s?(s=!1,o=n&&e.isArray(n)?n:[]):o=n&&e.isPlainObject(n)?n:{},a[i]=e.extendext(c,u,o,r)):void 0!==r&&(a[i]=r));return a}}),function(){function e(t,i,n){return("string"==typeof i?i:i.toString()).replace(t.define||s,function(e,i,r,s){return 0===i.indexOf("def.")&&(i=i.substring(4)),i in n||(":"===r?(t.defineParams&&s.replace(t.defineParams,function(e,t,r){n[i]={arg:t,text:r}}),i in n||(n[i]=s)):new Function("def","def['"+i+"']="+s)(n)),""}).replace(t.use||s,function(i,r){t.useParams&&(r=r.replace(t.useParams,function(e,t,i,r){if(n[i]&&n[i].arg&&r){var s=(i+":"+r).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[s]=n[i].text.replace(new RegExp("(^|[^\\w$])"+n[i].arg+"([^\\w$])","g"),"$1"+r+"$2"),t+"def.__exp['"+s+"']"}}));var s=new Function("def","return "+r)(n);return s?e(t,s,n):s})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var i,n={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};n.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,function(e){return t[e]||e}):""}},i=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define("doT",function(){return n}):i.doT=n;var r={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},s=/$^/;n.template=function(o,a,l){a=a||n.templateSettings;var d,c,u=a.append?r.append:r.split,h=0,p=a.use||a.define?e(a,o,l||{}):o;p=("var out='"+(a.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(a.interpolate||s,function(e,i){return u.start+t(i)+u.end}).replace(a.encode||s,function(e,i){return d=!0,u.startencode+t(i)+u.end}).replace(a.conditional||s,function(e,i,n){return i?n?"';}else if("+t(n)+"){out+='":"';}else{out+='":n?"';if("+t(n)+"){out+='":"';}out+='"}).replace(a.iterate||s,function(e,i,n,r){return i?(h+=1,c=r||"i"+h,i=t(i),"';var arr"+h+"="+i+";if(arr"+h+"){var "+n+","+c+"=-1,l"+h+"=arr"+h+".length-1;while("+c+"<l"+h+"){"+n+"=arr"+h+"["+c+"+=1];out+='"):"';} } out+='"}).replace(a.evaluate||s,function(e,i){return"';"+t(i)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),d&&(a.selfcontained||!i||i._encodeHTML||(i._encodeHTML=n.encodeHTMLSource(a.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+n.encodeHTMLSource.toString()+"("+(a.doNotSkipEncoded||"")+"));"+p);try{return new Function(a.varname,p)}catch(f){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),f}},n.compile=function(e,t){return n.template(e,null,t)}}(),function(e,t){"function"==typeof define&&define.amd?define("query-builder",["jquery","doT","jQuery.extendext"],t):t(e.jQuery,e.doT)}(this,function(e,t){function i(t){return this instanceof i?(this.root=null,void(this.$=e(this))):i.getModel(t)}function n(e,t){if(null!==e&&"object"==typeof e){var i=Object.keys(e);return 1===i.length?i[0]:void 0!==e.$gte&&void 0!==e.$lte?"between":void 0!==e.$lt&&void 0!==e.$gt?"not_between":void 0!==e.$regex?"$regex":void 0}return"eq"}function r(e){for(var t=Object.keys(e),i=0,n=t.length;n>i;i++)if("$or"==t[i].toLowerCase()||"$and"==t[i].toLowerCase())return t[i];return void 0}function s(e,t,n){var r,s;r=t.closest(l.rule_container),r.length&&(s="moveAfter"),s||(r=t.closest(l.group_header),r.length&&(r=t.closest(l.group_container),s="moveAtBegin")),s||(r=t.closest(l.group_container),r.length&&(s="moveAtEnd")),s&&(e[s](i(r)),n&&e instanceof u&&n.setRuleInputValue(e,e.value))}function o(e){var t=e.match(/(question_mark|numbered|named)(?:\((.)\))?/);return t||(t=[null,"question_mark",void 0]),t}var a=function(e,t){this.init(e,t)};e.extend(a.prototype,{change:function(t,i){var n=new e.Event(this.tojQueryEvent(t,!0),{builder:this,value:i});return this.$el.triggerHandler(n,Array.prototype.slice.call(arguments,2)),n.value},trigger:function(t){var i=new e.Event(this.tojQueryEvent(t),{builder:this});return this.$el.triggerHandler(i,Array.prototype.slice.call(arguments,1)),i},on:function(e,t){return this.$el.on(this.tojQueryEvent(e),t),this},off:function(e,t){return this.$el.off(this.tojQueryEvent(e),t),this},once:function(e,t){return this.$el.one(this.tojQueryEvent(e),t),this},tojQueryEvent:function(e,t){return e.split(" ").map(function(e){return e+".queryBuilder"+(t?".filter":"")}).join(" ")}}),a.plugins={},a.defaults=function(t){return"object"!=typeof t?"string"==typeof t?"object"==typeof a.DEFAULTS[t]?e.extend(!0,{},a.DEFAULTS[t]):a.DEFAULTS[t]:e.extend(!0,{},a.DEFAULTS):void e.extendext(!0,"replace",a.DEFAULTS,t)},a.define=function(e,t,i){a.plugins[e]={fct:t,def:i||{}}},a.extend=function(t){e.extend(a.prototype,t)},a.prototype.initPlugins=function(){if(this.plugins){if(e.isArray(this.plugins)){var t={};this.plugins.forEach(function(e){t[e]=null}),this.plugins=t}Object.keys(this.plugins).forEach(function(t){t in a.plugins?(this.plugins[t]=e.extend(!0,{},a.plugins[t].def,this.plugins[t]||{}),a.plugins[t].fct.call(this,this.plugins[t])):h.error("Config",'Unable to find plugin "{0}"',t)},this)}},a.types={string:"string",integer:"number","double":"number",date:"datetime",time:"datetime",datetime:"datetime","boolean":"boolean"},a.inputs=["text","textarea","radio","checkbox","select"],a.modifiable_options=["display_errors","allow_groups","allow_empty","default_condition","default_filter"];var l=a.selectors={group_container:".rules-group-container",rule_container:".rule-container",filter_container:".rule-filter-container",operator_container:".rule-operator-container",value_container:".rule-value-container",error_container:".error-container",condition_container:".rules-group-header .group-conditions",rule_header:".rule-header",group_header:".rules-group-header",group_actions:".group-actions",rule_actions:".rule-actions",rules_list:".rules-group-body>.rules-list",group_condition:".rules-group-header [name$=_cond]",rule_filter:".rule-filter-container [name$=_filter]",rule_operator:".rule-operator-container [name$=_operator]",rule_value:".rule-value-container [name*=_value_]",add_rule:"[data-add=rule]",delete_rule:"[data-delete=rule]",add_group:"[data-add=group]",delete_group:"[data-delete=group]"};a.templates={},a.regional={},a.OPERATORS={equal:{type:"equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},not_equal:{type:"not_equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},"in":{type:"in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},not_in:{type:"not_in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},less:{type:"less",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},less_or_equal:{type:"less_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater:{type:"greater",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater_or_equal:{type:"greater_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},between:{type:"between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},not_between:{type:"not_between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},begins_with:{type:"begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_begins_with:{type:"not_begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},contains:{type:"contains",nb_inputs:1,multiple:!1,apply_to:["string"]},not_contains:{type:"not_contains",nb_inputs:1,multiple:!1,apply_to:["string"]},ends_with:{type:"ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_ends_with:{type:"not_ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},is_empty:{type:"is_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_not_empty:{type:"is_not_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_null:{type:"is_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]},is_not_null:{type:"is_not_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]}},a.DEFAULTS={filters:[],plugins:[],sort_filters:!1,display_errors:!0,allow_groups:-1,allow_empty:!1,conditions:["AND","OR"],default_condition:"AND",inputs_separator:" , ",select_placeholder:"------",display_empty_filter:!0,default_filter:null,optgroups:{},default_rule_flags:{filter_readonly:!1,operator_readonly:!1,value_readonly:!1,no_delete:!1},default_group_flags:{condition_readonly:!1,no_add_rule:!1,no_add_group:!1,no_delete:!1},templates:{group:null,rule:null,filterSelect:null,operatorSelect:null},lang_code:"en",lang:{},operators:["equal","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],icons:{add_group:"glyphicon glyphicon-plus-sign",add_rule:"glyphicon glyphicon-plus",remove_group:"glyphicon glyphicon-remove",remove_rule:"glyphicon glyphicon-remove",error:"glyphicon glyphicon-warning-sign"}},a.prototype.init=function(n,r){n[0].queryBuilder=this,this.$el=n,this.settings=e.extendext(!0,"replace",{},a.DEFAULTS,r),this.model=new i,this.status={group_id:0,rule_id:0,generated_id:!1,has_optgroup:!1,has_operator_oprgroup:!1,id:null},this.settings.allow_groups===!1?this.settings.allow_groups=0:this.settings.allow_groups===!0&&(this.settings.allow_groups=-1),this.filters=this.settings.filters,this.icons=this.settings.icons,this.operators=this.settings.operators,this.templates=this.settings.templates,this.plugins=this.settings.plugins,void 0===a.regional.en&&h.error("Config",'"i18n/en.js" not loaded.'),this.lang=e.extendext(!0,"replace",{},a.regional.en,a.regional[this.settings.lang_code],this.settings.lang),Object.keys(this.templates).forEach(function(e){this.templates[e]||(this.templates[e]=a.templates[e]),"string"==typeof this.templates[e]&&(this.templates[e]=t.template(this.templates[e]))},this),this.$el.attr("id")||(this.$el.attr("id","qb_"+Math.floor(99999*Math.random())),this.status.generated_id=!0),this.status.id=this.$el.attr("id"),this.$el.addClass("query-builder form-inline"),this.filters=this.checkFilters(this.filters),this.operators=this.checkOperators(this.operators),this.bindEvents(),this.initPlugins(),this.trigger("afterInit"),r.rules?(this.setRules(r.rules),delete this.settings.rules):this.setRoot(!0)},a.prototype.checkFilters=function(e){var t=[];if(e&&0!==e.length||h.error("Config","Missing filters list"),e.forEach(function(e,i){switch(e.id||h.error("Config","Missing filter {0} id",i),-1!=t.indexOf(e.id)&&h.error("Config",'Filter "{0}" already defined',e.id),t.push(e.id),e.type?a.types[e.type]||h.error("Config",'Invalid type "{0}"',e.type):e.type="string",e.input?"function"!=typeof e.input&&-1==a.inputs.indexOf(e.input)&&h.error("Config",'Invalid input "{0}"',e.input):e.input="text",e.operators&&e.operators.forEach(function(e){"string"!=typeof e&&h.error("Config","Filter operators must be global operators types (string)")}),e.field||(e.field=e.id),e.label||(e.label=e.field),e.optgroup?(this.status.has_optgroup=!0,this.settings.optgroups[e.optgroup]||(this.settings.optgroups[e.optgroup]=e.optgroup)):e.optgroup=null,e.input){case"radio":case"checkbox":(!e.values||e.values.length<1)&&h.error("Config",'Missing filter "{0}" values',e.id);break;case"select":e.placeholder&&(void 0===e.placeholder_value&&(e.placeholder_value=-1),h.iterateOptions(e.values,function(t){t==e.placeholder_value&&h.error("Config",'Placeholder of filter "{0}" overlaps with one of its values',e.id)}))}},this),this.settings.sort_filters)if("function"==typeof this.settings.sort_filters)e.sort(this.settings.sort_filters);else{var i=this;e.sort(function(e,t){return i.translateLabel(e.label).localeCompare(i.translateLabel(t.label))})}return this.status.has_optgroup&&(e=h.groupSort(e,"optgroup")),e},a.prototype.checkOperators=function(t){var i=[];return t.forEach(function(n,r){"string"==typeof n?(a.OPERATORS[n]||h.error("Config",'Unknown operator "{0}"',n),t[r]=n=e.extendext(!0,"replace",{},a.OPERATORS[n])):(n.type||h.error("Config",'Missing "type" for operator {0}',r),a.OPERATORS[n.type]&&(t[r]=n=e.extendext(!0,"replace",{},a.OPERATORS[n.type],n)),(void 0===n.nb_inputs||void 0===n.apply_to)&&h.error("Config",'Missing "nb_inputs" and/or "apply_to" for operator "{0}"',n.type)),-1!=i.indexOf(n.type)&&h.error("Config",'Operator "{0}" already defined',n.type),i.push(n.type),n.optgroup?(this.status.has_operator_optgroup=!0,this.settings.optgroups[n.optgroup]||(this.settings.optgroups[n.optgroup]=n.optgroup)):n.optgroup=null},this),this.status.has_operator_optgroup&&(t=h.groupSort(t,"optgroup")),t},a.prototype.bindEvents=function(){var t=this;this.$el.on("change.queryBuilder",l.group_condition,function(){if(e(this).is(":checked")){var t=e(this).closest(l.group_container);i(t).condition=e(this).val()}}),this.$el.on("change.queryBuilder",l.rule_filter,function(){var n=e(this).closest(l.rule_container);i(n).filter=t.getFilterById(e(this).val())}),this.$el.on("change.queryBuilder",l.rule_operator,function(){var n=e(this).closest(l.rule_container);i(n).operator=t.getOperatorByType(e(this).val())}),this.$el.on("click.queryBuilder",l.add_rule,function(){var n=e(this).closest(l.group_container);t.addRule(i(n))}),this.$el.on("click.queryBuilder",l.delete_rule,function(){var n=e(this).closest(l.rule_container);t.deleteRule(i(n))}),0!==this.settings.allow_groups&&(this.$el.on("click.queryBuilder",l.add_group,function(){var n=e(this).closest(l.group_container);t.addGroup(i(n))}),this.$el.on("click.queryBuilder",l.delete_group,function(){var n=e(this).closest(l.group_container);t.deleteGroup(i(n))})),this.model.on({drop:function(e,i){i.$el.remove(),t.refreshGroupsConditions()},add:function(e,i,n){0===n?i.$el.prependTo(i.parent.$el.find(">"+l.rules_list)):i.$el.insertAfter(i.parent.rules[n-1].$el),t.refreshGroupsConditions()},move:function(e,i,n,r){i.$el.detach(),0===r?i.$el.prependTo(n.$el.find(">"+l.rules_list)):i.$el.insertAfter(n.rules[r-1].$el),t.refreshGroupsConditions()},update:function(e,i,n,r,s){if(i instanceof u)switch(n){case"error":t.displayError(i);break;case"flags":t.applyRuleFlags(i);break;case"filter":t.updateRuleFilter(i,s);break;case"operator":t.updateRuleOperator(i,s);break;case"value":t.updateRuleValue(i)}else switch(n){case"error":t.displayError(i);break;case"flags":t.applyGroupFlags(i);break;case"condition":t.updateGroupCondition(i)}}})},a.prototype.setRoot=function(t,i,n){t=void 0===t||t===!0;var r=this.nextGroupId(),s=e(this.getGroupTemplate(r,1));return this.$el.append(s),this.model.root=new c(null,s),this.model.root.model=this.model,this.model.root.data=i,this.model.root.__.flags=e.extend({},this.settings.default_group_flags,n),this.trigger("afterAddGroup",this.model.root),this.model.root.condition=this.settings.default_condition,t&&this.addRule(this.model.root),this.model.root},a.prototype.addGroup=function(t,i,n,r){i=void 0===i||i===!0;var s=t.level+1,o=this.trigger("beforeAddGroup",t,i,s);if(o.isDefaultPrevented())return null;var a=this.nextGroupId(),l=e(this.getGroupTemplate(a,s)),d=t.addGroup(l);return d.data=n,d.__.flags=e.extend({},this.settings.default_group_flags,r),this.trigger("afterAddGroup",d),d.condition=this.settings.default_condition,i&&this.addRule(d),d},a.prototype.deleteGroup=function(e){if(e.isRoot())return!1;var t=this.trigger("beforeDeleteGroup",e);if(t.isDefaultPrevented())return!1;var i=!0;return e.each("reverse",function(e){i&=this.deleteRule(e)},function(e){i&=this.deleteGroup(e)},this),i&&(e.drop(),this.trigger("afterDeleteGroup")),i},a.prototype.updateGroupCondition=function(t){t.$el.find(">"+l.group_condition).each(function(){var i=e(this);i.prop("checked",i.val()===t.condition),i.parent().toggleClass("active",i.val()===t.condition)}),this.trigger("afterUpdateGroupCondition",t)},a.prototype.refreshGroupsConditions=function(){!function e(t){(!t.flags||t.flags&&!t.flags.condition_readonly)&&t.$el.find(">"+l.group_condition).prop("disabled",t.rules.length<=1).parent().toggleClass("disabled",t.rules.length<=1),t.each(function(e){},function(t){e(t);
},this)}(this.model.root)},a.prototype.addRule=function(t,i,n){var r=this.trigger("beforeAddRule",t);if(r.isDefaultPrevented())return null;var s=this.nextRuleId(),o=e(this.getRuleTemplate(s)),a=t.addRule(o);return void 0!==i&&(a.data=i),a.__.flags=e.extend({},this.settings.default_rule_flags,n),this.trigger("afterAddRule",a),this.createRuleFilters(a),(this.settings.default_filter||!this.settings.display_empty_filter)&&(a.filter=this.change("getDefaultFilter",this.getFilterById(this.settings.default_filter||this.filters[0].id),a)),a},a.prototype.deleteRule=function(e){if(e.flags.no_delete)return!1;var t=this.trigger("beforeDeleteRule",e);return t.isDefaultPrevented()?!1:(e.drop(),this.trigger("afterDeleteRule"),!0)},a.prototype.createRuleFilters=function(t){var i=this.change("getRuleFilters",this.filters,t),n=e(this.getRuleFilterSelect(t,i));t.$el.find(l.filter_container).html(n),this.trigger("afterCreateRuleFilters",t)},a.prototype.createRuleOperators=function(t){var i=t.$el.find(l.operator_container).empty();if(t.filter){var n=this.getOperators(t.filter),r=e(this.getRuleOperatorSelect(t,n));i.html(r),t.__.operator=n[0],this.trigger("afterCreateRuleOperators",t,n)}},a.prototype.createRuleInput=function(t){var i=t.$el.find(l.value_container).empty();if(t.__.value=void 0,t.filter&&t.operator&&0!==t.operator.nb_inputs){for(var n=this,r=e(),s=t.filter,o=0;o<t.operator.nb_inputs;o++){var a=e(this.getRuleInput(t,o));o>0&&i.append(this.settings.inputs_separator),i.append(a),r=r.add(a)}i.show(),r.on("change "+(s.input_event||""),function(){this._updating_input||(t._updating_value=!0,t.value=n.getRuleInputValue(t),t._updating_value=!1)}),s.plugin&&r[s.plugin](s.plugin_config||{}),this.trigger("afterCreateRuleInput",t),void 0!==s.default_value?t.value=s.default_value:(t._updating_value=!0,t.value=n.getRuleInputValue(t),t._updating_value=!1)}},a.prototype.updateRuleFilter=function(e,t){this.createRuleOperators(e),this.createRuleInput(e),e.$el.find(l.rule_filter).val(e.filter?e.filter.id:"-1"),t&&e.filter&&t.id!==e.filter.id&&(e.data=void 0),this.trigger("afterUpdateRuleFilter",e)},a.prototype.updateRuleOperator=function(e,t){var i=e.$el.find(l.value_container);e.operator&&0!==e.operator.nb_inputs?(i.show(),(i.is(":empty")||!t||e.operator.nb_inputs!==t.nb_inputs)&&this.createRuleInput(e)):(i.hide(),e.__.value=void 0),e.operator&&e.$el.find(l.rule_operator).val(e.operator.type),this.trigger("afterUpdateRuleOperator",e),this.updateRuleValue(e)},a.prototype.updateRuleValue=function(e){e._updating_value||this.setRuleInputValue(e,e.value),this.trigger("afterUpdateRuleValue",e)},a.prototype.applyRuleFlags=function(e){var t=e.flags;t.filter_readonly&&e.$el.find(l.rule_filter).prop("disabled",!0),t.operator_readonly&&e.$el.find(l.rule_operator).prop("disabled",!0),t.value_readonly&&e.$el.find(l.rule_value).prop("disabled",!0),t.no_delete&&e.$el.find(l.delete_rule).remove(),this.trigger("afterApplyRuleFlags",e)},a.prototype.applyGroupFlags=function(e){var t=e.flags;t.condition_readonly&&e.$el.find(">"+l.group_condition).prop("disabled",!0).parent().addClass("readonly"),t.no_add_rule&&e.$el.find(l.add_rule).remove(),t.no_add_group&&e.$el.find(l.add_group).remove(),t.no_delete&&e.$el.find(l.delete_group).remove(),this.trigger("afterApplyGroupFlags",e)},a.prototype.clearErrors=function(e){e=e||this.model.root,e&&(e.error=null,e instanceof c&&e.each(function(e){e.error=null},function(e){this.clearErrors(e)},this))},a.prototype.displayError=function(e){if(this.settings.display_errors)if(null===e.error)e.$el.removeClass("has-error");else{var t=this.lang.errors[e.error[0]]||e.error[0];t=h.fmt(t,e.error.slice(1)),t=this.change("displayError",t,e.error,e),e.$el.addClass("has-error").find(l.error_container).eq(0).attr("title",t)}},a.prototype.triggerValidationError=function(t,i,n){e.isArray(i)||(i=[i]);var r=this.trigger("validationError",t,i,n);r.isDefaultPrevented()||(t.error=i)},a.prototype.destroy=function(){this.trigger("beforeDestroy"),this.status.generated_id&&this.$el.removeAttr("id"),this.clear(),this.model=null,this.$el.off(".queryBuilder").removeClass("query-builder").removeData("queryBuilder"),delete this.$el[0].queryBuilder},a.prototype.reset=function(){this.status.group_id=1,this.status.rule_id=0,this.model.root.empty(),this.addRule(this.model.root),this.trigger("afterReset")},a.prototype.clear=function(){this.status.group_id=0,this.status.rule_id=0,this.model.root&&(this.model.root.drop(),this.model.root=null),this.trigger("afterClear")},a.prototype.setOptions=function(t){e.each(t,function(e,t){-1!==a.modifiable_options.indexOf(e)&&(this.settings[e]=t)}.bind(this))},a.prototype.getModel=function(e){return e?i(e):this.model.root},a.prototype.validate=function(){this.clearErrors();var e=this,t=function i(t){var n=0,r=0;return t.each(function(t){if(!t.filter)return e.triggerValidationError(t,"no_filter",null),void r++;if(!t.operator)return e.triggerValidationError(t,"no_operator",null),void r++;if(0!==t.operator.nb_inputs){var i=e.validateValue(t,t.value);if(i!==!0)return e.triggerValidationError(t,i,t.value),void r++}n++},function(e){i(e)?n++:r++}),r>0?!1:0!==n||e.settings.allow_empty&&t.isRoot()?!0:(e.triggerValidationError(t,"empty_group",null),!1)}(this.model.root);return this.change("validate",t)},a.prototype.getRules=function(t){t=e.extend({get_flags:!1,allow_invalid:!1},t);var i=this.validate();if(!i&&!t.allow_invalid)return null;var n=this,r=function s(i){var r={condition:i.condition,rules:[]};if(i.data&&(r.data=e.extendext(!0,"replace",{},i.data)),t.get_flags){var o=n.getGroupFlags(i.flags,"all"===t.get_flags);e.isEmptyObject(o)||(r.flags=o)}return i.each(function(i){var s=null;i.operator&&0===i.operator.nb_inputs||(s=i.value);var o={id:i.filter?i.filter.id:null,field:i.filter?i.filter.field:null,type:i.filter?i.filter.type:null,input:i.filter?i.filter.input:null,operator:i.operator?i.operator.type:null,value:s};if((i.filter&&i.filter.data||i.data)&&(o.data=e.extendext(!0,"replace",{},i.filter.data,i.data)),t.get_flags){var a=n.getRuleFlags(i.flags,"all"===t.get_flags);e.isEmptyObject(a)||(o.flags=a)}r.rules.push(n.change("ruleToJson",o,i))},function(e){r.rules.push(s(e))},this),n.change("groupToJson",r,i)}(this.model.root);return r.valid=i,this.change("getRules",r)},a.prototype.setRules=function(t,i){i=e.extend({allow_invalid:!1},i),e.isArray(t)&&(t={condition:this.settings.default_condition,rules:t}),t&&t.rules&&(0!==t.rules.length||this.settings.allow_empty)||h.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,t.data,this.parseGroupFlags(t)),this.applyGroupFlags(this.model.root),t=this.change("setRules",t);var n=this;!function r(e,t){null!==t&&(void 0===e.condition?e.condition=n.settings.default_condition:-1==n.settings.conditions.indexOf(e.condition)&&(h.error(!i.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',e.condition),e.condition=n.settings.default_condition),t.condition=e.condition,e.rules.forEach(function(e){var s;if(void 0!==e.rules)if(-1!==n.settings.allow_groups&&n.settings.allow_groups<t.level)h.error(!i.allow_invalid,"RulesParse","No more than {0} groups are allowed",n.settings.allow_groups),n.reset();else{if(s=n.addGroup(t,!1,e.data,n.parseGroupFlags(e)),null===s)return;n.applyGroupFlags(s),r(e,s)}else{if(e.empty||(void 0===e.id&&(h.error(!i.allow_invalid,"RulesParse","Missing rule field id"),e.empty=!0),void 0===e.operator&&(e.operator="equal")),s=n.addRule(t,e.data,n.parseRuleFlags(e)),null===s)return;e.empty||(s.filter=n.getFilterById(e.id,!i.allow_invalid),s.filter&&(s.operator=n.getOperatorByType(e.operator,!i.allow_invalid),s.operator||(s.operator=n.getOperators(s.filter)[0]),s.operator&&0!==s.operator.nb_inputs&&void 0!==e.value&&(s.value=e.value))),n.applyRuleFlags(s),n.change("jsonToRule",s,e)!=s&&h.error("RulesParse","Plugin tried to change rule reference")}}),n.change("jsonToGroup",t,e)!=t&&h.error("RulesParse","Plugin tried to change group reference"))}(t,this.model.root)},a.prototype.validateValue=function(e,t){var i=e.filter.validation||{},n=!0;return n=i.callback?i.callback.call(this,t,e):this.validateValueInternal(e,t),this.change("validateValue",n,t,e)},a.prototype.validateValueInternal=function(e,t){var i,n=e.filter,r=e.operator,s=n.validation||{},o=!0;1===e.operator.nb_inputs&&(t=[t]);for(var l=0;l<r.nb_inputs;l++){switch(n.input){case"radio":if(void 0===t[l]||0===t[l].length){s.allow_empty_value||(o=["radio_empty"]);break}break;case"checkbox":if(void 0===t[l]||0===t[l].length){s.allow_empty_value||(o=["checkbox_empty"]);break}if(!r.multiple&&t[l].length>1){o=["operator_not_multiple",r.type];break}break;case"select":if(void 0===t[l]||0===t[l].length||n.placeholder&&t[l]==n.placeholder_value){s.allow_empty_value||(o=["select_empty"]);break}if(n.multiple&&!r.multiple&&t[l].length>1){o=["operator_not_multiple",r.type];break}break;default:switch(a.types[n.type]){case"string":if(void 0===t[l]||0===t[l].length){s.allow_empty_value||(o=["string_empty"]);break}if(void 0!==s.min&&t[l].length<parseInt(s.min)){o=[this.getValidationMessage(s,"min","string_exceed_min_length"),s.min];break}if(void 0!==s.max&&t[l].length>parseInt(s.max)){o=[this.getValidationMessage(s,"max","string_exceed_max_length"),s.max];break}if(s.format&&("string"==typeof s.format&&(s.format=new RegExp(s.format)),!s.format.test(t[l]))){o=[this.getValidationMessage(s,"format","string_invalid_format"),s.format];break}break;case"number":if(void 0===t[l]||0===t[l].length){s.allow_empty_value||(o=["number_nan"]);break}if(isNaN(t[l])){o=["number_nan"];break}if("integer"==n.type){if(parseInt(t[l])!=t[l]){o=["number_not_integer"];break}}else if(parseFloat(t[l])!=t[l]){o=["number_not_double"];break}if(void 0!==s.min&&t[l]<parseFloat(s.min)){o=[this.getValidationMessage(s,"min","number_exceed_min"),s.min];break}if(void 0!==s.max&&t[l]>parseFloat(s.max)){o=[this.getValidationMessage(s,"max","number_exceed_max"),s.max];break}if(void 0!==s.step&&"any"!==s.step){var d=(t[l]/s.step).toPrecision(14);if(parseInt(d)!=d){o=[this.getValidationMessage(s,"step","number_wrong_step"),s.step];break}}break;case"datetime":if(void 0===t[l]||0===t[l].length){s.allow_empty_value||(o=["datetime_empty"]);break}if(s.format){"moment"in window||h.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com");var c=moment(t[l],s.format);if(!c.isValid()){o=[this.getValidationMessage(s,"format","datetime_invalid"),s.format];break}if(s.min&&c<moment(s.min,s.format)){o=[this.getValidationMessage(s,"min","datetime_exceed_min"),s.min];break}if(s.max&&c>moment(s.max,s.format)){o=[this.getValidationMessage(s,"max","datetime_exceed_max"),s.max];break}}break;case"boolean":if(void 0===t[l]||0===t[l].length){s.allow_empty_value||(o=["boolean_not_valid"]);break}if(i=(""+t[l]).trim().toLowerCase(),"true"!==i&&"false"!==i&&"1"!==i&&"0"!==i&&1!==t[l]&&0!==t[l]){o=["boolean_not_valid"];break}}}if(o!==!0)break}return o},a.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++},a.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++},a.prototype.getOperators=function(e){"string"==typeof e&&(e=this.getFilterById(e));for(var t=[],i=0,n=this.operators.length;n>i;i++){if(e.operators){if(-1==e.operators.indexOf(this.operators[i].type))continue}else if(-1==this.operators[i].apply_to.indexOf(a.types[e.type]))continue;t.push(this.operators[i])}return e.operators&&t.sort(function(t,i){return e.operators.indexOf(t.type)-e.operators.indexOf(i.type)}),this.change("getOperators",t,e)},a.prototype.getFilterById=function(e,t){if("-1"==e)return null;for(var i=0,n=this.filters.length;n>i;i++)if(this.filters[i].id==e)return this.filters[i];return h.error(t!==!1,"UndefinedFilter",'Undefined filter "{0}"',e),null},a.prototype.getOperatorByType=function(e,t){if("-1"==e)return null;for(var i=0,n=this.operators.length;n>i;i++)if(this.operators[i].type==e)return this.operators[i];return h.error(t!==!1,"UndefinedOperator",'Undefined operator "{0}"',e),null},a.prototype.getRuleInputValue=function(t){var i=t.filter,n=t.operator,r=[];if(i.valueGetter)r=i.valueGetter.call(this,t);else{for(var s=t.$el.find(l.value_container),o=0;o<n.nb_inputs;o++){var a,d=h.escapeElementId(t.id+"_value_"+o);switch(i.input){case"radio":r.push(s.find("[name="+d+"]:checked").val());break;case"checkbox":a=[],s.find("[name="+d+"]:checked").each(function(){a.push(e(this).val())}),r.push(a);break;case"select":i.multiple?(a=[],s.find("[name="+d+"] option:selected").each(function(){a.push(e(this).val())}),r.push(a)):r.push(s.find("[name="+d+"] option:selected").val());break;default:r.push(s.find("[name="+d+"]").val())}}n.multiple&&i.value_separator&&(r=r.map(function(e){return e.split(i.value_separator)})),1===n.nb_inputs&&(r=r[0]),i.valueParser&&(r=i.valueParser.call(this,t,r))}return this.change("getRuleValue",r,t)},a.prototype.setRuleInputValue=function(t,i){var n=t.filter,r=t.operator;if(n&&r){if(this._updating_input=!0,n.valueSetter)n.valueSetter.call(this,t,i);else{var s=t.$el.find(l.value_container);1==r.nb_inputs&&(i=[i]);for(var o=0;o<r.nb_inputs;o++){var a=h.escapeElementId(t.id+"_value_"+o);switch(n.input){case"radio":s.find("[name="+a+'][value="'+i[o]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":e.isArray(i[o])||(i[o]=[i[o]]),i[o].forEach(function(e){s.find("[name="+a+'][value="'+e+'"]').prop("checked",!0).trigger("change")});break;default:r.multiple&&n.value_separator&&e.isArray(i[o])&&(i[o]=i[o].join(n.value_separator)),s.find("[name="+a+"]").val(i[o]).trigger("change")}}}this._updating_input=!1}},a.prototype.parseRuleFlags=function(t){var i=e.extend({},this.settings.default_rule_flags);return t.readonly&&e.extend(i,{filter_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0}),t.flags&&e.extend(i,t.flags),this.change("parseRuleFlags",i,t)},a.prototype.getRuleFlags=function(t,i){if(i)return e.extend({},t);var n={};return e.each(this.settings.default_rule_flags,function(e,i){t[e]!==i&&(n[e]=t[e])}),n},a.prototype.parseGroupFlags=function(t){var i=e.extend({},this.settings.default_group_flags);return t.readonly&&e.extend(i,{condition_readonly:!0,no_add_rule:!0,no_add_group:!0,no_delete:!0}),t.flags&&e.extend(i,t.flags),this.change("parseGroupFlags",i,t)},a.prototype.getGroupFlags=function(t,i){if(i)return e.extend({},t);var n={};return e.each(this.settings.default_group_flags,function(e,i){t[e]!==i&&(n[e]=t[e])}),n},a.prototype.translateLabel=function(e){return"object"==typeof e?e[this.settings.lang_code]||e.en:e},a.prototype.getValidationMessage=function(e,t,i){return e.messages&&e.messages[t]||i},a.templates.group='<dl id="{{= it.group_id }}" class="rules-group-container">   <dt class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-success" data-add="rule">         <i class="{{= it.icons.add_rule }}"></i> {{= it.lang.add_rule }}       </button>       {{? it.settings.allow_groups===-1 || it.settings.allow_groups>=it.level }}         <button type="button" class="btn btn-xs btn-success" data-add="group">           <i class="{{= it.icons.add_group }}"></i> {{= it.lang.add_group }}         </button>       {{?}}       {{? it.level>1 }}         <button type="button" class="btn btn-xs btn-danger" data-delete="group">           <i class="{{= it.icons.remove_group }}"></i> {{= it.lang.delete_group }}         </button>       {{?}}     </div>     <div class="btn-group group-conditions">       {{~ it.conditions: condition }}         <label class="btn btn-xs btn-primary">           <input type="radio" name="{{= it.group_id }}_cond" value="{{= condition }}"> {{= it.lang.conditions[condition] || condition }}         </label>       {{~}}     </div>     {{? it.settings.display_errors }}       <div class="error-container"><i class="{{= it.icons.error }}"></i></div>     {{?}}   </dt>   <dd class=rules-group-body>     <ul class=rules-list></ul>   </dd> </dl>',a.templates.rule='<li id="{{= it.rule_id }}" class="rule-container">   <div class="rule-header">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-xs btn-danger" data-delete="rule">         <i class="{{= it.icons.remove_rule }}"></i> {{= it.lang.delete_rule }}       </button>     </div>   </div>   {{? it.settings.display_errors }}     <div class="error-container"><i class="{{= it.icons.error }}"></i></div>   {{?}}   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </li>',a.templates.filterSelect='{{ var optgroup = null; }} <select class="form-control" name="{{= it.rule.id }}_filter">   {{? it.settings.display_empty_filter }}     <option value="-1">{{= it.settings.select_placeholder }}</option>   {{?}}   {{~ it.filters: filter }}     {{? optgroup !== filter.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = filter.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= filter.id }}">{{= it.translate(filter.label) }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',a.templates.operatorSelect='{{? it.operators.length === 1 }} <span> {{= it.lang.operators[it.operators[0].type] || it.operators[0].type }} </span> {{?}} {{ var optgroup = null; }} <select class="form-control {{? it.operators.length === 1 }}hide{{?}}" name="{{= it.rule.id }}_operator">   {{~ it.operators: operator }}     {{? optgroup !== operator.optgroup }}       {{? optgroup !== null }}</optgroup>{{?}}       {{? (optgroup = operator.optgroup) !== null }}         <optgroup label="{{= it.translate(it.settings.optgroups[optgroup]) }}">       {{?}}     {{?}}     <option value="{{= operator.type }}">{{= it.lang.operators[operator.type] || operator.type }}</option>   {{~}}   {{? optgroup !== null }}</optgroup>{{?}} </select>',a.prototype.getGroupTemplate=function(e,t){var i=this.templates.group({builder:this,group_id:e,level:t,conditions:this.settings.conditions,icons:this.icons,lang:this.lang,settings:this.settings});return this.change("getGroupTemplate",i,t)},a.prototype.getRuleTemplate=function(e){var t=this.templates.rule({builder:this,rule_id:e,icons:this.icons,lang:this.lang,settings:this.settings});return this.change("getRuleTemplate",t)},a.prototype.getRuleFilterSelect=function(e,t){var i=this.templates.filterSelect({builder:this,rule:e,filters:t,icons:this.icons,lang:this.lang,settings:this.settings,translate:this.translateLabel});return this.change("getRuleFilterSelect",i,e)},a.prototype.getRuleOperatorSelect=function(e,t){var i=this.templates.operatorSelect({builder:this,rule:e,operators:t,icons:this.icons,lang:this.lang,settings:this.settings,translate:this.translateLabel});return this.change("getRuleOperatorSelect",i,e)},a.prototype.getRuleInput=function(e,t){var i=e.filter,n=e.filter.validation||{},r=e.id+"_value_"+t,s=i.vertical?" class=block":"",o="";if("function"==typeof i.input)o=i.input.call(this,e,r);else switch(i.input){case"radio":case"checkbox":h.iterateOptions(i.values,function(e,t){o+="<label"+s+'><input type="'+i.input+'" name="'+r+'" value="'+e+'"> '+t+"</label> "});break;case"select":o+='<select class="form-control" name="'+r+'"'+(i.multiple?" multiple":"")+">",i.placeholder&&(o+='<option value="'+i.placeholder_value+'" disabled selected>'+i.placeholder+"</option>"),h.iterateOptions(i.values,function(e,t){o+='<option value="'+e+'">'+t+"</option> "}),o+="</select>";break;case"textarea":o+='<textarea class="form-control" name="'+r+'"',i.size&&(o+=' cols="'+i.size+'"'),i.rows&&(o+=' rows="'+i.rows+'"'),void 0!==n.min&&(o+=' minlength="'+n.min+'"'),void 0!==n.max&&(o+=' maxlength="'+n.max+'"'),i.placeholder&&(o+=' placeholder="'+i.placeholder+'"'),o+="></textarea>";break;default:switch(a.types[i.type]){case"number":o+='<input class="form-control" type="number" name="'+r+'"',void 0!==n.step&&(o+=' step="'+n.step+'"'),void 0!==n.min&&(o+=' min="'+n.min+'"'),void 0!==n.max&&(o+=' max="'+n.max+'"'),i.placeholder&&(o+=' placeholder="'+i.placeholder+'"'),i.size&&(o+=' size="'+i.size+'"'),o+=">";break;default:o+='<input class="form-control" type="text" name="'+r+'"',i.placeholder&&(o+=' placeholder="'+i.placeholder+'"'),"string"===i.type&&void 0!==n.min&&(o+=' minlength="'+n.min+'"'),"string"===i.type&&void 0!==n.max&&(o+=' maxlength="'+n.max+'"'),i.size&&(o+=' size="'+i.size+'"'),o+=">"}}return this.change("getRuleInput",o,e,r)},e.extend(i.prototype,{trigger:function(e){return this.$.triggerHandler(e,Array.prototype.slice.call(arguments,1)),this},on:function(){return this.$.on.apply(this.$,Array.prototype.slice.call(arguments)),this},off:function(){return this.$.off.apply(this.$,Array.prototype.slice.call(arguments)),this},once:function(){return this.$.one.apply(this.$,Array.prototype.slice.call(arguments)),this}}),i.getModel=function(t){return t?t instanceof d?t:e(t).data("queryBuilderModel"):null},i.defineModelProperties=function(t,i){i.forEach(function(i){Object.defineProperty(t.prototype,i,{enumerable:!0,get:function(){return this.__[i]},set:function(t){var n=null!==this.__[i]&&"object"==typeof this.__[i]?e.extend({},this.__[i]):this.__[i];this.__[i]=t,null!==this.model&&this.model.trigger("update",this,i,t,n)}})})};var d=function(e,t){return this instanceof d?(Object.defineProperty(this,"__",{value:{}}),t.data("queryBuilderModel",this),this.__.level=1,this.__.error=null,this.__.data=void 0,this.$el=t,this.id=t[0].id,this.model=null,void(this.parent=e)):new d};i.defineModelProperties(d,["level","error","data","flags"]),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){return this.__.parent},set:function(e){this.__.parent=e,this.level=null===e?1:e.level+1,this.model=null===e?null:e.model}}),d.prototype.isRoot=function(){return 1===this.level},d.prototype.getPos=function(){return this.isRoot()?-1:this.parent.getNodePos(this)},d.prototype.drop=function(){var e=this.model;this.isRoot()||this.parent._removeNode(this),null!==e&&e.trigger("drop",this)},d.prototype.moveAfter=function(e){return this.isRoot()?void 0:(this._move(e.parent,e.getPos()+1),this)},d.prototype.moveAtBegin=function(e){return this.isRoot()?void 0:(void 0===e&&(e=this.parent),this._move(e,0),this)},d.prototype.moveAtEnd=function(e){return this.isRoot()?void 0:(void 0===e&&(e=this.parent),this._move(e,0===e.length()?0:e.length()-1),this)},d.prototype._move=function(e,t){this.parent._removeNode(this),e._appendNode(this,t,!1),null!==this.model&&this.model.trigger("move",this,e,t)};var c=function(e,t){return this instanceof c?(d.call(this,e,t),this.rules=[],void(this.__.condition=null)):new c(e,t)};c.prototype=Object.create(d.prototype),c.prototype.constructor=c,i.defineModelProperties(c,["condition"]),c.prototype.empty=function(){this.each("reverse",function(e){e.drop()},function(e){e.drop()})},c.prototype.drop=function(){this.empty(),d.prototype.drop.call(this)},c.prototype.length=function(){return this.rules.length},c.prototype._appendNode=function(e,t,i){return void 0===t&&(t=this.length()),this.rules.splice(t,0,e),e.parent=this,i&&null!==this.model&&this.model.trigger("add",e,t),e},c.prototype.addGroup=function(e,t){return this._appendNode(new c(this,e),t,!0)},c.prototype.addRule=function(e,t){return this._appendNode(new u(this,e),t,!0)},c.prototype._removeNode=function(e){var t=this.getNodePos(e);return-1!==t&&(e.parent=null,this.rules.splice(t,1)),this},c.prototype.getNodePos=function(e){return this.rules.indexOf(e)},c.prototype.each=function(e,t,i,n){"function"==typeof e&&(n=i,i=t,t=e,e=!1),n=void 0===n?null:n;for(var r=e?this.rules.length-1:0,s=e?0:this.rules.length-1,o=e?-1:1,a=function(){return e?r>=s:s>=r},l=!1;a()&&(this.rules[r]instanceof c?void 0!==i&&(l=i.call(n,this.rules[r])===!1):l=t.call(n,this.rules[r])===!1,!l);r+=o);return!l},c.prototype.contains=function(e,t){return-1!==this.getNodePos(e)?!0:t?!this.each(function(e){return!0},function(t){return!t.contains(e,!0)}):!1};var u=function(e,t){return this instanceof u?(d.call(this,e,t),this._updating_value=!1,this._updating_input=!1,this.__.filter=null,this.__.operator=null,this.__.flags={},void(this.__.value=void 0)):new u(e,t)};u.prototype=Object.create(d.prototype),u.prototype.constructor=u,i.defineModelProperties(u,["filter","operator","value"]),a.Group=c,a.Rule=u;var h=a.utils={};h.iterateOptions=function(t,i){t&&(e.isArray(t)?t.forEach(function(t){e.isPlainObject(t)?e.each(t,function(e,t){return i(e,t),!1}):i(t,t)}):e.each(t,function(e,t){i(e,t)}))},h.fmt=function(e,t){return Array.isArray(t)||(t=Array.prototype.slice.call(arguments,1)),e.replace(/{([0-9]+)}/g,function(e,i){return t[parseInt(i)]})},h.error=function(){var e=0,t="boolean"==typeof arguments[e]?arguments[e++]:!0,i=arguments[e++],n=arguments[e++],r=Array.isArray(arguments[e])?arguments[e]:Array.prototype.slice.call(arguments,e);if(t){var s=new Error(h.fmt(n,r));throw s.name=i+"Error",s.args=r,s}console.error(i+"Error: "+h.fmt(n,r))},h.changeType=function(e,t,i){switch(t){case"integer":return parseInt(e);case"double":return parseFloat(e);case"boolean":var n="true"===e.trim().toLowerCase()||"1"===e.trim()||1===e;return i?n?1:0:n;default:return e}},h.escapeString=function(e){return"string"!=typeof e?e:e.replace(/[\0\n\r\b\\\'\"]/g,function(e){switch(e){case"\x00":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";default:return"\\"+e}}).replace(/\t/g,"\\t").replace(/\x1a/g,"\\Z")},h.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},h.escapeElementId=function(e){return e?e.replace(/(\\)?([:.\[\],])/g,function(e,t,i){return t?e:"\\"+i}):e},h.groupSort=function(e,t){var i=[],n=[];return e.forEach(function(e){var r;e[t]?(r=i.lastIndexOf(e[t]),-1==r?r=i.length:r++):r=i.length,i.splice(r,0,e[t]),n.splice(r,0,e)}),n},e.fn.queryBuilder=function(e){0===this.length&&h.error("Config","No target defined"),this.length>1&&h.error("Config","Unable to initialize on multiple target");var t=this.data("queryBuilder"),i="object"==typeof e&&e||{};return t||"destroy"!=e?(t||this.data("queryBuilder",new a(this,i)),"string"==typeof e?t[e].apply(t,Array.prototype.slice.call(arguments,1)):this):this},e.fn.queryBuilder.constructor=a,e.fn.queryBuilder.defaults=a.defaults,e.fn.queryBuilder.extend=a.extend,e.fn.queryBuilder.define=a.define,e.fn.queryBuilder.regional=a.regional,a.define("bt-checkbox",function(e){if("glyphicons"==e.font){var t=document.createElement("style");t.innerHTML='.checkbox input[type=checkbox]:checked + label:after {     font-family: "Glyphicons Halflings";     content: "\\e013"; } .checkbox label:after {     padding-left: 4px;     padding-top: 2px;     font-size: 9px; }',document.body.appendChild(t)}this.on("getRuleInput.filter",function(t,i,n){var r=i.filter;if(("radio"===r.input||"checkbox"===r.input)&&!r.plugin){t.value="",r.colors||(r.colors={}),r.color&&(r.colors._def_=r.color);var s=r.vertical?' style="display:block"':"",o=0;h.iterateOptions(r.values,function(i,a){var l=r.colors[i]||r.colors._def_||e.color,d=n+"_"+o++;t.value+="<div"+s+' class="'+r.input+" "+r.input+"-"+l+'">   <input type="'+r.input+'" name="'+n+'" id="'+d+'" value="'+i+'">   <label for="'+d+'">'+a+"</label> </div>"})}})},{font:"glyphicons",color:"default"}),a.define("bt-selectpicker",function(t){e.fn.selectpicker&&e.fn.selectpicker.Constructor||h.error("MissingLibrary",'Bootstrap Select is required to use "bt-selectpicker" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select'),this.on("afterCreateRuleFilters",function(e,i){i.$el.find(l.rule_filter).removeClass("form-control").selectpicker(t)}),this.on("afterCreateRuleOperators",function(e,i){i.$el.find(l.rule_operator).removeClass("form-control").selectpicker(t)}),this.on("afterUpdateRuleFilter",function(e,t){t.$el.find(l.rule_filter).selectpicker("render")}),this.on("afterUpdateRuleOperator",function(e,t){t.$el.find(l.rule_operator).selectpicker("render")})},{container:"body",style:"btn-inverse btn-xs",width:"auto",showIcon:!1}),a.define("bt-tooltip-errors",function(t){e.fn.tooltip&&e.fn.tooltip.Constructor&&e.fn.tooltip.Constructor.prototype.fixTitle||h.error("MissingLibrary",'Bootstrap Tooltip is required to use "bt-tooltip-errors" plugin. Get it here: http://getbootstrap.com');var i=this;this.on("getRuleTemplate.filter getGroupTemplate.filter",function(t){var i=e(t.value);i.find(l.error_container).attr("data-toggle","tooltip"),t.value=i.prop("outerHTML")}),this.model.on("update",function(e,n,r){"error"==r&&i.settings.display_errors&&n.$el.find(l.error_container).eq(0).tooltip(t).tooltip("hide").tooltip("fixTitle")})},{placement:"right"}),a.extend({setFilters:function(e,t){var i=this;void 0===t&&(t=e,e=!1),t=this.checkFilters(t),t=this.change("setFilters",t);var n=t.map(function(e){return e.id});if(e||!function s(e){e.each(function(e){e.filter&&-1===n.indexOf(e.filter.id)&&h.error("ChangeFilter",'A rule is using filter "{0}"',e.filter.id)},s)}(this.model.root),this.filters=t,function o(e){e.each(!0,function(e){e.filter&&-1===n.indexOf(e.filter.id)?e.drop():(i.createRuleFilters(e),e.$el.find(l.rule_filter).val(e.filter?e.filter.id:"-1"),i.trigger("afterUpdateRuleFilter",e))},o)}(this.model.root),this.settings.plugins&&(this.settings.plugins["unique-filter"]&&this.updateDisabledFilters(),this.settings.plugins["bt-selectpicker"]&&this.$el.find(l.rule_filter).selectpicker("render")),this.settings.default_filter)try{this.getFilterById(this.settings.default_filter)}catch(r){this.settings.default_filter=null}this.trigger("afterSetFilters",t)},addFilter:function(t,i){void 0===i||"#end"==i?i=this.filters.length:"#start"==i&&(i=0),e.isArray(t)||(t=[t]);var n=e.extend(!0,[],this.filters);parseInt(i)==i?Array.prototype.splice.apply(n,[i,0].concat(t)):this.filters.some(function(e,t){return e.id==i?(i=t+1,!0):void 0})?Array.prototype.splice.apply(n,[i,0].concat(t)):Array.prototype.push.apply(n,t),this.setFilters(n)},removeFilter:function(t,i){var n=e.extend(!0,[],this.filters);"string"==typeof t&&(t=[t]),n=n.filter(function(e){return-1===t.indexOf(e.id)}),this.setFilters(i,n)}}),a.define("filter-description",function(t){"inline"===t.mode?this.on("afterUpdateRuleFilter",function(i,n){var r=n.$el.find("p.filter-description");n.filter&&n.filter.description?(0===r.length?(r=e('<p class="filter-description"></p>'),r.appendTo(n.$el)):r.show(),r.html('<i class="'+t.icon+'"></i> '+n.filter.description)):r.hide()}):"popover"===t.mode?(e.fn.popover&&e.fn.popover.Constructor&&e.fn.popover.Constructor.prototype.fixTitle||h.error("MissingLibrary",'Bootstrap Popover is required to use "filter-description" plugin. Get it here: http://getbootstrap.com'),this.on("afterUpdateRuleFilter",function(i,n){var r=n.$el.find("button.filter-description");n.filter&&n.filter.description?(0===r.length?(r=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="popover"><i class="'+t.icon+'"></i></button>'),r.prependTo(n.$el.find(l.rule_actions)),r.popover({placement:"left",container:"body",html:!0}),r.on("mouseout",function(){r.popover("hide")})):r.show(),r.data("bs.popover").options.content=n.filter.description,r.attr("aria-describedby")&&r.popover("show")):(r.hide(),r.data("bs.popover")&&r.popover("hide"))})):"bootbox"===t.mode&&("bootbox"in window||h.error("MissingLibrary",'Bootbox is required to use "filter-description" plugin. Get it here: http://bootboxjs.com'),this.on("afterUpdateRuleFilter",function(i,n){var r=n.$el.find("button.filter-description");n.filter&&n.filter.description?(0===r.length&&(r=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="bootbox"><i class="'+t.icon+'"></i></button>'),r.prependTo(n.$el.find(l.rule_actions)),r.on("click",function(){bootbox.alert(r.data("description"))})),r.data("description",n.filter.description)):r.hide()}))},{icon:"glyphicon glyphicon-info-sign",mode:"popover"}),a.defaults({operatorOpposites:{
equal:"not_equal",not_equal:"equal","in":"not_in",not_in:"in",less:"greater_or_equal",less_or_equal:"greater",greater:"less_or_equal",greater_or_equal:"less",between:"not_between",not_between:"between",begins_with:"not_begins_with",not_begins_with:"begins_with",contains:"not_contains",not_contains:"contains",ends_with:"not_ends_with",not_ends_with:"ends_with",is_empty:"is_not_empty",is_not_empty:"is_empty",is_null:"is_not_null",is_not_null:"is_null"},conditionOpposites:{AND:"OR",OR:"AND"}}),a.define("invert",function(t){var n=this;this.on("afterInit",function(){n.$el.on("click.queryBuilder","[data-invert=group]",function(){var r=e(this).closest(l.group_container);n.invert(i(r),t)}),t.display_rules_button&&t.invert_rules&&n.$el.on("click.queryBuilder","[data-invert=rule]",function(){var r=e(this).closest(l.rule_container);n.invert(i(r),t)})}),this.on("getGroupTemplate.filter",function(i,r){var s=e(i.value);s.find(l.condition_container).after('<button type="button" class="btn btn-xs btn-default" data-invert="group"><i class="'+t.icon+'"></i> '+n.lang.invert+"</button>"),i.value=s.prop("outerHTML")}),t.display_rules_button&&t.invert_rules&&this.on("getRuleTemplate.filter",function(i){var r=e(i.value);r.find(l.rule_actions).prepend('<button type="button" class="btn btn-xs btn-default" data-invert="rule"><i class="'+t.icon+'"></i> '+n.lang.invert+"</button>"),i.value=r.prop("outerHTML")})},{icon:"glyphicon glyphicon-random",recursive:!0,invert_rules:!0,display_rules_button:!1,silent_fail:!1}),a.extend({invert:function(t,i){if(!(t instanceof d)){if(!this.model.root)return;i=t,t=this.model.root}if("object"!=typeof i&&(i={}),void 0===i.recursive&&(i.recursive=!0),void 0===i.invert_rules&&(i.invert_rules=!0),void 0===i.silent_fail&&(i.silent_fail=!1),void 0===i.trigger&&(i.trigger=!0),t instanceof c){if(this.settings.conditionOpposites[t.condition]?t.condition=this.settings.conditionOpposites[t.condition]:i.silent_fail||h.error("InvertCondition",'Unknown inverse of condition "{0}"',t.condition),i.recursive){var n=e.extend({},i,{trigger:!1});t.each(function(e){i.invert_rules&&this.invert(e,n)},function(e){this.invert(e,n)},this)}}else if(t instanceof u&&t.operator&&!t.filter.no_invert)if(this.settings.operatorOpposites[t.operator.type]){var r=this.settings.operatorOpposites[t.operator.type];t.filter.operators&&-1==t.filter.operators.indexOf(r)||(t.operator=this.getOperatorByType(r))}else i.silent_fail||h.error("InvertOperator",'Unknown inverse of operator "{0}"',t.operator.type);i.trigger&&this.trigger("afterInvert",t,i)}}),a.defaults({mongoOperators:{equal:function(e){return e[0]},not_equal:function(e){return{$ne:e[0]}},"in":function(e){return{$in:e}},not_in:function(e){return{$nin:e}},less:function(e){return{$lt:e[0]}},less_or_equal:function(e){return{$lte:e[0]}},greater:function(e){return{$gt:e[0]}},greater_or_equal:function(e){return{$gte:e[0]}},between:function(e){return{$gte:e[0],$lte:e[1]}},not_between:function(e){return{$lt:e[0],$gt:e[1]}},begins_with:function(e){return{$regex:"^"+h.escapeRegExp(e[0])}},not_begins_with:function(e){return{$regex:"^(?!"+h.escapeRegExp(e[0])+")"}},contains:function(e){return{$regex:h.escapeRegExp(e[0])}},not_contains:function(e){return{$regex:"^((?!"+h.escapeRegExp(e[0])+").)*$",$options:"s"}},ends_with:function(e){return{$regex:h.escapeRegExp(e[0])+"$"}},not_ends_with:function(e){return{$regex:"(?<!"+h.escapeRegExp(e[0])+")$"}},is_empty:function(e){return""},is_not_empty:function(e){return{$ne:""}},is_null:function(e){return null},is_not_null:function(e){return{$ne:null}}},mongoRuleOperators:{$ne:function(e){return e=e.$ne,{val:e,op:null===e?"is_not_null":""===e?"is_not_empty":"not_equal"}},eq:function(e){return{val:e,op:null===e?"is_null":""===e?"is_empty":"equal"}},$regex:function(e){return e=e.$regex,"^(?!"==e.slice(0,4)&&")"==e.slice(-1)?{val:e.slice(4,-1),op:"not_begins_with"}:"^((?!"==e.slice(0,5)&&").)*$"==e.slice(-5)?{val:e.slice(5,-5),op:"not_contains"}:"(?<!"==e.slice(0,4)&&")$"==e.slice(-2)?{val:e.slice(4,-2),op:"not_ends_with"}:"$"==e.slice(-1)?{val:e.slice(0,-1),op:"ends_with"}:"^"==e.slice(0,1)?{val:e.slice(1),op:"begins_with"}:{val:e,op:"contains"}},between:function(e){return{val:[e.$gte,e.$lte],op:"between"}},not_between:function(e){return{val:[e.$lt,e.$gt],op:"not_between"}},$in:function(e){return{val:e.$in,op:"in"}},$nin:function(e){return{val:e.$nin,op:"not_in"}},$lt:function(e){return{val:e.$lt,op:"less"}},$lte:function(e){return{val:e.$lte,op:"less_or_equal"}},$gt:function(e){return{val:e.$gt,op:"greater"}},$gte:function(e){return{val:e.$gte,op:"greater_or_equal"}}}}),a.extend({getMongo:function(e){e=void 0===e?this.getRules():e;var t=this;return function i(e){if(e.condition||(e.condition=t.settings.default_condition),-1===["AND","OR"].indexOf(e.condition.toUpperCase())&&h.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',e.condition),!e.rules)return{};var n=[];e.rules.forEach(function(e){if(e.rules&&e.rules.length>0)n.push(i(e));else{var r=t.settings.mongoOperators[e.operator],s=t.getOperatorByType(e.operator),o=[];void 0===r&&h.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',e.operator),0!==s.nb_inputs&&(e.value instanceof Array||(e.value=[e.value]),e.value.forEach(function(t){o.push(h.changeType(t,e.type,!1))}));var a={},l=t.change("getMongoDBField",e.field,e);a[l]=r.call(t,o),n.push(t.change("ruleToMongo",a,e,o,r))}});var r={};return r["$"+e.condition.toLowerCase()]=n,t.change("groupToMongo",r,e)}(e)},getRulesFromMongo:function(e){if(void 0===e||null===e)return null;var t=this;if(e=t.change("parseMongoNode",e),"rules"in e&&"condition"in e)return e;var i=r(e);return i||h.error("MongoParse","Invalid MongoDB query format"),function s(e,i){var o=e[i],a=[];return o.forEach(function(e){if(e=t.change("parseMongoNode",e),"rules"in e&&"condition"in e)return void a.push(e);if("id"in e&&"operator"in e&&"value"in e)return void a.push(e);var i=r(e);if(i)a.push(s(e,i));else{var o=Object.keys(e)[0],l=e[o],d=n(l,o);void 0===d&&h.error("MongoParse","Invalid MongoDB query format");var c=t.settings.mongoRuleOperators[d];void 0===c&&h.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',d);var u=c.call(t,l),p=t.change("mongoToRule",{id:t.change("getMongoDBFieldID",o,l),field:o,operator:u.op,value:u.val},e);a.push(p)}}),t.change("mongoToGroup",{condition:i.replace("$","").toUpperCase(),rules:a},e)}(e,i)},setRulesFromMongo:function(e){this.setRules(this.getRulesFromMongo(e))}}),l.group_not=l.group_header+" [data-not=group]",i.defineModelProperties(c,["not"]),a.define("not-group",function(t){var n=this;this.on("afterInit",function(){n.$el.on("click.queryBuilder","[data-not=group]",function(){var t=e(this).closest(l.group_container),n=i(t);n.not=!n.not}),n.model.on("update",function(e,t,i){t instanceof c&&"not"===i&&n.updateGroupNot(t)})}),this.on("afterAddGroup",function(e,t){t.__.not=!1}),this.on("getGroupTemplate.filter",function(i,r){var s=e(i.value);s.find(l.condition_container).prepend('<button type="button" class="btn btn-xs btn-default" data-not="group"><i class="'+t.icon_unchecked+'"></i> '+n.lang.NOT+"</button>"),i.value=s.prop("outerHTML")}),this.on("groupToJson.filter",function(e,t){e.value.not=t.not}),this.on("jsonToGroup.filter",function(e,t){e.value.not=!!t.not}),this.on("groupToSQL.filter",function(e,t){t.not&&(e.value="NOT ( "+e.value+" )")}),this.on("parseSQLNode.filter",function(e){e.value.name&&"NOT"==e.value.name.toUpperCase()&&(e.value=e.value.arguments.value[0],e.value.not=!0)}),this.on("sqlToGroup.filter",function(e,t){e.value.not=!!t.not}),this.on("groupToMongo.filter",function(e,t){var i="$"+t.condition.toLowerCase();t.not&&e.value[i]&&(e.value={$nor:[e.value]})}),this.on("parseMongoNode.filter",function(e){var t=Object.keys(e.value);"$nor"==t[0]&&(e.value=e.value[t[0]][0],e.value.not=!0)}),this.on("mongoToGroup.filter",function(e,t){e.value.not=!!t.not})},{icon_unchecked:"glyphicon glyphicon-unchecked",icon_checked:"glyphicon glyphicon-check"}),a.extend({updateGroupNot:function(e){var t=this.plugins["not-group"];e.$el.find(">"+l.group_not).toggleClass("active",e.not).find("i").attr("class",e.not?t.icon_checked:t.icon_unchecked),this.trigger("afterUpdateGroupNot",e)}}),l.rule_and_group_containers=l.rule_container+", "+l.group_container,l.drag_handle=".drag-handle",a.defaults({default_rule_flags:{no_sortable:!1,no_drop:!1},default_group_flags:{no_sortable:!1,no_drop:!1}}),a.define("sortable",function(t){"interact"in window||h.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io'),void 0!==t.default_no_sortable&&(h.error(!1,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead'),this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=t.default_no_sortable),interact.dynamicDrop(!0),interact.pointerMoveTolerance(10);var n,r,o;this.on("afterAddRule afterAddGroup",function(a,d){if(d!=n){var u=a.builder;t.inherit_no_sortable&&d.parent&&d.parent.flags.no_sortable&&(d.flags.no_sortable=!0),t.inherit_no_drop&&d.parent&&d.parent.flags.no_drop&&(d.flags.no_drop=!0),d.flags.no_sortable||interact(d.$el[0]).allowFrom(l.drag_handle).draggable({onstart:function(t){o=i(t.target),r=o.$el.clone().appendTo(o.$el.parent()).width(o.$el.outerWidth()).addClass("dragging");var s=e('<div class="rule-placeholder">&nbsp;</div>').height(o.$el.outerHeight());n=o.parent.addRule(s,o.getPos()),o.$el.hide()},onmove:function(e){r[0].style.top=e.clientY-15+"px",r[0].style.left=e.clientX-15+"px"},onend:function(){r.remove(),r=void 0,n.drop(),n=void 0,o.$el.show(),u.trigger("afterMove",o)}}),d.flags.no_drop||(interact(d.$el[0]).dropzone({accept:l.rule_and_group_containers,ondragenter:function(t){s(n,e(t.target))},ondrop:function(t){s(o,e(t.target),u)}}),d instanceof c&&interact(d.$el.find(l.group_header)[0]).dropzone({accept:l.rule_and_group_containers,ondragenter:function(t){s(n,e(t.target))},ondrop:function(t){s(o,e(t.target),u)}}))}}),this.on("beforeDeleteRule beforeDeleteGroup",function(e,t){e.isDefaultPrevented()||(interact(t.$el[0]).unset(),t instanceof c&&interact(t.$el.find(l.group_header)[0]).unset())}),this.on("afterApplyRuleFlags afterApplyGroupFlags",function(e,t){t.flags.no_sortable&&t.$el.find(".drag-handle").remove()}),this.on("getGroupTemplate.filter",function(i,n){if(n>1){var r=e(i.value);r.find(l.condition_container).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>'),i.value=r.prop("outerHTML")}}),this.on("getRuleTemplate.filter",function(i){var n=e(i.value);n.find(l.rule_header).after('<div class="drag-handle"><i class="'+t.icon+'"></i></div>'),i.value=n.prop("outerHTML")})},{inherit_no_sortable:!0,inherit_no_drop:!0,icon:"glyphicon glyphicon-sort"}),a.defaults({sqlOperators:{equal:{op:"= ?"},not_equal:{op:"!= ?"},"in":{op:"IN(?)",sep:", "},not_in:{op:"NOT IN(?)",sep:", "},less:{op:"< ?"},less_or_equal:{op:"<= ?"},greater:{op:"> ?"},greater_or_equal:{op:">= ?"},between:{op:"BETWEEN ?",sep:" AND "},not_between:{op:"NOT BETWEEN ?",sep:" AND "},begins_with:{op:"LIKE(?)",mod:"{0}%"},not_begins_with:{op:"NOT LIKE(?)",mod:"{0}%"},contains:{op:"LIKE(?)",mod:"%{0}%"},not_contains:{op:"NOT LIKE(?)",mod:"%{0}%"},ends_with:{op:"LIKE(?)",mod:"%{0}"},not_ends_with:{op:"NOT LIKE(?)",mod:"%{0}"},is_empty:{op:"= ''"},is_not_empty:{op:"!= ''"},is_null:{op:"IS NULL"},is_not_null:{op:"IS NOT NULL"}},sqlRuleOperator:{"=":function(e){return{val:e,op:""===e?"is_empty":"equal"}},"!=":function(e){return{val:e,op:""===e?"is_not_empty":"not_equal"}},LIKE:function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"begins_with"}:void h.error("SQLParse",'Invalid value for LIKE operator "{0}"',e)},"NOT LIKE":function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"not_contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"not_ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"not_begins_with"}:void h.error("SQLParse",'Invalid value for NOT LIKE operator "{0}"',e)},IN:function(e){return{val:e,op:"in"}},"NOT IN":function(e){return{val:e,op:"not_in"}},"<":function(e){return{val:e,op:"less"}},"<=":function(e){return{val:e,op:"less_or_equal"}},">":function(e){return{val:e,op:"greater"}},">=":function(e){return{val:e,op:"greater_or_equal"}},BETWEEN:function(e){return{val:e,op:"between"}},"NOT BETWEEN":function(e){return{val:e,op:"not_between"}},IS:function(e){return null!==e&&h.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_null"}},"IS NOT":function(e){return null!==e&&h.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_not_null"}}},sqlStatements:{question_mark:function(){var e=[];return{add:function(t,i){return e.push(i),"?"},run:function(){return e}}},numbered:function(e){(!e||e.length>1)&&(e="$");var t=0,i=[];return{add:function(n,r){return i.push(r),t++,e+t},run:function(){return i}}},named:function(e){(!e||e.length>1)&&(e=":");var t={},i={};return{add:function(n,r){t[n.field]||(t[n.field]=1);var s=n.field+"_"+t[n.field]++;return i[s]=r,e+s},run:function(){return i}}}},sqlRuleStatement:{question_mark:function(e){var t=0;return{parse:function(i){return"?"==i?e[t++]:i},esc:function(e){return e.replace(/\?/g,"'?'")}}},numbered:function(e,t){(!t||t.length>1)&&(t="$");var i=new RegExp("^\\"+t+"[0-9]+$"),n=new RegExp("\\"+t+"([0-9]+)","g");return{parse:function(t){return i.test(t)?e[t.slice(1)-1]:t},esc:function(e){return e.replace(n,"'"+("$"==t?"$$":t)+"$1'")}}},named:function(e,t){(!t||t.length>1)&&(t=":");var i=new RegExp("^\\"+t),n=new RegExp("\\"+t+"("+Object.keys(e).join("|")+")","g");return{parse:function(t){return i.test(t)?e[t.slice(1)]:t},esc:function(e){return e.replace(n,"'"+("$"==t?"$$":t)+"$1'")}}}}}),a.extend({getSQL:function(e,t,i){if(i=void 0===i?this.getRules():i,t=t===!0?"\n":" ",e===!0&&(e="question_mark"),"string"==typeof e){var n=o(e);e=this.settings.sqlStatements[n[1]](n[2])}var r=this,s=function a(i){if(i.condition||(i.condition=r.settings.default_condition),-1===["AND","OR"].indexOf(i.condition.toUpperCase())&&h.error("UndefinedSQLCondition",'Unable to build SQL query with condition "{0}"',i.condition),!i.rules)return"";var n=[];i.rules.forEach(function(i){if(i.rules&&i.rules.length>0)n.push("("+t+a(i)+t+")"+t);else{var s=r.settings.sqlOperators[i.operator],o=r.getOperatorByType(i.operator),l="";void 0===s&&h.error("UndefinedSQLOperator",'Unknown SQL operation for operator "{0}"',i.operator),0!==o.nb_inputs&&(i.value instanceof Array||(i.value=[i.value]),i.value.forEach(function(t,n){n>0&&(l+=s.sep),"integer"==i.type||"double"==i.type||"boolean"==i.type?t=h.changeType(t,i.type,!0):e||(t=h.escapeString(t)),s.mod&&(t=h.fmt(s.mod,t)),e?l+=e.add(i,t):("string"==typeof t&&(t="'"+t+"'"),l+=t)}));var d=function(e){return s.op.replace(/\?/,e)},c=r.change("getSQLField",i.field,i)+" "+d(l);n.push(r.change("ruleToSQL",c,i,l,d))}});var s=n.join(" "+i.condition+t);return r.change("groupToSQL",s,i)}(i);return e?{sql:s,params:e.run()}:{sql:s}},getRulesFromSQL:function(t,i){"SQLParser"in window||h.error("MissingLibrary","SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser");var n=this;if("string"==typeof t&&(t={sql:t}),i===!0&&(i="question_mark"),"string"==typeof i){var r=o(i);i=this.settings.sqlRuleStatement[r[1]](t.params,r[2])}i&&(t.sql=i.esc(t.sql)),0!==t.sql.toUpperCase().indexOf("SELECT")&&(t.sql="SELECT * FROM table WHERE "+t.sql);var s=SQLParser.parse(t.sql);if(s.where||h.error("SQLParse","No WHERE clause found"),t=n.change("parseSQLNode",s.where.conditions),"rules"in t&&"condition"in t)return t;var a=n.change("sqlToGroup",{condition:this.settings.default_condition,rules:[]},t),l=a;return function d(t,r){if(t=n.change("parseSQLNode",t),"rules"in t&&"condition"in t)return void l.rules.push(t);if("id"in t&&"operator"in t&&"value"in t)return void l.rules.push(t);if("left"in t&&"right"in t&&"operation"in t||h.error("SQLParse","Unable to parse WHERE clause"),-1!==["AND","OR"].indexOf(t.operation.toUpperCase())){if(r>0&&l.condition!=t.operation.toUpperCase()){var s=n.change("sqlToGroup",{condition:n.settings.default_condition,rules:[]},t);l.rules.push(s),l=s}l.condition=t.operation.toUpperCase(),r++;var o=l;d(t.left,r),l=o,d(t.right,r)}else{e.isPlainObject(t.right.value)&&h.error("SQLParse","Value format not supported for {0}.",t.left.value);var a;a=e.isArray(t.right.value)?t.right.value.map(function(e){return e.value}):t.right.value,i&&(a=e.isArray(a)?a.map(i.parse):i.parse(a));var c=t.operation.toUpperCase();"<>"==c&&(c="!=");var u=n.settings.sqlRuleOperator[c];void 0===u&&h.error("UndefinedSQLOperator",'Invalid SQL operation "{0}".',t.operation);var p=u.call(this,a,t.operation),f=t.left.values.join("."),g=n.change("sqlToRule",{id:n.change("getSQLFieldID",f,a),field:f,operator:p.op,value:p.val},t);l.rules.push(g)}}(t,0),a},setRulesFromSQL:function(e,t){this.setRules(this.getRulesFromSQL(e,t))}}),a.define("unique-filter",function(){this.status.used_filters={},this.on("afterUpdateRuleFilter",this.updateDisabledFilters),this.on("afterDeleteRule",this.updateDisabledFilters),this.on("afterCreateRuleFilters",this.applyDisabledFilters),this.on("afterReset",this.clearDisabledFilters),this.on("afterClear",this.clearDisabledFilters),this.on("getDefaultFilter.filter",function(e,t){var i=e.builder;if(i.updateDisabledFilters(),e.value.id in i.status.used_filters){var n=i.filters.some(function(n){return!(n.id in i.status.used_filters)||i.status.used_filters[n.id].length>0&&-1===i.status.used_filters[n.id].indexOf(t.parent)?(e.value=n,!0):void 0});n||(h.error("UniqueFilter","No more non-unique filters available"),e.value=void 0)}})}),a.extend({updateDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={},t.model&&(!function i(e){e.each(function(e){e.filter&&e.filter.unique&&(t.status.used_filters[e.filter.id]||(t.status.used_filters[e.filter.id]=[]),"group"==e.filter.unique&&t.status.used_filters[e.filter.id].push(e.parent))},function(e){i(e)})}(t.model.root),t.applyDisabledFilters(e))},clearDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={},t.applyDisabledFilters(e)},applyDisabledFilters:function(t){var i=t?t.builder:this;i.$el.find(l.filter_container+" option").prop("disabled",!1),e.each(i.status.used_filters,function(e,t){0===t.length?i.$el.find(l.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",!0):t.forEach(function(t){t.each(function(t){t.$el.find(l.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",!0)})})}),i.settings.plugins&&i.settings.plugins["bt-selectpicker"]&&i.$el.find(l.rule_filter).selectpicker("render")}}),a.regional.en={__locale:"English (en)",__author:'Damien "Mistic" Sorel, http://www.strangeplanet.fr',add_rule:"Add rule",add_group:"Add group",delete_rule:"Delete",delete_group:"Delete",conditions:{AND:"AND",OR:"OR"},operators:{equal:"equal",not_equal:"not equal","in":"in",not_in:"not in",less:"less",less_or_equal:"less or equal",greater:"greater",greater_or_equal:"greater or equal",between:"between",not_between:"not between",begins_with:"begins with",not_begins_with:"doesn't begin with",contains:"contains",not_contains:"doesn't contain",ends_with:"ends with",not_ends_with:"doesn't end with",is_empty:"is empty",is_not_empty:"is not empty",is_null:"is null",is_not_null:"is not null"},errors:{no_filter:"No filter selected",empty_group:"The group is empty",radio_empty:"No value selected",checkbox_empty:"No value selected",select_empty:"No value selected",string_empty:"Empty value",string_exceed_min_length:"Must contain at least {0} characters",string_exceed_max_length:"Must not contain more than {0} characters",string_invalid_format:"Invalid format ({0})",number_nan:"Not a number",number_not_integer:"Not an integer",number_not_double:"Not a real number",number_exceed_min:"Must be greater than {0}",number_exceed_max:"Must be lower than {0}",number_wrong_step:"Must be a multiple of {0}",datetime_empty:"Empty value",datetime_invalid:"Invalid date format ({0})",datetime_exceed_min:"Must be after {0}",datetime_exceed_max:"Must be before {0}",boolean_not_valid:"Not a boolean",operator_not_multiple:"Operator {0} cannot accept multiple values"},invert:"Invert",NOT:"NOT"},a.defaults({lang_code:"en"})}),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=n(String(e||"").toLowerCase()),!e||!e.length)return[];var t,i,s,a,l=[],d=e.split(/ +/);for(t=0,i=d.length;i>t;t++){if(s=r(d[t]),this.settings.diacritics)for(a in o)o.hasOwnProperty(a)&&(s=s.replace(new RegExp(a,"g"),o[a]));l.push({string:d[t],regex:new RegExp(s,"i")})}return l},e.prototype.iterator=function(e,t){var i;i=s(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},i.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,n,r,s;i=this,e=i.prepareSearch(e,t),r=e.tokens,n=e.options.fields,s=r.length;var o=function(e,t){var i,n;return e?(e=String(e||""),n=e.search(t.regex),-1===n?0:(i=t.string.length/e.length,0===n&&(i+=.5),i)):0},a=function(){var e=n.length;return e?1===e?function(e,t){return o(t[n[0]],e)}:function(t,i){for(var r=0,s=0;e>r;r++)s+=o(i[n[r]],t);return s/e}:function(){return 0}}();return s?1===s?function(e){return a(r[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;s>i;i++){if(t=a(r[i],e),0>=t)return 0;n+=t}return n/s}:function(e){for(var t=0,i=0;s>t;t++)i+=a(r[t],e);return i/s}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var n,r,s,o,a,l,d,c,u,h,p;if(s=this,e=s.prepareSearch(e,i),p=!e.query&&i.sort_empty||i.sort,u=function(e,t){return"$score"===e?t.score:s.items[t.id][e]},a=[],p)for(n=0,r=p.length;r>n;n++)(e.query||"$score"!==p[n].field)&&a.push(p[n]);if(e.query){for(h=!0,n=0,r=a.length;r>n;n++)if("$score"===a[n].field){h=!1;break}h&&a.unshift({field:"$score",direction:"desc"})}else for(n=0,r=a.length;r>n;n++)if("$score"===a[n].field){a.splice(n,1);break}for(c=[],n=0,r=a.length;r>n;n++)c.push("desc"===a[n].direction?-1:1);return l=a.length,l?1===l?(o=a[0].field,d=c[0],function(e,i){return d*t(u(o,e),u(o,i))}):function(e,i){var n,r,s;for(n=0;l>n;n++)if(s=a[n].field,r=c[n]*t(u(s,e),u(s,i)))return r;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=i({},t);var n=t.fields,r=t.sort,o=t.sort_empty;return n&&!s(n)&&(t.fields=[n]),r&&!s(r)&&(t.sort=[r]),o&&!s(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,n,r,s,o=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,s=t.score||o.getScoreFunction(n),e.length?o.iterator(o.items,function(e,r){i=s(e),(t.filter===!1||i>0)&&n.items.push({score:i,id:r})}):o.iterator(o.items,function(e,t){n.items.push({score:1,id:t})}),r=o.getSortFunction(n,t),r&&n.items.sort(r),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=a(String(e||"")),t=a(String(t||"")),e>t?1:t>e?-1:0)},i=function(e,t){var i,n,r,s;for(i=1,n=arguments.length;n>i;i++)if(s=arguments[i])for(r in s)s.hasOwnProperty(r)&&(e[r]=s[r]);return e},n=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},r=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},a=function(){var e,t,i,n,r="",s={};for(i in o)if(o.hasOwnProperty(i))for(n=o[i].substring(2,o[i].length-1),r+=n,e=0,t=n.length;t>e;e++)s[n.charAt(e)]=i;var a=new RegExp("["+r+"]","g");return function(e){return e.replace(a,function(e){return s[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,n,r,s=this,o=[];if(s.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,n=e.length;n>i;i++)"string"==typeof e[i]?o.push(e[i]):(s.plugins.settings[e[i].name]=e[i].options,o.push(e[i].name));else if(e)for(r in e)e.hasOwnProperty(r)&&(s.plugins.settings[r]=e[r],o.push(r));for(;o.length;)s.require(o.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,i){var n=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var r=e.data.search(i);if(r>=0&&e.data.length>0){var s=e.data.match(i),o=document.createElement("span");o.className="highlight";var a=e.splitText(r),l=(a.splitText(s[0].length),a.cloneNode(!0));o.appendChild(l),a.parentNode.replaceChild(o,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var d=0;d<e.childNodes.length;++d)d+=n(e.childNodes[d]);return t};return e.each(function(){n(this)})}},r=function(){};r.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=r.prototype[t[i]]};var s=/Mac/.test(navigator.userAgent),o=65,a=13,l=27,d=37,c=38,u=80,h=39,p=40,f=78,g=8,m=46,v=16,_=s?91:17,y=s?18:17,b=9,w=1,k=2,x=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,C=function(e){return"undefined"!=typeof e},$=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},j=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},T=function(e){return(e+"").replace(/\$/g,"$$$$")},D={};D.before=function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},D.after=function(e,t,i){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return i.apply(e,arguments),t}};var O=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},S=function(e,t){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}},F=function(e,t,i){var n,r=e.trigger,s={};e.trigger=function(){var i=arguments[0];return-1===t.indexOf(i)?r.apply(e,arguments):void(s[i]=arguments)},i.apply(e,[]),e.trigger=r;for(n in s)s.hasOwnProperty(n)&&r.apply(e,s[n])},E=function(e,t,i,n){e.on(t,i,function(t){for(var i=t.target;i&&i.parentNode!==e[0];)i=i.parentNode;return t.currentTarget=i,n.apply(this,[t])})},A=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},P=function(e,t,i){var n,r,s={};if(i)for(n=0,r=i.length;r>n;n++)s[i[n]]=e.css(i[n]);else s=e.css();t.css(s)},R=function(t,i){if(!t)return 0;var n=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");P(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=n.width();return n.remove(),r},z=function(e){var t=null,i=function(i,n){var r,s,o,a,l,d,c,u;i=i||window.event||{},n=n||{},i.metaKey||i.altKey||(n.force||e.data("grow")!==!1)&&(r=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(s=i.keyCode,o=s>=97&&122>=s||s>=65&&90>=s||s>=48&&57>=s||32===s,s===m||s===g?(u=A(e[0]),u.length?r=r.substring(0,u.start)+r.substring(u.start+u.length):s===g&&u.start?r=r.substring(0,u.start-1)+r.substring(u.start+1):s===m&&"undefined"!=typeof u.start&&(r=r.substring(0,u.start)+r.substring(u.start+1))):o&&(d=i.shiftKey,c=String.fromCharCode(i.keyCode),c=d?c.toUpperCase():c.toLowerCase(),r+=c)),a=e.attr("placeholder"),!r&&a&&(r=a),l=R(r,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()},N=function(i,n){var r,s,o,a,l=this;a=i[0],a.selectize=l;var d=window.getComputedStyle&&window.getComputedStyle(a,null);if(o=d?d.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,o=o||i.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?w:k,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++N.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:S(l.onSearchChange,n.loadThrottle)}),l.sifter=new t(this.options,{diacritics:n.diacritics}),l.settings.options){for(r=0,s=l.settings.options.length;s>r;r++)l.registerOption(l.settings.options[r]);delete l.settings.options}if(l.settings.optgroups){for(r=0,s=l.settings.optgroups.length;s>r;r++)l.registerOptionGroup(l.settings.optgroups[r]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return r.mixin(N),i.mixin(N),e.extend(N.prototype,{setup:function(){var t,i,n,r,o,a,l,d,c,u=this,h=u.settings,p=u.eventNS,f=e(window),g=e(document),m=u.$input;if(l=u.settings.mode,d=m.attr("class")||"",t=e("<div>").addClass(h.wrapperClass).addClass(d).addClass(l),i=e("<div>").addClass(h.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",m.is(":disabled")?"-1":u.tabIndex),a=e(h.dropdownParent||t),r=e("<div>").addClass(h.dropdownClass).addClass(l).hide().appendTo(a),o=e("<div>").addClass(h.dropdownContentClass).appendTo(r),u.settings.copyClassesToDropdown&&r.addClass(d),t.css({width:m[0].style.width
}),u.plugins.names.length&&(c="plugin-"+u.plugins.names.join(" plugin-"),t.addClass(c),r.addClass(c)),(null===h.maxItems||h.maxItems>1)&&u.tagType===w&&m.attr("multiple","multiple"),u.settings.placeholder&&n.attr("placeholder",h.placeholder),!u.settings.splitOn&&u.settings.delimiter){var b=u.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");u.settings.splitOn=new RegExp("\\s*"+b+"+\\s*")}m.attr("autocorrect")&&n.attr("autocorrect",m.attr("autocorrect")),m.attr("autocapitalize")&&n.attr("autocapitalize",m.attr("autocapitalize")),u.$wrapper=t,u.$control=i,u.$control_input=n,u.$dropdown=r,u.$dropdown_content=o,r.on("mouseenter","[data-selectable]",function(){return u.onOptionHover.apply(u,arguments)}),r.on("mousedown click","[data-selectable]",function(){return u.onOptionSelect.apply(u,arguments)}),E(i,"mousedown","*:not(input)",function(){return u.onItemSelect.apply(u,arguments)}),z(n),i.on({mousedown:function(){return u.onMouseDown.apply(u,arguments)},click:function(){return u.onClick.apply(u,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return u.onKeyDown.apply(u,arguments)},keyup:function(){return u.onKeyUp.apply(u,arguments)},keypress:function(){return u.onKeyPress.apply(u,arguments)},resize:function(){u.positionDropdown.apply(u,[])},blur:function(){return u.onBlur.apply(u,arguments)},focus:function(){return u.ignoreBlur=!1,u.onFocus.apply(u,arguments)},paste:function(){return u.onPaste.apply(u,arguments)}}),g.on("keydown"+p,function(e){u.isCmdDown=e[s?"metaKey":"ctrlKey"],u.isCtrlDown=e[s?"altKey":"ctrlKey"],u.isShiftDown=e.shiftKey}),g.on("keyup"+p,function(e){e.keyCode===y&&(u.isCtrlDown=!1),e.keyCode===v&&(u.isShiftDown=!1),e.keyCode===_&&(u.isCmdDown=!1)}),g.on("mousedown"+p,function(e){if(u.isFocused){if(e.target===u.$dropdown[0]||e.target.parentNode===u.$dropdown[0])return!1;u.$control.has(e.target).length||e.target===u.$control[0]||u.blur(e.target)}}),f.on(["scroll"+p,"resize"+p].join(" "),function(){u.isOpen&&u.positionDropdown.apply(u,arguments)}),f.on("mousemove"+p,function(){u.ignoreHover=!1}),this.revertSettings={$children:m.children().detach(),tabindex:m.attr("tabindex")},m.attr("tabindex",-1).hide().after(u.$wrapper),e.isArray(h.items)&&(u.setValue(h.items),delete h.items),x&&m.on("invalid"+p,function(e){e.preventDefault(),u.isInvalid=!0,u.refreshState()}),u.updateOriginalInput(),u.refreshItems(),u.refreshState(),u.updatePlaceholder(),u.isSetup=!0,m.is(":disabled")&&u.disable(),u.on("change",this.onChange),m.data("selectize",u),m.addClass("selectized"),u.trigger("initialize"),h.preload===!0&&u.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,n=t.settings.optgroupLabelField,r={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},r,t.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,n=t.isDefaultPrevented();e(t.target);if(i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;i.isFull()||i.isInputHidden||i.isLocked?t.preventDefault():i.settings.splitOn&&setTimeout(function(){for(var t=e.trim(i.$control_input.val()||"").split(i.settings.splitOn),n=0,r=t.length;r>n;n++)i.createItem(t[n])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==b&&e.preventDefault());switch(e.keyCode){case o:if(t.isCmdDown)return void t.selectAll();break;case l:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case f:if(!e.ctrlKey||e.altKey)break;case p:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case u:if(!e.ctrlKey||e.altKey)break;case c:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case a:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case d:return void t.advanceSelection(-1,e);case h:return void t.advanceSelection(1,e);case b:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case g:case m:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(s?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),(t||document.body).focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,n,r=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),n=e(t.currentTarget),n.hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):(i=n.attr("data-value"),"undefined"!=typeof i&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(i),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&r.setActiveOption(r.getOption(i))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var i=t?[]:["change"];F(this,i,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var n,r,s,o,a,l,d,c,u=this;if("single"!==u.settings.mode){if(t=e(t),!t.length)return e(u.$activeItems).removeClass("active"),u.$activeItems=[],void(u.isFocused&&u.showInput());if(n=i&&i.type.toLowerCase(),"mousedown"===n&&u.isShiftDown&&u.$activeItems.length){for(c=u.$control.children(".active:last"),o=Array.prototype.indexOf.apply(u.$control[0].childNodes,[c[0]]),a=Array.prototype.indexOf.apply(u.$control[0].childNodes,[t[0]]),o>a&&(d=o,o=a,a=d),r=o;a>=r;r++)l=u.$control[0].childNodes[r],-1===u.$activeItems.indexOf(l)&&(e(l).addClass("active"),u.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&u.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(s=u.$activeItems.indexOf(t[0]),u.$activeItems.splice(s,1),t.removeClass("active")):u.$activeItems.push(t.addClass("active")[0]):(e(u.$activeItems).removeClass("active"),u.$activeItems=[t.addClass("active")[0]]);u.hideInput(),this.isFocused||u.focus()}},setActiveOption:function(t,i,n){var r,s,o,a,l,d=this;d.$activeOption&&d.$activeOption.removeClass("active"),d.$activeOption=null,t=e(t),t.length&&(d.$activeOption=t.addClass("active"),(i||!C(i))&&(r=d.$dropdown_content.height(),s=d.$activeOption.outerHeight(!0),i=d.$dropdown_content.scrollTop()||0,o=d.$activeOption.offset().top-d.$dropdown_content.offset().top+i,a=o,l=o-r+s,o+s>r+i?d.$dropdown_content.stop().animate({scrollTop:l},n?d.settings.scrollDuration:0):i>o&&d.$dropdown_content.stop().animate({scrollTop:a},n?d.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var i,n,r,s=this,o=s.settings,a=this.getSearchOptions();if(o.score&&(r=s.settings.score.apply(this,[t]),"function"!=typeof r))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==s.lastQuery?(s.lastQuery=t,n=s.sifter.search(t,e.extend(a,{score:r})),s.currentResults=n):n=e.extend(!0,{},s.currentResults),o.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==s.items.indexOf($(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(t){var i,r,s,o,a,l,d,c,u,h,p,f,g,m,v,_;"undefined"==typeof t&&(t=!0);var y=this,b=e.trim(y.$control_input.val()),w=y.search(b),k=y.$dropdown_content,x=y.$activeOption&&$(y.$activeOption.attr("data-value"));for(o=w.items.length,"number"==typeof y.settings.maxOptions&&(o=Math.min(o,y.settings.maxOptions)),a={},l=[],i=0;o>i;i++)for(d=y.options[w.items[i].id],c=y.render("option",d),u=d[y.settings.optgroupField]||"",h=e.isArray(u)?u:[u],r=0,s=h&&h.length;s>r;r++)u=h[r],y.optgroups.hasOwnProperty(u)||(u=""),a.hasOwnProperty(u)||(a[u]=[],l.push(u)),a[u].push(c);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){var i=y.optgroups[e].$order||0,n=y.optgroups[t].$order||0;return i-n}),p=[],i=0,o=l.length;o>i;i++)u=l[i],y.optgroups.hasOwnProperty(u)&&a[u].length?(f=y.render("optgroup_header",y.optgroups[u])||"",f+=a[u].join(""),p.push(y.render("optgroup",e.extend({},y.optgroups[u],{html:f})))):p.push(a[u].join(""));if(k.html(p.join("")),y.settings.highlight&&w.query.length&&w.tokens.length)for(i=0,o=w.tokens.length;o>i;i++)n(k,w.tokens[i].regex);if(!y.settings.hideSelected)for(i=0,o=y.items.length;o>i;i++)y.getOption(y.items[i]).addClass("selected");g=y.canCreate(b),g&&(k.prepend(y.render("option_create",{input:b})),_=e(k[0].childNodes[0])),y.hasOptions=w.items.length>0||g,y.hasOptions?(w.items.length>0?(v=x&&y.getOption(x),v&&v.length?m=v:"single"===y.settings.mode&&y.items.length&&(m=y.getOption(y.items[0])),m&&m.length||(m=_&&!y.settings.addPrecedence?y.getAdjacentOption(_,1):k.find("[data-selectable]:first"))):m=_,y.setActiveOption(m),t&&!y.isOpen&&y.open()):(y.setActiveOption(null),t&&y.isOpen&&y.close())},addOption:function(t){var i,n,r,s=this;if(e.isArray(t))for(i=0,n=t.length;n>i;i++)s.addOption(t[i]);else(r=s.registerOption(t))&&(s.userOptions[r]=!0,s.lastQuery=null,s.trigger("option_add",r,t))},registerOption:function(e){var t=$(e[this.settings.valueField]);return!t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=$(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var n,r,s,o,a,l,d,c=this;if(t=$(t),s=$(i[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof s)throw new Error("Value must be set in option data");d=c.options[t].$order,s!==t&&(delete c.options[t],o=c.items.indexOf(t),-1!==o&&c.items.splice(o,1,s)),i.$order=i.$order||d,c.options[s]=i,a=c.renderCache.item,l=c.renderCache.option,a&&(delete a[t],delete a[s]),l&&(delete l[t],delete l[s]),-1!==c.items.indexOf(s)&&(n=c.getItem(t),r=e(c.render("item",i)),n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=$(e);var n=i.renderCache.item,r=i.renderCache.option;n&&delete n[e],r&&delete r[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var n=this.$dropdown.find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},getElementWithValue:function(t,i){if(t=$(t),"undefined"!=typeof t&&null!==t)for(var n=0,r=i.length;r>n;n++)if(i[n].getAttribute("data-value")===t)return e(i[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){for(var n=e.isArray(t)?t:[t],r=0,s=n.length;s>r;r++)this.isPending=s-1>r,this.addItem(n[r],i)},addItem:function(t,i){var n=i?[]:["change"];F(this,n,function(){var n,r,s,o,a,l=this,d=l.settings.mode;return t=$(t),-1!==l.items.indexOf(t)?void("single"===d&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===d&&l.clear(i),"multi"===d&&l.isFull()||(n=e(l.render("item",l.options[t])),a=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(n),(!l.isPending||!a&&l.isFull())&&l.refreshState(),l.isSetup&&(s=l.$dropdown_content.find("[data-selectable]"),l.isPending||(r=l.getOption(t),o=l.getAdjacentOption(r,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==d),o&&l.setActiveOption(l.getOption(o))),!s.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,n),l.updateOriginalInput({silent:i})))))})},removeItem:function(e,t){var i,n,r,s=this;i="object"==typeof e?e:s.getItem(e),e=$(i.attr("data-value")),n=s.items.indexOf(e),-1!==n&&(i.remove(),i.hasClass("active")&&(r=s.$activeItems.indexOf(i[0]),s.$activeItems.splice(r,1)),s.items.splice(n,1),s.lastQuery=null,!s.settings.persist&&s.userOptions.hasOwnProperty(e)&&s.removeOption(e,t),n<s.caretPos&&s.setCaret(s.caretPos-1),s.refreshState(),s.updatePlaceholder(),s.updateOriginalInput({silent:t}),s.positionDropdown(),s.trigger("item_remove",e,i))},createItem:function(t,i){var n=this,r=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var s=arguments[arguments.length-1];if("function"!=typeof s&&(s=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(t))return s(),!1;n.lock();var o="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},a=O(function(e){if(n.unlock(),!e||"object"!=typeof e)return s();var t=$(e[n.settings.valueField]);return"string"!=typeof t?s():(n.setTextboxValue(""),n.addOption(e),n.setCaret(r),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),void s(e))}),l=o.apply(this,[t,a]);return"undefined"!=typeof l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,i=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,r,s=this;if(e=e||{},s.tagType===w){for(n=[],t=0,i=s.items.length;i>t;t++)r=s.options[s.items[t]][s.settings.labelField]||"",n.push('<option value="'+j(s.items[t])+'" selected="selected">'+j(r)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),s.$input.html(n.join(""))}else s.$input.val(s.getValue()),s.$input.attr("value",s.$input.val());s.isSetup&&(e.silent||s.trigger("change",s.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(t):e(this.$control[0].childNodes[i]).before(t),this.setCaret(i+1)},deleteSelection:function(t){var i,n,r,s,o,a,l,d,c,u=this;if(r=t&&t.keyCode===g?-1:1,s=A(u.$control_input[0]),u.$activeOption&&!u.settings.hideSelected&&(l=u.getAdjacentOption(u.$activeOption,-1).attr("data-value")),o=[],u.$activeItems.length){for(c=u.$control.children(".active:"+(r>0?"last":"first")),a=u.$control.children(":not(input)").index(c),r>0&&a++,i=0,n=u.$activeItems.length;n>i;i++)o.push(e(u.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(u.isFocused||"single"===u.settings.mode)&&u.items.length&&(0>r&&0===s.start&&0===s.length?o.push(u.items[u.caretPos-1]):r>0&&s.start===u.$control_input.val().length&&o.push(u.items[u.caretPos]));if(!o.length||"function"==typeof u.settings.onDelete&&u.settings.onDelete.apply(u,[o])===!1)return!1;for("undefined"!=typeof a&&u.setCaret(a);o.length;)u.removeItem(o.pop());return u.showInput(),u.positionDropdown(),u.refreshOptions(!0),l&&(d=u.getOption(l),d.length&&u.setActiveOption(d)),!0},advanceSelection:function(e,t){var i,n,r,s,o,a,l=this;0!==e&&(l.rtl&&(e*=-1),i=e>0?"last":"first",n=A(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(s=l.$control_input.val().length,o=0>e?0===n.start&&0===n.length:n.start===s,o&&!s&&l.advanceCaret(e,t)):(a=l.$control.children(".active:"+i),a.length&&(r=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(e>0?r+1:r))))},advanceCaret:function(e,t){var i,n,r=this;0!==e&&(i=e>0?"next":"prev",r.isShiftDown?(n=r.$control_input[i](),n.length&&(r.hideInput(),r.setActiveItem(n),t&&t.preventDefault())):r.setCaret(r.caretPos+e))},setCaret:function(t){var i=this;if(t="single"===i.settings.mode?i.items.length:Math.max(0,Math.min(i.items.length,t)),!i.isPending){var n,r,s,o;for(s=i.$control.children(":not(input)"),n=0,r=s.length;r>n;n++)o=e(s[n]).detach(),t>n?i.$control_input.before(o):i.$control.append(o)}i.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,i=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(i),e(document).off(i),e(document.body).off(i),delete t.$input[0].selectize},render:function(e,t){var i,n,r="",s=!1,o=this,a=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(i=$(t[o.settings.valueField]),s=!!i),s&&(C(o.renderCache[e])||(o.renderCache[e]={}),o.renderCache[e].hasOwnProperty(i))?o.renderCache[e][i]:(r=o.settings.render[e].apply(this,[t,j]),("option"===e||"option_create"===e)&&(r=r.replace(a,"<$1 data-selectable")),"optgroup"===e&&(n=t[o.settings.optgroupValueField]||"",r=r.replace(a,'<$1 data-group="'+T(j(n))+'"')),("option"===e||"item"===e)&&(r=r.replace(a,'<$1 data-value="'+T(j(i||""))+'"')),s&&(o.renderCache[e][i]=r),r)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&("function"!=typeof i||i.apply(t,[e]))&&("string"!=typeof i||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),N.count=0,N.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,n=e.extend({},i,t),r=n.dataAttr,s=n.labelField,o=n.valueField,a=n.optgroupField,l=n.optgroupLabelField,d=n.optgroupValueField,c=function(t,i){var a,l,d,c,u=t.attr(r);if(u)for(i.options=JSON.parse(u),a=0,l=i.options.length;l>a;a++)i.items.push(i.options[a][o]);else{var h=e.trim(t.val()||"");if(!n.allowEmptyOption&&!h.length)return;for(d=h.split(n.delimiter),a=0,l=d.length;l>a;a++)c={},c[s]=d[a],c[o]=d[a],i.options.push(c);i.items=d}},u=function(t,i){var c,u,h,p,f=i.options,g={},m=function(e){var t=r&&e.attr(r);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,r){t=e(t);var l=$(t.attr("value"));if(l||n.allowEmptyOption)if(g.hasOwnProperty(l)){if(r){var d=g[l][a];d?e.isArray(d)?d.push(r):g[l][a]=[d,r]:g[l][a]=r}}else{var c=m(t)||{};c[s]=c[s]||t.text(),c[o]=c[o]||l,c[a]=c[a]||r,g[l]=c,f.push(c),t.is(":selected")&&i.items.push(l)}},_=function(t){var n,r,s,o,a;for(t=e(t),s=t.attr("label"),s&&(o=m(t)||{},o[l]=s,o[d]=s,i.optgroups.push(o)),a=e("option",t),n=0,r=a.length;r>n;n++)v(a[n],s)};for(i.maxItems=t.attr("multiple")?null:1,p=t.children(),c=0,u=p.length;u>c;c++)h=p[c].tagName.toLowerCase(),"optgroup"===h?_(p[c]):"option"===h&&v(p[c])};return this.each(function(){if(!this.selectize){var r,s=e(this),o=this.tagName.toLowerCase(),a=s.attr("placeholder")||s.attr("data-placeholder");a||n.allowEmptyOption||(a=s.children('option[value=""]').text());var l={placeholder:a,options:[],optgroups:[],items:[]};"select"===o?u(s,l):c(s,l),r=new N(s,e.extend(!0,{},i,l,t))}})},e.fn.selectize.defaults=N.defaults,e.fn.selectize.support={validity:x},N.define("drag_drop",function(t){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var i=this;i.lock=function(){var e=i.lock;return function(){var t=i.$control.data("sortable");return t&&t.disable(),e.apply(i,arguments)}}(),i.unlock=function(){var e=i.unlock;return function(){var t=i.$control.data("sortable");return t&&t.enable(),e.apply(i,arguments)}}(),i.setup=function(){var t=i.setup;return function(){t.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var t=i.$activeItems?i.$activeItems.slice():null,r=[];n.children("[data-value]").each(function(){r.push(e(this).attr("data-value"))}),i.setValue(r),i.setActiveItem(t)}})}}()}}),N.define("dropdown_header",function(t){var i=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),i.setup=function(){var n=i.setup;return function(){n.apply(i,arguments),i.$dropdown_header=e(t.html(t)),i.$dropdown.prepend(i.$dropdown_header)}}()}),N.define("optgroup_columns",function(t){var i=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var n=t.closest("[data-group]").find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},this.onKeyDown=function(){var e=i.onKeyDown;return function(t){var n,r,s,o;return!this.isOpen||t.keyCode!==d&&t.keyCode!==h?e.apply(this,arguments):(i.ignoreHover=!0,o=this.$activeOption.closest("[data-group]"),n=o.find("[data-selectable]").index(this.$activeOption),o=t.keyCode===d?o.prev("[data-group]"):o.next("[data-group]"),s=o.find("[data-selectable]"),r=s.eq(Math.min(s.length-1,n)),void(r.length&&this.setActiveOption(r)))}}();var n=function(){var e,t=n.width,i=document;return"undefined"==typeof t&&(e=i.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=n.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},r=function(){var r,s,o,a,l,d,c;if(c=e("[data-group]",i.$dropdown_content),s=c.length,s&&i.$dropdown_content.width()){if(t.equalizeHeight){for(o=0,r=0;s>r;r++)o=Math.max(o,c.eq(r).height());c.css({height:o})}t.equalizeWidth&&(d=i.$dropdown_content.innerWidth()-n(),a=Math.round(d/s),c.css({width:a}),s>1&&(l=d-a*(s-1),c.eq(s-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(D.after(this,"positionDropdown",r),D.after(this,"refreshOptions",r))}),N.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=this,n='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+j(t.title)+'">'+t.label+"</a>",r=function(e,t){var i=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,i)+t+e.substring(i)};this.setup=function(){var s=i.setup;return function(){if(t.append){var o=i.settings.render.item;i.settings.render.item=function(e){return r(o.apply(this,arguments),n)}}s.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!i.isLocked){var n=e(t.currentTarget).parent();i.setActiveItem(n),i.deleteSelection()&&i.setCaret(i.items.length)}})}}()}}),N.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(t){var n,r;return t.keyCode===g&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1,n>=0&&n<this.items.length)?(r=this.options[this.items[n]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[r])),this.refreshOptions(!0)),void t.preventDefault()):i.apply(this,arguments)}}()}),N});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():window.Sortable=e()}(function(){function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=y({},t),e[K]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var n in i)!(n in t)&&(t[n]=i[n]);oe(t);for(var r in this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&J,s(e,"mousedown",this._onTapStart),s(e,"touchstart",this._onTapStart),s(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(s(e,"dragover",this),
s(e,"dragenter",this)),re.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),$&&$.state!==t&&(l($,"display",t?"none":""),t||$.state&&(e.options.group.revertClone?(j.insertBefore($,T),e._animate(k,$)):j.insertBefore($,k)),$.state=t)}function i(e,t,i){if(e){i=i||Y;do if(">*"===t&&e.parentNode===i||v(e,t))return e;while(e=n(e))}return null}function n(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function r(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function s(e,t,i){e.addEventListener(t,i,X)}function o(e,t,i){e.removeEventListener(t,i,X)}function a(e,t,i){if(e)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(B," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(B," ")}}function l(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return Y.defaultView&&Y.defaultView.getComputedStyle?i=Y.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function d(e,t,i){if(e){var n=e.getElementsByTagName(t),r=0,s=n.length;if(i)for(;s>r;r++)i(n[r],r);return n}return[]}function c(e,t,i,n,r,s,o){e=e||t[K];var a=Y.createEvent("Event"),l=e.options,d="on"+i.charAt(0).toUpperCase()+i.substr(1);a.initEvent(i,!0,!0),a.to=t,a.from=r||t,a.item=n||t,a.clone=$,a.oldIndex=s,a.newIndex=o,t.dispatchEvent(a),l[d]&&l[d].call(e,a)}function u(e,t,i,n,r,s,o){var a,l,d=e[K],c=d.options.onMove;return a=Y.createEvent("Event"),a.initEvent("move",!0,!0),a.to=t,a.from=e,a.dragged=i,a.draggedRect=n,a.related=r||t,a.relatedRect=s||t.getBoundingClientRect(),e.dispatchEvent(a),c&&(l=c.call(d,a,o)),l}function h(e){e.draggable=!1}function p(){ee=!1}function f(e,t){var i=e.lastElementChild,n=i.getBoundingClientRect();return(t.clientY-(n.top+n.height)>5||t.clientX-(n.right+n.width)>5)&&i}function g(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function m(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!v(e,t)||i++;return i}function v(e,t){if(e){t=t.split(".");var i=t.shift().toUpperCase(),n=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==i&&e.nodeName.toUpperCase()!=i||t.length&&((" "+e.className+" ").match(n)||[]).length!=t.length)}return!1}function _(e,t){var i,n;return function(){void 0===i&&(i=arguments,n=this,setTimeout(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),i=void 0},t))}}function y(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function b(e){return Q?Q(e).clone(!0)[0]:G&&G.dom?G.dom(e).cloneNode(!0):e.cloneNode(!0)}function w(e){for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var n=t[i];n.checked&&ne.push(n)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var k,x,C,$,j,T,D,O,S,F,E,A,P,R,z,N,M,I,q,H,L={},B=/\s+/g,W=/left|right|inline/,K="Sortable"+(new Date).getTime(),U=window,Y=U.document,V=U.parseInt,Q=U.jQuery||U.Zepto,G=U.Polymer,X=!1,J=!!("draggable"in Y.createElement("div")),Z=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=Y.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),ee=!1,te=Math.abs,ie=Math.min,ne=[],re=[],se=_(function(e,t,i){if(i&&t.scroll){var n,r,s,o,a,l,d=i[K],c=t.scrollSensitivity,u=t.scrollSpeed,h=e.clientX,p=e.clientY,f=window.innerWidth,g=window.innerHeight;if(S!==i&&(O=t.scroll,S=i,F=t.scrollFn,O===!0)){O=i;do if(O.offsetWidth<O.scrollWidth||O.offsetHeight<O.scrollHeight)break;while(O=O.parentNode)}O&&(n=O,r=O.getBoundingClientRect(),s=(te(r.right-h)<=c)-(te(r.left-h)<=c),o=(te(r.bottom-p)<=c)-(te(r.top-p)<=c)),s||o||(s=(c>=f-h)-(c>=h),o=(c>=g-p)-(c>=p),(s||o)&&(n=U)),L.vx===s&&L.vy===o&&L.el===n||(L.el=n,L.vx=s,L.vy=o,clearInterval(L.pid),n&&(L.pid=setInterval(function(){return l=o?o*u:0,a=s?s*u:0,"function"==typeof F?F.call(d,a,l,e):void(n===U?U.scrollTo(U.pageXOffset+a,U.pageYOffset+l):(n.scrollTop+=l,n.scrollLeft+=a))},24)))}},30),oe=function(e){function t(e,t){return void 0!==e&&e!==!0||(e=i.name),"function"==typeof e?e:function(i,n){var r=n.options.group.name;return t?e:e&&(e.join?e.indexOf(r)>-1:r==e)}}var i={},n=e.group;n&&"object"==("undefined"==typeof n?"undefined":_typeof(n))||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i};e.prototype={constructor:e,_onTapStart:function(e){var t,n=this,r=this.el,s=this.options,o=s.preventOnFilter,a=e.type,l=e.touches&&e.touches[0],d=(l||e).target,u=e.target.shadowRoot&&e.path[0]||d,h=s.filter;if(w(r),!k&&!("mousedown"===a&&0!==e.button||s.disabled)&&(d=i(d,s.draggable,r),d&&D!==d)){if(t=m(d,s.draggable),"function"==typeof h){if(h.call(this,e,d,this))return c(n,u,"filter",d,r,t),void(o&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(e){return(e=i(u,e.trim(),r))?(c(n,e,"filter",d,r,t),!0):void 0})))return void(o&&e.preventDefault());s.handle&&!i(u,s.handle,r)||this._prepareDragStart(e,l,d,t)}},_prepareDragStart:function(e,t,i,n){var r,o=this,l=o.el,u=o.options,p=l.ownerDocument;i&&!k&&i.parentNode===l&&(I=e,j=l,k=i,x=k.parentNode,T=k.nextSibling,D=i,N=u.group,R=n,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,k.style["will-change"]="transform",r=function(){o._disableDelayedDrag(),k.draggable=o.nativeDraggable,a(k,u.chosenClass,!0),o._triggerDragStart(e,t),c(o,j,"choose",k,j,R)},u.ignore.split(",").forEach(function(e){d(k,e.trim(),h)}),s(p,"mouseup",o._onDrop),s(p,"touchend",o._onDrop),s(p,"touchcancel",o._onDrop),s(p,"pointercancel",o._onDrop),s(p,"selectstart",o),u.delay?(s(p,"mouseup",o._disableDelayedDrag),s(p,"touchend",o._disableDelayedDrag),s(p,"touchcancel",o._disableDelayedDrag),s(p,"mousemove",o._disableDelayedDrag),s(p,"touchmove",o._disableDelayedDrag),s(p,"pointermove",o._disableDelayedDrag),o._dragStartTimer=setTimeout(r,u.delay)):r())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._disableDelayedDrag),o(e,"touchmove",this._disableDelayedDrag),o(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),t?(I={target:k,clientX:t.clientX,clientY:t.clientY},this._onDragStart(I,"touch")):this.nativeDraggable?(s(k,"dragend",this),s(j,"dragstart",this._onDragStart)):this._onDragStart(I,!0);try{Y.selection?setTimeout(function(){Y.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(j&&k){var t=this.options;a(k,t.ghostClass,!0),a(k,t.dragClass,!1),e.active=this,c(this,j,"start",k,j,R)}else this._nulling()},_emulateDragOver:function(){if(q){if(this._lastX===q.clientX&&this._lastY===q.clientY)return;this._lastX=q.clientX,this._lastY=q.clientY,Z||l(C,"display","none");var e=Y.elementFromPoint(q.clientX,q.clientY),t=e,i=re.length;if(t)do{if(t[K]){for(;i--;)re[i]({clientX:q.clientX,clientY:q.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);Z||l(C,"display","")}},_onTouchMove:function(t){if(I){var i=this.options,n=i.fallbackTolerance,r=i.fallbackOffset,s=t.touches?t.touches[0]:t,o=s.clientX-I.clientX+r.x,a=s.clientY-I.clientY+r.y,d=t.touches?"translate3d("+o+"px,"+a+"px,0)":"translate("+o+"px,"+a+"px)";if(!e.active){if(n&&ie(te(s.clientX-this._lastX),te(s.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),H=!0,q=s,l(C,"webkitTransform",d),l(C,"mozTransform",d),l(C,"msTransform",d),l(C,"transform",d),t.preventDefault()}},_appendGhost:function(){if(!C){var e,t=k.getBoundingClientRect(),i=l(k),n=this.options;C=k.cloneNode(!0),a(C,n.ghostClass,!1),a(C,n.fallbackClass,!0),a(C,n.dragClass,!0),l(C,"top",t.top-V(i.marginTop,10)),l(C,"left",t.left-V(i.marginLeft,10)),l(C,"width",t.width),l(C,"height",t.height),l(C,"opacity","0.8"),l(C,"position","fixed"),l(C,"zIndex","100000"),l(C,"pointerEvents","none"),n.fallbackOnBody&&Y.body.appendChild(C)||j.appendChild(C),e=C.getBoundingClientRect(),l(C,"width",2*t.width-e.width),l(C,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var i=e.dataTransfer,n=this.options;this._offUpEvents(),N.checkPull(this,this,k,e)&&($=b(k),$.draggable=!1,$.style["will-change"]="",l($,"display","none"),a($,this.options.chosenClass,!1),j.insertBefore($,k),c(this,j,"clone",k)),a(k,n.dragClass,!0),t?("touch"===t?(s(Y,"touchmove",this._onTouchMove),s(Y,"touchend",this._onDrop),s(Y,"touchcancel",this._onDrop),s(Y,"pointermove",this._onTouchMove),s(Y,"pointerup",this._onDrop)):(s(Y,"mousemove",this._onTouchMove),s(Y,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",n.setData&&n.setData.call(this,i,k)),s(Y,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(n){var r,s,o,a,d=this.el,c=this.options,h=c.group,g=e.active,m=N===h,v=!1,_=c.sort;if(void 0!==n.preventDefault&&(n.preventDefault(),!c.dragoverBubble&&n.stopPropagation()),!k.animated&&(H=!0,g&&!c.disabled&&(m?_||(a=!j.contains(k)):M===this||(g.lastPullMode=N.checkPull(this,g,k,n))&&h.checkPut(this,g,k,n))&&(void 0===n.rootEl||n.rootEl===this.el))){if(se(n,c,this.el),ee)return;if(r=i(n.target,c.draggable,d),s=k.getBoundingClientRect(),M!==this&&(M=this,v=!0),a)return t(g,!0),x=j,void($||T?j.insertBefore(k,$||T):_||j.appendChild(k));if(0===d.children.length||d.children[0]===C||d===n.target&&(r=f(d,n))){if(r){if(r.animated)return;o=r.getBoundingClientRect()}t(g,m),u(j,d,k,s,r,o,n)!==!1&&(k.contains(d)||(d.appendChild(k),x=d),this._animate(s,k),r&&this._animate(o,r))}else if(r&&!r.animated&&r!==k&&void 0!==r.parentNode[K]){E!==r&&(E=r,A=l(r),P=l(r.parentNode)),o=r.getBoundingClientRect();var y=o.right-o.left,b=o.bottom-o.top,w=W.test(A.cssFloat+A.display)||"flex"==P.display&&0===P["flex-direction"].indexOf("row"),D=r.offsetWidth>k.offsetWidth,O=r.offsetHeight>k.offsetHeight,S=(w?(n.clientX-o.left)/y:(n.clientY-o.top)/b)>.5,F=r.nextElementSibling,R=u(j,d,k,s,r,o,n),z=!1;if(R!==!1){if(ee=!0,setTimeout(p,30),t(g,m),1===R||-1===R)z=1===R;else if(w){var I=k.offsetTop,q=r.offsetTop;z=I===q?r.previousElementSibling===k&&!D||S&&D:r.previousElementSibling===k||k.previousElementSibling===r?(n.clientY-o.top)/b>.5:q>I}else v||(z=F!==k&&!O||S&&O);k.contains(d)||(z&&!F?d.appendChild(k):r.parentNode.insertBefore(k,z?F:r)),x=k.parentNode,this._animate(s,k),this._animate(o,r)}}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),l(t,"transition","none"),l(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,l(t,"transition","all "+i+"ms"),l(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){l(t,"transition",""),l(t,"transform",""),t.animated=!1},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;o(Y,"touchmove",this._onTouchMove),o(Y,"pointermove",this._onTouchMove),o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"pointerup",this._onDrop),o(e,"touchcancel",this._onDrop),o(e,"selectstart",this)},_onDrop:function(t){var i=this.el,n=this.options;clearInterval(this._loopId),clearInterval(L.pid),clearTimeout(this._dragStartTimer),o(Y,"mousemove",this._onTouchMove),this.nativeDraggable&&(o(Y,"drop",this),o(i,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(H&&(t.preventDefault(),!n.dropBubble&&t.stopPropagation()),C&&C.parentNode.removeChild(C),j!==x&&"clone"===e.active.lastPullMode||$&&$.parentNode.removeChild($),k&&(this.nativeDraggable&&o(k,"dragend",this),h(k),k.style["will-change"]="",a(k,this.options.ghostClass,!1),a(k,this.options.chosenClass,!1),j!==x?(z=m(k,n.draggable),z>=0&&(c(null,x,"add",k,j,R,z),c(this,j,"remove",k,j,R,z),c(null,x,"sort",k,j,R,z),c(this,j,"sort",k,j,R,z))):k.nextSibling!==T&&(z=m(k,n.draggable),z>=0&&(c(this,j,"update",k,j,R,z),c(this,j,"sort",k,j,R,z))),e.active&&(null!=z&&-1!==z||(z=R),c(this,j,"end",k,j,R,z),this.save()))),this._nulling()},_nulling:function(){j=k=x=C=T=$=D=O=S=I=q=H=z=E=A=M=N=e.active=null,ne.forEach(function(e){e.checked=!0}),ne.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":k&&(this._onDragOver(e),r(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,s=n.length,o=this.options;s>r;r++)e=n[r],i(e,o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||g(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var s=n.children[r];i(s,this.options.draggable,n)&&(t[e]=s)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return i(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;return void 0===t?i[e]:(i[e]=t,void("group"===e&&oe(i)))},destroy:function(){var e=this.el;e[K]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),o(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),re.splice(re.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},s(Y,"touchmove",function(t){e.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){X={capture:!1,passive:!1}}}))}catch(e){}return e.utils={on:s,off:o,css:l,find:d,is:function(e,t){return!!i(e,t,e)},extend:y,throttle:_,closest:i,toggleClass:a,clone:b,index:m},e.create=function(t,i){return new e(t,i)},e.version="1.5.1",e}),window.arctic={},window.arctic.utils={getCookie:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var i=document.cookie.split(";"),n=0;n<i.length;n++){var r=jQuery.trim(i[n]);if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t},growl:function e(t,i,n){var e='<div class="growl '+t+'">             <h6>'+i+"</h6>             <p>"+n+"</p>         </div>",e=$(e);return $("body").append(e),e},slugify:function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}},function(e){var t={token:arctic.utils.getCookie("csrftoken"),init:function(){this.ajaxSetup()},csrfSafeMethod:function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)},ajaxSetup:function(){var t=this;e.ajaxSetup({beforeSend:function(e,i){t.csrfSafeMethod(i.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",t.token)}})}};t.init()}(jQuery),function(e){function t(t){if(!(t instanceof jQuery||"id"==t.attr("id")))throw new Error("Expecting a jQuery object with an ID attribute");this.form=t.closest("form"),this.state=0,this.element=t,this.id=t.attr("id"),this.value=t.val(),this.checkbox=e('<input type="checkbox" id="'+this.id+'_toggler" />'),this.setup(),this.init()}t.prototype.setup=function(){this.element.parent().addClass("is-conditional-field"),this.value&&(this.state=1,this.checkbox=this.checkbox.attr("checked","checked")),this.element.before(this.checkbox),this.checkbox.wrap('<div class="input-group-label"></div>'),this.element.wrap('<div class="input-group-field"></div>')},t.prototype.init=function(){var e=this;this.value?this.visible():this.hidden(),this.checkbox.change(function(){this.checked?e.visible():e.hidden()}),this.form.on("submit",function(t){t.preventDefault(),0===e.state&&e.empty(e),this.submit()})},t.prototype.hidden=function(){this.element.parent().hide(),this.state=0},t.prototype.visible=function(){this.element.parent().show(),this.state=1},t.prototype.empty=function(e){e.element.val(""),console.log("emptied selectbox")},e(document).ready(function(){var i=e("#id_shops");new t(i)})}(jQuery),function(){var e=$("input[data-to-slugify]"),t=$(e.data("to-slugify")),i=e.val(),n=t.val();if(e.length&&t.length){var r=n;t.on("keyup",function(){var i=t.val();r!=i&&(r=i,e.val(arctic.utils.slugify(t.val())))}),(""!=e.val()||""!=t.val())&&e.closest("form").on("submit",function(){arctic.utils.slugify(t.val());if(i!=e.val()||n!=t.val()){var r;if(r="Slug is aangepast",!confirm(r))return!1}})}}(),function(e){var t={};t.element='<section id="reveal-iframe" class="reveal external" data-reveal><iframe frameborder="0" allowfullscreen></iframe></section>',t.element=e(t.element),t.parameter="dialog=1",t.size=null,t.url=null,t.ready=!1,t.extraScrollHeight=20;var i={init:function(e){var t=this;if(!e instanceof jQuery)throw new Error("$triggers is not a jQuery object");t.listeners(e)},listeners:function(i){i.on("click",function(i){i.preventDefault();var n=e(this);t.url=n.data("url"),t.size=n.data("size"),t.minHeight=n.data("min-height"),t.open(t.url,t.size,t.minHeight)}),t.element.on("closed.zf.reveal",function(){t.close()})}},n={init:function(e){var t=this;t.setup(e),t.listeners(e)},setup:function(e){var t=this;t.linksToDialog(e)},linksToDialog:function(i){var n=i.find("a");if(n.length)for(var r=0;r<n.length;r++){var s=e(n[r]),o=s.attr("href");void 0!=o&&o.length&&(o=o.match(/\?./)?o+"&"+t.parameter:o+"?"+t.parameter,s.attr("href",o))}},isUrlParameter:function(e,t){return-1!=e.indexOf("?"+t+"=")?!0:-1!=e.indexOf("&"+t+"=")?!0:!1},listeners:function(t){var i=this,n=t.data("refresh-parent");n&&window.parent.location.reload(),window.parent===window?i.dialog=e("body").find(".reveal"):i.dialog=window.parent.$(window.parent.document).find(".reveal");var r=t.data("auto-close");r&&i.dialog.foundation("close");var s=t.find("[data-go-back-dialog]");s.on("click",function(e){if(document.referrer.length){var t=document.referrer,n=i.isUrlParameter(t,"dialog");if(n)return void history.back()}e.preventDefault(),i.dialog.foundation("close"),s.off("click")});var o=t.find("[data-close-dialog]");o.on("click",function(e){e.preventDefault(),i.dialog.foundation("close"),o.off("click")})}};e.extend(t,{addDialog:function(){var t=this,i=e("body").find(t.dialog).length;0==i&&(t.dialog=t.element,e("body").find(t.dialog),new Foundation.Reveal(t.dialog))},open:function(e,i,n){var r=this;r.addDialog(),t.ready=!1,r.setDialogSize(i),r.setIframeSrc(e,r.setIframeDimensions,n)},setDialogSize:function(e){var t=this;void 0!==e&&e.length?t.dialog.addClass(e):t.dialog.addClass("tiny")},setIframeSrc:function(e,i,n){var r=this,s=r.dialog.find("iframe");s.load(function(){t.ready||(t.ready=!0,i(r,n))}).attr("src",e)},setIframeDimensions:function(t,i){var n=t.dialog.find("iframe");if(i)n.css("height",i);else{var r=n.contents().find(".block-wrapper"),s=r[0].scrollHeight;n.css("height",s+t.extraScrollHeight)}t.repositionIframe(n),e(window).trigger("resize")},repositionIframe:function(e){var t=e.height(),i=window.innerHeight,n=(i-t)/2;e.parent().css("top",n)},close:function(){var e=this;e.disableAreYouSure(),e.removeIframeMarkUp(),e.removeDialogSizes()},disableAreYouSure:function(){var e=this,t=e.dialog.find("iframe"),i=t.contents().find(".dirty-check");i.removeClass("dirty"),i.areYouSure({silent:!0})},removeIframeMarkUp:function(){var e=this;e.dialog.find("iframe").removeAttr("style").removeAttr("src")},removeDialogSizes:function(){for(var e=this,t=["tiny","small","large","full"],i=0;i<t.length;i++)e.dialog.removeClass(t[i])},destroy:function(e){var t=this;if(t.dialog.remove(),t.dialog.off("open.zf.reveal"),t.dialog.off("close.zf.reveal"),e.length){if(!e instanceof jQuery)throw new Error("$triggers is not a jQuery object");e.off("click")}}}),window.arctic.utils.revealInIframe={open:function(e,i){t.open(e,i),t.element.foundation("open")},close:function(){t.close()}},e(document).ready(function(){var t=e("body.dialog"),r=e("[data-open][data-url]");r.length?i.init(r):t.length&&n.init(t)})}(jQuery),function(e,t){function i(t){this.element=e("[data-sortable]"),this.rowClass="",this.row="",this.sortHandle="",this.deleteHandle="",this.deletePlaceholder="";var i=this;i.init()}i.prototype.init=function(){var e=this;if(e.element.size()){if(e.rowClass=e.element.data("row"),e.row=e.element.find(e.rowClass),!e.row.size())return void console.log("Sortable: data-to-sort not valid or empty");e.deleteHandle=e.row.find(e.element.data("delete-handle")),e.deleteHandle.size()&&e.deleteHandle.on("click",function(t){e.remove(this,e)}),e.sorting()}},i.prototype.sorting=function(){var e=this,i=e.element.get(0),n={animation:200,onUpdate:function(t){e.recalc()}};e.sortHandle=e.element.data("sort-handle"),void 0!=e.sortHandle&&(n.handle=e.sortHandle);t.create(i,n)},i.prototype.recalc=function(){var t=this,i=e(t.rowClass);i.each(function(n,r){var s=e(r),o=parseInt(i.index(s)),a=s.data("sort-placeholder");a=s.find(a),a.size()||(a=e(t.sortPlaceholder)),a.size()&&a.val(o)})},i.prototype.remove=function(t,i){var n=e(t),r=n.closest(i.rowClass),s=r.parent();i.deletePlaceholderClass=i.element.data("delete-placeholder"),i.deletePlaceholder=r.find(i.deletePlaceholderClass),i.deletePlaceholder.size()&&i.deletePlaceholder.prop("checked",!0),r.addClass("removed").appendTo(s),i.recalc()},new i}(jQuery,Sortable),$(document).foundation(),String.prototype.replaceAll=function(e,t){var i=this;return i.split(e).join(t)},$(document).ready(function(){function e(e){n.val((parseInt(n.val())||0)+e)}var t=$(".off-canvas"),i=$("#menu-button");t.on("opened.zf.offcanvas",function(){i.addClass("is-active")}),t.on("closed.zf.offcanvas",function(){i.removeClass("is-active")});var n=$(".stepper-input input"),r=$(".stepper-input button")[0];$(r).click(function(){e(-1)});var s=$(".stepper-input button")[1];$(s).click(function(){e(1)});var o=$("form.dirty-check");o.size()&&!window.parent!=window&&(o.areYouSure(),$("form").on("dirty.areYouSure",function(){var e=$(".tabs-title.is-active a")[0];e&&"●"!=e.text[0]&&(e.text="● "+e.text),document.title="● "+document.title}),$("form").on("clean.areYouSure",function(){var e=$(".tabs-title.is-active a")[0];e&&(e.text=e.text.slice(2)),document.title=document.title.slice(2)})),set_input_widgets()}),$(document).ready(function(){var e=$(".query-builder"),t=e.data("filters-var"),i=window[t];if(e.size()&&void 0!==i){var n={};n.icons={add_group:"fa fa-plus-square",add_rule:"fa fa-plus-circle",remove_group:"fa fa-minus-square",remove_rule:"fa fa-minus-circle",error:"fa fa-exclamation-triangle"},n.allow_groups=1,n.filters=i;var r,s=e.data("conditions-var");"undefined"!=typeof s&&(r=window[s],n.rules=r),e.queryBuilder(n);var o=e.closest("form"),a=o.find('[type="submit"]');a.on("click",function(t){var i=e.queryBuilder("getRules");$.isEmptyObject(i)||$("#id_conditions").val(JSON.stringify(i,null,2))})}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){if(!e.jstree){var i=0,n=!1,r=!1,s=!1,o=[],a=e("script:last").attr("src"),l=window.document;e.jstree={version:"3.3.3",defaults:{plugins:[]},plugins:{},path:a&&-1!==a.indexOf("/")?a.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,n){var r=new e.jstree.core(++i),s=n;return n=e.extend(!0,{},e.jstree.defaults,n),s&&s.plugins&&(n.plugins=s.plugins),e.each(n.plugins,function(e,t){"core"!==e&&(r=r.plugin(t,n[t]))}),e(t).data("jstree",r),r.init(t,n),r},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(l).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var i=null,n=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!n||!n.length)try{n=e(t)}catch(r){}if(!n||!n.length)try{n=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(r){}return n&&n.length&&(n=n.closest(".jstree")).length&&(n=n.data("jstree"))?i=n:e(".jstree").each(function(){var n=e(this).data("jstree");return n&&n._model.data[t]?(i=n,!1):void 0}),i},e.fn.jstree=function(i){var n="string"==typeof i,r=Array.prototype.slice.call(arguments,1),s=null;return i!==!0||this.length?(this.each(function(){var o=e.jstree.reference(this),a=n&&o?o[i]:null;return s=n&&a?a.apply(o,r):null,o||n||i!==t&&!e.isPlainObject(i)||e.jstree.create(this,i),(o&&!n||i===!0)&&(s=o||!1),null!==s&&s!==t?!1:void 0}),null!==s&&s!==t?s:this):!1},e.expr.pseudos.jstree=e.expr.createPseudo(function(i){return function(i){return e(i).hasClass("jstree")&&e(i).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,i){var n=e.jstree.plugins[t];return n?(this._data[t]={},n.prototype=this,new n(i,this)):this},init:function(t,i){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,i=l.createElement("LI");return i.setAttribute("role","treeitem"),e=l.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),i.appendChild(e),e=l.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=l.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),i.appendChild(e),e=t=null,i},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",i=null,n=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(l.selection&&l.selection.empty)l.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(i){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),n=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return e.target.tagName&&"input"===e.target.tagName.toLowerCase()?!0:void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==l.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName&&"input"===t.target.tagName.toLowerCase())return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var i=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget),i&&i.id!==e.jstree.root&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault(),i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],i&&e(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:t.preventDefault(),i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&e(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:t.preventDefault(),this.edit(t.currentTarget)}},this)).on("load_node.jstree",e.proxy(function(t,i){i.status&&(i.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,i,n=[];for(t=0,i=this._data.core.selected.length;i>t;t++)n=n.concat(this._model.data[this._data.core.selected[t]].parents);for(n=e.vakata.array_unique(n),t=0,i=n.length;i>t;t++)this.open_node(n[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(n){if(n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!0;i&&clearTimeout(i),i=setTimeout(function(){t=""},500);var r=String.fromCharCode(n.which).toLowerCase(),s=this.element.find(".jstree-anchor").filter(":visible"),o=s.index(l.activeElement)||0,a=!1;if(t+=r,t.length>1){if(s.slice(o).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),a=!0,!1):void 0},this)),a)return;if(s.slice(0,o).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),a=!0,!1):void 0},this)),a)return}if(new RegExp("^"+r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(s.slice(o+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===r?(e(i).focus(),a=!0,!1):void 0},this)),a)return;if(s.slice(0,o+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===r?(e(i).focus(),a=!0,!1):void 0},this)),a)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,
this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-n>500&&!this._data.core.focused){n=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(l).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return e.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,i){t&&t.id&&(t=t.id);var n;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(n=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else if((n=e(t,this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else{if(!(n=e(t,this.element)).length||!n.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return i&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(r){return!1}},get_path:function(t,i,n){if(t=t.parents?t:this.get_node(t),!t||t.id===e.jstree.root||!t.parents)return!1;var r,s,o=[];for(o.push(n?t.id:t.text),r=0,s=t.parents.length;s>r;r++)o.push(n?t.parents[r]:this.get_text(t.parents[r]));return o=o.reverse().slice(1),i?o.join(i):o},get_next_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this._firstChild(this.get_container_ul()[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}if(t.hasClass("jstree-open")){for(n=this._firstChild(t.children(".jstree-children")[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);if(null!==n)return e(n)}n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return null!==n?e(n):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this.get_container_ul()[0].lastChild;n&&0===n.offsetHeight;)n=this._previousSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);if(null!==n){for(t=e(n);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return n=t[0].parentNode.parentNode,n&&n.className&&-1!==n.className.indexOf("jstree-node")?e(n):!1},get_parent:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.parent:!1},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):e&&e.length?e.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,i){var n,r,s,o,a;if(e.isArray(t))return this._load_nodes(t.slice(),i),!0;if(t=this.get_node(t),!t)return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,s=0,o=t.parents.length;o>s;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(i){return-1===e.inArray(i,t.children_d)});for(n=0,r=t.children_d.length;r>n;n++)this._model.data[t.children_d[n]].state.selected&&(a=!0),delete this._model.data[t.children_d[n]];a&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(i){return-1===e.inArray(i,t.children_d)})),t.children=[],t.children_d=[],a&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var n=this.get_node(t,!0),r=0,s=0,o=this._model.data,a=!1;for(r=0,s=t.children.length;s>r;r++)if(o[t.children[r]]&&!o[t.children[r]].state.hidden){a=!0;break}t.state.loaded&&n&&n.length&&(n.removeClass("jstree-closed jstree-open jstree-leaf"),a?"#"!==t.id&&n.addClass(t.state.opened?"jstree-open":"jstree-closed"):n.addClass("jstree-leaf")),n.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),i&&i.call(this,t,e)},this)),!0},_load_nodes:function(e,t,i,n){var r,s,o=!0,a=function(){this._load_nodes(e,t,!0)},l=this._model.data,d=[];for(r=0,s=e.length;s>r;r++)l[e[r]]&&(!l[e[r]].state.loaded&&!l[e[r]].state.failed||!i&&n)&&(this.is_loading(e[r])||this.load_node(e[r],a),o=!1);if(o){for(r=0,s=e.length;s>r;r++)l[e[r]]&&l[e[r]].state.loaded&&d.push(e[r]);t&&!t.done&&(t.call(this,d),t.done=!0)}},load_all:function(t,i){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var n,r,s=[],o=this._model.data,a=o[t.id].children_d;for(t.state&&!t.state.loaded&&s.push(t.id),n=0,r=a.length;r>n;n++)o[a[n]]&&o[a[n]].state&&!o[a[n]].state.loaded&&s.push(a[n]);s.length?this._load_nodes(s,function(){this.load_all(t,i)}):(i&&i.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,i){var n,r=this.settings.core.data,s=function(){return 3!==this.nodeType&&8!==this.nodeType};return r?e.isFunction(r)?r.call(this,t,e.proxy(function(n){n===!1?i.call(this,!1):this["string"==typeof n?"_append_html_data":"_append_json_data"](t,"string"==typeof n?e(e.parseHTML(n)).filter(s):n,function(e){i.call(this,e)})},this)):"object"==typeof r?r.url?(r=e.extend(!0,{},r),e.isFunction(r.url)&&(r.url=r.url.call(this,t)),e.isFunction(r.data)&&(r.data=r.data.call(this,t)),e.ajax(r).done(e.proxy(function(n,r,o){var a=o.getResponseHeader("Content-Type");return a&&-1!==a.indexOf("json")||"object"==typeof n?this._append_json_data(t,n,function(e){i.call(this,e)}):a&&-1!==a.indexOf("html")||"string"==typeof n?this._append_html_data(t,e(e.parseHTML(n)).filter(s),function(e){i.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:o})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(e.proxy(function(e){i.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(n=e.isArray(r)||e.isPlainObject(r)?JSON.parse(JSON.stringify(r)):r,t.id===e.jstree.root?this._append_json_data(t,n,function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof r?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(r)).filter(s),function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){i.call(this,e)}):i.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(t,i,n){t=this.get_node(t),t.children=[],t.children_d=[];var r,s,o,a=i.is("ul")?i.children():i,l=t.id,d=[],c=[],u=this._model.data,h=u[l],p=this._data.core.selected.length;for(a.each(e.proxy(function(t,i){r=this._parse_model_from_html(e(i),l,h.parents.concat()),r&&(d.push(r),c.push(r),u[r].children_d.length&&(c=c.concat(u[r].children_d)))},this)),h.children=d,h.children_d=c,s=0,o=h.parents.length;o>s;s++)u[h.parents[s]].children_d=u[h.parents[s]].children_d.concat(c);this.trigger("model",{nodes:c,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==p&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)},_append_json_data:function(t,i,n,r){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],i.d&&(i=i.d,"string"==typeof i&&(i=JSON.parse(i))),e.isArray(i)||(i=[i]);var s=null,o={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},a=function(e,t){e.data&&(e=e.data);var i,n,r,s,o=e.dat,a=e.par,l=[],d=[],c=[],u=e.df,h=e.t_id,p=e.t_cnt,f=e.m,g=f[a],m=e.sel,v=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l=e.id.toString(),d={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in u)u.hasOwnProperty(r)&&(d.state[r]=u[r]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),(d.icon===t||null===d.icon||""===d.icon)&&(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(d.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(d.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(d.li_attr[r]=e.li_attr[r]);if(d.li_attr.id||(d.li_attr.id=l),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(d.a_attr[r]=e.a_attr[r]);for(e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),f[d.id]=d,r=0,s=d.children.length;s>r;r++)o=v(f[d.children[r]],d.id,n),a=f[o],d.children_d.push(o),a.children_d.length&&(d.children_d=d.children_d.concat(a.children_d));return delete e.data,delete e.children,f[d.id].original=e,d.state.selected&&c.push(d.id),d.id},_=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l,d=!1;do d="j"+h+"_"+ ++p;while(f[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in u)u.hasOwnProperty(r)&&(l.state[r]=u[r]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(l.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(l.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(l.li_attr[r]=e.li_attr[r]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(l.a_attr[r]=e.a_attr[r]);if(e&&e.children&&e.children.length){for(r=0,s=e.children.length;s>r;r++)o=_(e.children[r],l.id,n),a=f[o],l.children.push(o),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,f[l.id]=l,l.state.selected&&c.push(l.id),l.id};if(o.length&&o[0].id!==t&&o[0].parent!==t){for(n=0,r=o.length;r>n;n++)o[n].children||(o[n].children=[]),f[o[n].id.toString()]=o[n];for(n=0,r=o.length;r>n;n++)f[o[n].parent.toString()].children.push(o[n].id.toString()),g.children_d.push(o[n].id.toString());for(n=0,r=g.children.length;r>n;n++)i=v(f[g.children[n]],a,g.parents.concat()),d.push(i),f[i].children_d.length&&(d=d.concat(f[i].children_d));for(n=0,r=g.parents.length;r>n;n++)f[g.parents[n]].children_d=f[g.parents[n]].children_d.concat(d);s={cnt:p,mod:f,sel:m,par:a,dpc:d,add:c}}else{for(n=0,r=o.length;r>n;n++)i=_(o[n],a,g.parents.concat()),i&&(l.push(i),d.push(i),f[i].children_d.length&&(d=d.concat(f[i].children_d)));for(g.children=l,g.children_d=d,n=0,r=g.parents.length;r>n;n++)f[g.parents[n]].children_d=f[g.parents[n]].children_d.concat(d);s={cnt:p,mod:f,sel:m,par:a,dpc:d,add:c}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?s:void postMessage(s)},l=function(t,i){if(null!==this.element){this._cnt=t.cnt;var r,s=this._model.data;for(r in s)s.hasOwnProperty(r)&&s[r].state&&s[r].state.loading&&t.mod[r]&&(t.mod[r].state.loading=!0);if(this._model.data=t.mod,i){var o,a=t.add,l=t.sel,d=this._data.core.selected.slice();if(s=this._model.data,l.length!==d.length||e.vakata.array_unique(l.concat(d)).length!==l.length){for(r=0,o=l.length;o>r;r++)-1===e.inArray(l[r],a)&&-1===e.inArray(l[r],d)&&(s[l[r]].state.selected=!1);for(r=0,o=d.length;o>r;r++)-1===e.inArray(d[r],l)&&(s[d[r]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+a.toString()],{type:"text/javascript"}))),!this._data.core.working||r?(this._data.core.working=!0,s=new window.Worker(this._wrk),s.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{s.terminate(),s=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),o.par?s.postMessage(o):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,n,!0])}catch(d){l.call(this,a(o),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,a(o),!1)}},_parse_model_from_html:function(i,n,r){r=r?[].concat(r):[],n&&r.unshift(n);var s,o,a,l,d,c=this._model.data,u={id:!1,text:!1,icon:!0,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in this._model.default_state)this._model.default_state.hasOwnProperty(a)&&(u.state[a]=this._model.default_state[a]);if(l=e.vakata.attributes(i,!0),e.each(l,function(t,i){return i=e.trim(i),i.length?(u.li_attr[t]=i,void("id"===t&&(u.id=i.toString()))):!0}),l=i.children("a").first(),l.length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,i){i=e.trim(i),i.length&&(u.a_attr[t]=i)})),l=i.children("a").first().length?i.children("a").first().clone():i.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),u.text=this.settings.core.force_text?l.text():l.html(),l=i.data(),u.data=l?e.extend(!0,{},l):null,u.state.opened=i.hasClass("jstree-open"),u.state.selected=i.children("a").hasClass("jstree-clicked"),u.state.disabled=i.children("a").hasClass("jstree-disabled"),u.data&&u.data.jstree)for(a in u.data.jstree)u.data.jstree.hasOwnProperty(a)&&(u.state[a]=u.data.jstree[a]);l=i.children("a").children(".jstree-themeicon"),l.length&&(u.icon=l.hasClass("jstree-themeicon-hidden")?!1:l.attr("rel")),u.state.icon!==t&&(u.icon=u.state.icon),(u.icon===t||null===u.icon||""===u.icon)&&(u.icon=!0),l=i.children("ul").children("li");do d="j"+this._id+"_"+ ++this._cnt;while(c[d]);return u.id=u.li_attr.id?u.li_attr.id.toString():d,l.length?(l.each(e.proxy(function(t,i){s=this._parse_model_from_html(e(i),u.id,r),o=this._model.data[s],u.children.push(s),o.children_d.length&&(u.children_d=u.children_d.concat(o.children_d))},this)),u.children_d=u.children_d.concat(u.children)):i.hasClass("jstree-closed")&&(u.state.loaded=!1),u.li_attr["class"]&&(u.li_attr["class"]=u.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),u.a_attr["class"]&&(u.a_attr["class"]=u.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),c[u.id]=u,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_flat_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l=e.id.toString(),d=this._model.data,c=this._model.default_state,u={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in c)c.hasOwnProperty(r)&&(u.state[r]=c[r]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),(u.icon===t||null===u.icon||""===u.icon)&&(u.icon=!0),e&&e.data&&(u.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(u.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(u.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(u.li_attr[r]=e.li_attr[r]);if(u.li_attr.id||(u.li_attr.id=l),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(u.a_attr[r]=e.a_attr[r]);for(e&&e.children&&e.children===!0&&(u.state.loaded=!1,u.children=[],u.children_d=[]),d[u.id]=u,r=0,s=u.children.length;s>r;r++)o=this._parse_model_from_flat_json(d[u.children[r]],u.id,n),a=d[o],u.children_d.push(o),a.children_d.length&&(u.children_d=u.children_d.concat(a.children_d));return delete e.data,delete e.children,d[u.id].original=e,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l,d=!1,c=this._model.data,u=this._model.default_state;do d="j"+this._id+"_"+ ++this._cnt;while(c[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in u)u.hasOwnProperty(r)&&(l.state[r]=u[r]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(l.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(l.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(l.li_attr[r]=e.li_attr[r]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(l.a_attr[r]=e.a_attr[r]);if(e&&e.children&&e.children.length){for(r=0,s=e.children.length;s>r;r++)o=this._parse_model_from_json(e.children[r],l.id,n),a=c[o],l.children.push(o),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,c[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,i,n,r=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),s=l.createElement("UL"),o=this._data.core.focused;for(i=0,n=r.length;n>i;i++)t=this.redraw_node(r[i],!0,this._model.force_full_redraw),t&&this._model.force_full_redraw&&s.appendChild(t);this._model.force_full_redraw&&(s.className=this.get_container_ul()[0].className,s.setAttribute("role","group"),this.element.empty().append(s)),null!==o&&(t=this.get_node(o,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==l.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:r})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var i=this.get_node(t),n=!1,r=!1,s=!1,o=l;if(!i)return!1;if(i.id===e.jstree.root)return this.redraw(!0);if(t=this.get_node(t,!0),!t||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],i.children.length&&i.state.loaded){for(s=o.createElement("UL"),s.setAttribute("role","group"),s.className="jstree-children",n=0,r=i.children.length;r>n;n++)s.appendChild(this.redraw_node(i.children[n],!0,!0));t.appendChild(s)}},redraw_node:function(t,i,n,r){var s=this.get_node(t),o=!1,a=!1,d=!1,c=!1,u=!1,h=!1,p="",f=l,g=this._model.data,m=!1,v=null,_=0,y=0,b=!1,w=!1;if(!s)return!1;if(s.id===e.jstree.root)return this.redraw(!0);if(i=i||0===s.children.length,t=l.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(s.id[0])?"\\3"+s.id[0]+" "+s.id.substr(1).replace(e.jstree.idregex,"\\$&"):s.id.replace(e.jstree.idregex,"\\$&"))):l.getElementById(s.id))t=e(t),n||(o=t.parent().parent()[0],o===this.element[0]&&(o=null),a=t.index()),i||!s.children.length||t.children(".jstree-children").length||(i=!0),i||(d=t.children(".jstree-children")[0]),m=t.children(".jstree-anchor")[0]===l.activeElement,t.remove();else if(i=!0,!n){if(o=s.parent!==e.jstree.root?e("#"+s.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===o||o&&g[s.parent].state.opened))return!1;a=e.inArray(s.id,null===o?g[e.jstree.root].children:g[s.parent].children)}t=this._data.core.node.cloneNode(!0),p="jstree-node ";for(c in s.li_attr)if(s.li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"!==c?t.setAttribute(c,s.li_attr[c]):p+=s.li_attr[c]}for(s.a_attr.id||(s.a_attr.id=s.id+"_anchor"),t.setAttribute("aria-selected",!!s.state.selected),t.setAttribute("aria-level",s.parents.length),t.setAttribute("aria-labelledby",s.a_attr.id),s.state.disabled&&t.setAttribute("aria-disabled",!0),c=0,u=s.children.length;u>c;c++)if(!g[s.children[c]].state.hidden){b=!0;break}if(null!==s.parent&&g[s.parent]&&!s.state.hidden&&(c=e.inArray(s.id,g[s.parent].children),w=s.id,-1!==c))for(c++,u=g[s.parent].children.length;u>c&&(g[g[s.parent].children[c]].state.hidden||(w=g[s.parent].children[c]),w===s.id);c++);s.state.hidden&&(p+=" jstree-hidden"),s.state.loaded&&!b?p+=" jstree-leaf":(p+=s.state.opened&&s.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",s.state.opened&&s.state.loaded)),w===s.id&&(p+=" jstree-last"),t.id=s.id,t.className=p,p=(s.state.selected?" jstree-clicked":"")+(s.state.disabled?" jstree-disabled":"");for(u in s.a_attr)if(s.a_attr.hasOwnProperty(u)){if("href"===u&&"#"===s.a_attr[u])continue;"class"!==u?t.childNodes[1].setAttribute(u,s.a_attr[u]):p+=" "+s.a_attr[u]}if(p.length&&(t.childNodes[1].className="jstree-anchor "+p),(s.icon&&s.icon!==!0||s.icon===!1)&&(s.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===s.icon.indexOf("/")&&-1===s.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+s.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+s.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(f.createTextNode(s.text)):t.childNodes[1].innerHTML+=s.text,i&&s.children.length&&(s.state.opened||r)&&s.state.loaded){for(h=f.createElement("UL"),h.setAttribute("role","group"),h.className="jstree-children",c=0,u=s.children.length;u>c;c++)h.appendChild(this.redraw_node(s.children[c],i,!0));t.appendChild(h)}if(d&&t.appendChild(d),!n){for(o||(o=this.element[0]),c=0,u=o.childNodes.length;u>c;c++)if(o.childNodes[c]&&o.childNodes[c].className&&-1!==o.childNodes[c].className.indexOf("jstree-children")){v=o.childNodes[c];break}v||(v=f.createElement("UL"),v.setAttribute("role","group"),v.className="jstree-children",o.appendChild(v)),o=v,a<o.childNodes.length?o.insertBefore(t,o.childNodes[a]):o.appendChild(t),m&&(_=this.element[0].scrollTop,y=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=_,this.element[0].scrollLeft=y)}return s.state.opened&&!s.state.loaded&&(s.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(s.id,!1,0)},this),0)),t},open_node:function(i,n,r){var s,o,a,l;if(e.isArray(i)){for(i=i.slice(),s=0,o=i.length;o>s;s++)this.open_node(i[s],n,r);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?(r=r===t?this.settings.core.animation:r,this.is_closed(i)?this.is_loaded(i)?(a=this.get_node(i,!0),l=this,a.length&&(r&&a.children(".jstree-children").length&&a.children(".jstree-children").stop(!0,!0),i.children.length&&!this._firstChild(a.children(".jstree-children")[0])&&this.draw_children(i),r?(this.trigger("before_open",{node:i}),a.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",l.element&&l.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),a[0].className=a[0].className.replace("jstree-closed","jstree-open"),a[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,n&&n.call(this,i,!0),a.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),r&&a.length||this.trigger("after_open",{node:i}),!0):this.is_loading(i)?setTimeout(e.proxy(function(){this.open_node(i,n,r)},this),500):void this.load_node(i,function(e,t){return t?this.open_node(e,n,r):n?n.call(this,e,!1):!1}):(n&&n.call(this,i,!1),!1)):!1},_open_to:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var i,n,r=t.parents;for(i=0,n=r.length;n>i;i+=1)i!==e.jstree.root&&this.open_node(r[i],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(i,n){var r,s,o,a;if(e.isArray(i)){for(i=i.slice(),r=0,s=i.length;s>r;r++)this.close_node(i[r],n);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?this.is_closed(i)?!1:(n=n===t?this.settings.core.animation:n,o=this,a=this.get_node(i,!0),i.state.opened=!1,this.trigger("close_node",{node:i}),void(a.length?n?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(n,function(){this.style.display="",a.children(".jstree-children").remove(),o.element&&o.trigger("after_close",{node:i})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:i})):this.trigger("after_close",{node:i}))):!1},toggle_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,i,n){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var r,s,o,a=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!a.length){for(r=0,s=t.children_d.length;s>r;r++)this.is_closed(this._model.data[t.children_d[r]])&&(this._model.data[t.children_d[r]].state.opened=!0);return this.trigger("open_all",{node:t})}n=n||a,o=this,a=this.is_closed(t)?a.find(".jstree-closed").addBack():a.find(".jstree-closed"),a.each(function(){o.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,n)},i||0)}),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(t,i){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var n,r,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),o=this;for(s.length&&(s=this.is_open(t)?s.find(".jstree-open").addBack():s.find(".jstree-open"),e(s.get().reverse()).each(function(){o.close_node(this,i||0)})),n=0,r=t.children_d.length;r>n;n++)this._model.data[t.children_d[n]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.enable_node(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t})):!1},disable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.disable_node(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t})):!1},is_hidden:function(e){return e=this.get_node(e),e.state.hidden===!0},hide_node:function(t,i){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.hide_node(t[n],!0);return i||this.redraw(),!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),i||this.redraw(),this.trigger("hide_node",{node:t}))):!1},show_node:function(t,i){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.show_node(t[n],!0);return i||this.redraw(),!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),i||this.redraw(),this.trigger("show_node",{node:t}))):!1},hide_all:function(t){var i,n=this._model.data,r=[];for(i in n)n.hasOwnProperty(i)&&i!==e.jstree.root&&!n[i].state.hidden&&(n[i].state.hidden=!0,r.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:r}),r},show_all:function(t){var i,n=this._model.data,r=[];for(i in n)n.hasOwnProperty(i)&&i!==e.jstree.root&&n[i].state.hidden&&(n[i].state.hidden=!1,
r.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:r}),r},activate_node:function(e,i){if(this.is_disabled(e))return!1;if(i&&"object"==typeof i||(i={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(i.shiftKey){var n,r,s=this.get_node(e).id,o=this._data.core.last_clicked.id,a=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(n=0,r=a.length;r>n;n+=1)a[n]===s&&(l=!l),a[n]===o&&(l=!l),this.is_disabled(a[n])||!l&&a[n]!==s&&a[n]!==o?this.deselect_node(a[n],!0,i):this.is_hidden(a[n])||this.select_node(a[n],!0,!1,i);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:i})}else this.is_selected(e)?this.deselect_node(e,!1,i):this.select_node(e,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,i):(this.deselect_all(!0),this.select_node(e,!1,!1,i),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:i})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),e&&e.length&&e.children(".jstree-hovered").length?(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)})):!1},select_node:function(t,i,n,r){var s,o,a;if(e.isArray(t)){for(t=t.slice(),o=0,a=t.length;a>o;o++)this.select_node(t[o],i,n,r);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(s=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),n||(s=this._open_to(t)),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:r}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:r})))):!1},deselect_node:function(t,i,n){var r,s,o;if(e.isArray(t)){for(t=t.slice(),r=0,s=t.length;s>r;r++)this.deselect_node(t[r],i,n);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(o=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:n}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:n})))):!1},select_all:function(t){var i,n,r=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),i=0,n=this._data.core.selected.length;n>i;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:r})},deselect_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;i>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:n}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:n})},is_selected:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.state.selected:!1},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var i,n,r,s,o=this.get_selected(!0),a={};for(i=0,n=o.length;n>i;i++)a[o[i].id]=o[i];for(i=0,n=o.length;n>i;i++)for(r=0,s=o[i].children_d.length;s>r;r++)a[o[i].children_d[r]]&&delete a[o[i].children_d[r]];o=[];for(i in a)a.hasOwnProperty(i)&&o.push(i);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},get_bottom_selected:function(t){var i,n,r=this.get_selected(!0),s=[];for(i=0,n=r.length;n>i;i++)r[i].children.length||s.push(r[i].id);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},get_state:function(){var t,i={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.opened&&i.core.open.push(t),this._model.data[t].state.selected&&i.core.selected.push(t));return i},set_state:function(i,n){if(i){if(i.core){var r,s;if(i.core.open)return e.isArray(i.core.open)&&i.core.open.length?this._load_nodes(i.core.open,function(e){this.open_node(e,!1,0),delete i.core.open,this.set_state(i,n)}):(delete i.core.open,this.set_state(i,n)),!1;if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,n),!1;if(i.core.selected)return r=this,this.deselect_all(),e.each(i.core.selected,function(e,t){r.select_node(t,!1,!0)}),delete i.core.selected,this.set_state(i,n),!1;for(s in i)i.hasOwnProperty(s)&&"core"!==s&&-1===e.inArray(s,this.settings.plugins)&&delete i[s];if(e.isEmptyObject(i.core))return delete i.core,this.set_state(i,n),!1}return e.isEmptyObject(i)?(i=null,n&&n.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(t,i){this._data.core.state=i===!0?{}:this.get_state(),i&&e.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var n=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+n+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,i){i&&(this.get_container_ul()[0].className=n,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var i=[],n=[],r=this._data.core.selected.concat([]);n.push(t.id),t.state.opened===!0&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){n.push(this.id),i.push(this.id)}),this._load_nodes(n,e.proxy(function(e){this.open_node(i,!1,0),this.select_node(r),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,i){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var n,r,s=this._model.data,o=t.id;for(i=i.toString(),s[t.parent].children[e.inArray(t.id,s[t.parent].children)]=i,n=0,r=t.parents.length;r>n;n++)s[t.parents[n]].children_d[e.inArray(t.id,s[t.parents[n]].children_d)]=i;for(n=0,r=t.children.length;r>n;n++)s[t.children[n]].parent=i;for(n=0,r=t.children_d.length;r>n;n++)s[t.children_d[n]].parents[e.inArray(t.id,s[t.children_d[n]].parents)]=i;return n=e.inArray(t.id,this._data.core.selected),-1!==n&&(this._data.core.selected[n]=i),n=this.get_node(t.id,!0),n&&(n.attr("id",i),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",i)),delete s[t.id],t.id=i,t.li_attr.id=i,s[i]=t,this.trigger("set_id",{node:t,"new":t.id,old:o}),!0},get_text:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.text:!1},set_text:function(t,i){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.set_text(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0):!1},get_json:function(t,i,n){if(t=this.get_node(t||e.jstree.root),!t)return!1;i&&i.flat&&!n&&(n=[]);var r,s,o={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:i&&i.no_data?!1:e.extend(!0,{},t.data)};if(i&&i.flat?o.parent=t.parent:o.children=[],i&&i.no_state)delete o.state;else for(r in t.state)t.state.hasOwnProperty(r)&&(o.state[r]=t.state[r]);if(i&&i.no_li_attr&&delete o.li_attr,i&&i.no_a_attr&&delete o.a_attr,i&&i.no_id&&(delete o.id,o.li_attr&&o.li_attr.id&&delete o.li_attr.id,o.a_attr&&o.a_attr.id&&delete o.a_attr.id),i&&i.flat&&t.id!==e.jstree.root&&n.push(o),!i||!i.no_children)for(r=0,s=t.children.length;s>r;r++)i&&i.flat?this.get_json(t.children[r],i,n):o.children.push(this.get_json(t.children[r],i));return i&&i.flat?n:t.id===e.jstree.root?o.children:o},create_node:function(i,n,r,s,o){if(null===i&&(i=e.jstree.root),i=this.get_node(i),!i)return!1;if(r=r===t?"last":r,!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,n,r,s,!0)});n||(n={text:this.get_string("New node")}),"string"==typeof n&&(n={text:n}),n.text===t&&(n.text=this.get_string("New node"));var a,l,d,c;switch(i.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":a=this.get_node(i.parent),r=e.inArray(i.id,a.children),i=a;break;case"after":a=this.get_node(i.parent),r=e.inArray(i.id,a.children)+1,i=a;break;case"inside":case"first":r=0;break;case"last":r=i.children.length;break;default:r||(r=0)}if(r>i.children.length&&(r=i.children.length),n.id||(n.id=!0),!this.check("create_node",n,i,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.id===!0&&delete n.id,n=this._parse_model_from_json(n,i.id,i.parents.concat()),!n)return!1;for(a=this.get_node(n),l=[],l.push(n),l=l.concat(a.children_d),this.trigger("model",{nodes:l,parent:i.id}),i.children_d=i.children_d.concat(l),d=0,c=i.parents.length;c>d;d++)this._model.data[i.parents[d]].children_d=this._model.data[i.parents[d]].children_d.concat(l);for(n=a,a=[],d=0,c=i.children.length;c>d;d++)a[d>=r?d+1:d]=i.children[d];return a[r]=n.id,i.children=a,this.redraw_node(i,!0),s&&s.call(this,this.get_node(n)),this.trigger("create_node",{node:this.get_node(n),parent:i.id,position:r}),n.id},rename_node:function(t,i){var n,r,s;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.rename_node(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(s=t.text,this.check("rename_node",t,this.get_parent(t),i)?(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:s}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(t){var i,n,r,s,o,a,l,d,c,u,h,p;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.delete_node(t[i]);return!0}if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;if(r=this.get_node(t.parent),s=e.inArray(t.id,r.children),u=!1,!this.check("delete_node",t,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==s&&(r.children=e.vakata.array_remove(r.children,s)),o=t.children_d.concat([]),o.push(t.id),a=0,l=t.parents.length;l>a;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_filter(this._model.data[t.parents[a]].children_d,function(t){return-1===e.inArray(t,o)});for(d=0,c=o.length;c>d;d++)if(this._model.data[o[d]].state.selected){u=!0;break}for(u&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,o)})),this.trigger("delete_node",{node:t,parent:r.id}),u&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:r.id}),d=0,c=o.length;c>d;d++)delete this._model.data[o[d]];return-1!==e.inArray(this._data.core.focused,o)&&(this._data.core.focused=null,h=this.element[0].scrollTop,p=this.element[0].scrollLeft,r.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(r,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=h,this.element[0].scrollLeft=p),this.redraw_node(r,!0),!0},check:function(t,i,n,r,s){i=i&&i.id?i:this.get_node(i),n=n&&n.id?n:this.get_node(n);var o=t.match(/^move_node|copy_node|create_node$/i)?n:i,a=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||s&&s.is_multi||i.id!==n.id&&("move_node"!==t||e.inArray(i.id,n.children)!==r)&&-1===e.inArray(n.id,i.children_d)?(o&&o.data&&(o=o.data),o&&o.functions&&(o.functions[t]===!1||o.functions[t]===!0)?(o.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})}),o.functions[t]):a===!1||e.isFunction(a)&&a.call(this,t,i,n,r,s)===!1||a&&a[t]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(i,n,r,s,o,a,l){var d,c,u,h,p,f,g,m,v,_,y,b,w,k;if(n=this.get_node(n),r=r===t?0:r,!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(i,n,r,s,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(d=0,c=i.length;c>d;d++)(v=this.move_node(i[d],n,r,s,o,!1,l))&&(n=v,r="after");return this.redraw(),!0}i=i[0]}if(i=i&&i.id?i:this.get_node(i),!i||i.id===e.jstree.root)return!1;if(u=(i.parent||e.jstree.root).toString(),p=r.toString().match(/^(before|after)$/)&&n.id!==e.jstree.root?this.get_node(n.parent):n,f=l?l:this._model.data[i.id]?this:e.jstree.reference(i.id),g=!f||!f._id||this._id!==f._id,h=f&&f._id&&u&&f._model.data[u]&&f._model.data[u].children?e.inArray(i.id,f._model.data[u].children):-1,f&&f._id&&(i=f._model.data[i.id]),g)return(v=this.copy_node(i,n,r,s,o,!1,l))?(f&&f.delete_node(i),v):!1;switch(n.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(n.id,p.children);break;case"after":r=e.inArray(n.id,p.children)+1;break;case"inside":case"first":r=0;break;case"last":r=p.children.length;break;default:r||(r=0)}if(r>p.children.length&&(r=p.children.length),!this.check("move_node",i,p,r,{core:!0,origin:l,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===p.id){for(m=p.children.concat(),v=e.inArray(i.id,m),-1!==v&&(m=e.vakata.array_remove(m,v),r>v&&r--),v=[],_=0,y=m.length;y>_;_++)v[_>=r?_+1:_]=m[_];v[r]=i.id,p.children=v,this._node_changed(p.id),this.redraw(p.id===e.jstree.root)}else{for(v=i.children_d.concat(),v.push(i.id),_=0,y=i.parents.length;y>_;_++){for(m=[],k=f._model.data[i.parents[_]].children_d,b=0,w=k.length;w>b;b++)-1===e.inArray(k[b],v)&&m.push(k[b]);f._model.data[i.parents[_]].children_d=m}for(f._model.data[u].children=e.vakata.array_remove_item(f._model.data[u].children,i.id),_=0,y=p.parents.length;y>_;_++)this._model.data[p.parents[_]].children_d=this._model.data[p.parents[_]].children_d.concat(v);for(m=[],_=0,y=p.children.length;y>_;_++)m[_>=r?_+1:_]=p.children[_];for(m[r]=i.id,p.children=m,p.children_d.push(i.id),p.children_d=p.children_d.concat(i.children_d),i.parent=p.id,v=p.parents.concat(),v.unshift(p.id),k=i.parents.length,i.parents=v,v=v.concat(),_=0,y=i.children_d.length;y>_;_++)this._model.data[i.children_d[_]].parents=this._model.data[i.children_d[_]].parents.slice(0,-1*k),Array.prototype.push.apply(this._model.data[i.children_d[_]].parents,v);(u===e.jstree.root||p.id===e.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(u),this._node_changed(p.id)),a||this.redraw()}return s&&s.call(this,i,p,r),this.trigger("move_node",{node:i,parent:p.id,position:r,old_parent:u,old_position:h,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id,old_instance:f,new_instance:this}),i.id},copy_node:function(i,n,r,s,o,a,l){var d,c,u,h,p,f,g,m,v,_,y;if(n=this.get_node(n),r=r===t?0:r,!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(i,n,r,s,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(d=0,c=i.length;c>d;d++)(h=this.copy_node(i[d],n,r,s,o,!0,l))&&(n=h,r="after");return this.redraw(),!0}i=i[0]}if(i=i&&i.id?i:this.get_node(i),!i||i.id===e.jstree.root)return!1;switch(m=(i.parent||e.jstree.root).toString(),v=r.toString().match(/^(before|after)$/)&&n.id!==e.jstree.root?this.get_node(n.parent):n,_=l?l:this._model.data[i.id]?this:e.jstree.reference(i.id),y=!_||!_._id||this._id!==_._id,_&&_._id&&(i=_._model.data[i.id]),n.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(n.id,v.children);break;case"after":r=e.inArray(n.id,v.children)+1;break;case"inside":case"first":r=0;break;case"last":r=v.children.length;break;default:r||(r=0)}if(r>v.children.length&&(r=v.children.length),!this.check("copy_node",i,v,r,{core:!0,origin:l,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(g=_?_.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!g)return!1;if(g.id===!0&&delete g.id,g=this._parse_model_from_json(g,v.id,v.parents.concat()),!g)return!1;for(h=this.get_node(g),i&&i.state&&i.state.loaded===!1&&(h.state.loaded=!1),u=[],u.push(g),u=u.concat(h.children_d),this.trigger("model",{nodes:u,parent:v.id}),p=0,f=v.parents.length;f>p;p++)this._model.data[v.parents[p]].children_d=this._model.data[v.parents[p]].children_d.concat(u);for(u=[],p=0,f=v.children.length;f>p;p++)u[p>=r?p+1:p]=v.children[p];return u[r]=h.id,v.children=u,v.children_d.push(h.id),v.children_d=v.children_d.concat(h.children_d),v.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(v.id),a||this.redraw(v.id===e.jstree.root),s&&s.call(this,h,v,r),this.trigger("copy_node",{node:h,original:i,parent:v.id,position:r,old_parent:m,old_position:_&&_._id&&m&&_._model.data[m]&&_._model.data[m].children?e.inArray(i.id,_._model.data[m].children):-1,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),h.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,o,a,l=[];for(o=0,a=t.length;a>o;o++)i=this.get_node(t[o]),i&&i.id&&i.id!==e.jstree.root&&l.push(i);return l.length?(n=l,s=this,r="move_node",void this.trigger("cut",{node:t})):!1},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,o,a,l=[];for(o=0,a=t.length;a>o;o++)i=this.get_node(t[o]),i&&i.id&&i.id!==e.jstree.root&&l.push(i);return l.length?(n=l,s=this,r="copy_node",void this.trigger("copy",{node:t})):!1},get_buffer:function(){return{mode:r,node:n,inst:s}},can_paste:function(){return r!==!1&&n!==!1},paste:function(e,t){return e=this.get_node(e),e&&r&&r.match(/^(copy_node|move_node)$/)&&n?(this[r](n,e,t,!1,!1,!1,s)&&this.trigger("paste",{parent:e.id,node:n,mode:r}),n=!1,r=!1,void(s=!1)):!1},clear_buffer:function(){n=!1,r=!1,s=!1,this.trigger("clear_buffer")},edit:function(t,i,n){var r,s,o,a,d,c,u,h,p,f=!1;return(t=this.get_node(t))?this.settings.core.check_callback===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(p=t,i="string"==typeof i?i:t.text,this.set_text(t,""),t=this._open_to(t),p.text=i,r=this._data.core.rtl,s=this.element.width(),this._data.core.focused=p.id,o=t.children(".jstree-anchor").focus(),a=e("<span>"),d=i,c=e("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),u=e("<input />",{value:d,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(i){i.stopImmediatePropagation(),i.preventDefault();var r,s=a.children(".jstree-rename-input"),l=s.val(),h=this.settings.core.force_text;""===l&&(l=d),c.remove(),a.replaceWith(o),a.remove(),d=h?d:e("<div></div>").append(e.parseHTML(d)).html(),this.set_text(t,d),r=!!this.rename_node(t,h?e("<div></div>").text(l).text():e("<div></div>").append(e.parseHTML(l)).html()),r||this.set_text(t,d),this._data.core.focused=p.id,setTimeout(e.proxy(function(){var e=this.get_node(p.id,!0);e.length&&(this._data.core.focused=p.id,e.children(".jstree-anchor").focus())},this),0),n&&n.call(this,p,r,f),u=null},this),keydown:function(e){var t=e.which;27===t&&(f=!0,this.value=d),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){u.width(Math.min(c.text("pW"+this.value).width(),s))},keypress:function(e){return 13===e.which?!1:void 0}}),h={fontFamily:o.css("fontFamily")||"",fontSize:o.css("fontSize")||"",fontWeight:o.css("fontWeight")||"",fontStyle:o.css("fontStyle")||"",fontStretch:o.css("fontStretch")||"",fontVariant:o.css("fontVariant")||"",letterSpacing:o.css("letterSpacing")||"",wordSpacing:o.css("wordSpacing")||""},a.attr("class",o.attr("class")).append(o.contents().clone()).append(u),o.replaceWith(a),c.css(h),u.css(h).width(Math.min(c.text("pW"+u[0].value).width(),s))[0].select(),void e(l).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){u&&t.target!==u&&e(u).blur()})):!1},set_theme:function(t,i){if(!t)return!1;if(i===!0){var n=this.settings.core.themes.dir;n||(n=e.jstree.path+"/themes"),i=n+"/"+t+"/style.css"}i&&-1===e.inArray(i,o)&&(e("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),o.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(i,n){var r,s,o,a;if(e.isArray(i)){for(i=i.slice(),r=0,s=i.length;s>r;r++)this.set_icon(i[r],n);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?(a=i.icon,i.icon=n===!0||null===n||n===t||""===n?!0:n,o=this.get_node(i,!0).children(".jstree-anchor").children(".jstree-themeicon"),n===!1?this.hide_icon(i):n===!0||null===n||n===t||""===n?(o.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"),a===!1&&this.show_icon(i)):-1===n.indexOf("/")&&-1===n.indexOf(".")?(o.removeClass(a).css("background",""),o.addClass(n+" jstree-themeicon-custom").attr("rel",n),a===!1&&this.show_icon(i)):(o.removeClass(a).css("background",""),o.addClass("jstree-themeicon-custom").css("background","url('"+n+"') center center no-repeat").attr("rel",n),a===!1&&this.show_icon(i)),!0):!1},get_icon:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.icon:!1},hide_icon:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.hide_icon(t[i]);return!0}return t=this.get_node(t),t&&t!==e.jstree.root?(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(t){var i,n,r;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.show_icon(t[i]);return!0}return t=this.get_node(t),t&&t!==e.jstree.root?(r=this.get_node(t,!0),t.icon=r.length?r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},e.vakata={},e.vakata.attributes=function(t,i){t=e(t)[0];var n=i?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,r){-1===e.inArray(r.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==r.value&&""!==e.trim(r.value)&&(i?n[r.name]=r.value:n.push(r.name))}),n},e.vakata.array_unique=function(e){var i,n,r=[],s={};for(i=0,n=e.length;n>i;i++)s[e[i]]===t&&(r.push(e[i]),s[e[i]]=!0);return r},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,i){var n=e.inArray(i,t);return-1!==n?e.vakata.array_remove(t,n):t},e.vakata.array_filter=function(e,t,i,n,r){if(e.filter)return e.filter(t,i);n=[];for(r in e)~~r+""==r+""&&r>=0&&t.call(i,e[r],+r,e)&&n.push(e[r]);return n},e.jstree.plugins.changed=function(e,t){var i=[];this.trigger=function(e,n){var r,s;if(n||(n={}),"changed"===e.replace(".jstree","")){n.changed={selected:[],deselected:[]};var o={};for(r=0,s=i.length;s>r;r++)o[i[r]]=1;for(r=0,s=n.selected.length;s>r;r++)o[n.selected[r]]?o[n.selected[r]]=2:n.changed.selected.push(n.selected[r]);for(r=0,s=i.length;s>r;r++)1===o[i[r]]&&n.changed.deselected.push(i[r]);i=n.selected.slice()}t.trigger.call(this,e,n)},this.refresh=function(e,n){return i=[],t.refresh.apply(this,arguments)}};var d=l.createElement("I");d.className="jstree-icon jstree-checkbox",d.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(i,n){this.bind=function(){n.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var i,n,r=this._model.data,s=(r[t.parent],t.nodes);for(i=0,n=s.length;n>i;i++)r[s[i]].state.checked=r[s[i]].state.checked||r[s[i]].original&&r[s[i]].original.state&&r[s[i]].original.state.checked,r[s[i]].state.checked&&this._data.checkbox.selected.push(s[i])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,i){var n,r,s,o,a,l,d=this._model.data,c=d[i.parent],u=i.nodes,h=[],p=this.settings.checkbox.cascade,f=this.settings.checkbox.tie_selection;if(-1!==p.indexOf("down"))if(c.state[f?"selected":"checked"]){for(r=0,s=u.length;s>r;r++)d[u[r]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(u)}else for(r=0,s=u.length;s>r;r++)if(d[u[r]].state[f?"selected":"checked"]){for(o=0,a=d[u[r]].children_d.length;a>o;o++)d[d[u[r]].children_d[o]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(d[u[r]].children_d)}if(-1!==p.indexOf("up")){for(r=0,s=c.children_d.length;s>r;r++)d[c.children_d[r]].children.length||h.push(d[c.children_d[r]].parent);for(h=e.vakata.array_unique(h),o=0,a=h.length;a>o;o++)for(c=d[h[o]];c&&c.id!==e.jstree.root;){for(n=0,r=0,s=c.children.length;s>r;r++)n+=d[c.children[r]].state[f?"selected":"checked"];if(n!==s)break;c.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(c.id),l=this.get_node(c,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[f?"core":"checkbox"].selected=e.vakata.array_unique(this._data[f?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,i){var n,r,s,o,a=i.node,l=this._model.data,d=this.get_node(a.parent),c=this.get_node(a,!0),u=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection,p={},f=this._data[h?"core":"checkbox"].selected;
for(n=0,r=f.length;r>n;n++)p[f[n]]=!0;if(-1!==u.indexOf("down"))for(n=0,r=a.children_d.length;r>n;n++)p[a.children_d[n]]=!0,o=l[a.children_d[n]],o.state[h?"selected":"checked"]=!0,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1);if(-1!==u.indexOf("up"))for(;d&&d.id!==e.jstree.root;){for(s=0,n=0,r=d.children.length;r>n;n++)s+=l[d.children[n]].state[h?"selected":"checked"];if(s!==r)break;d.state[h?"selected":"checked"]=!0,p[d.id]=!0,o=this.get_node(d,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}f=[];for(n in p)p.hasOwnProperty(n)&&f.push(n);this._data[h?"core":"checkbox"].selected=f,-1!==u.indexOf("down")&&c.length&&c.find(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,i){var n,r,s,o=this.get_node(e.jstree.root),a=this._model.data;for(n=0,r=o.children_d.length;r>n;n++)s=a[o.children_d[n]],s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,i){var n,r,s,o=i.node,a=this.get_node(o,!0),l=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection,c=this._data[d?"core":"checkbox"].selected,u={};if(o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),-1!==l.indexOf("down"))for(n=0,r=o.children_d.length;r>n;n++)s=this._model.data[o.children_d[n]],s.state[d?"selected":"checked"]=!1,s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1);if(-1!==l.indexOf("up"))for(n=0,r=o.parents.length;r>n;n++)s=this._model.data[o.parents[n]],s.state[d?"selected":"checked"]=!1,s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1),s=this.get_node(o.parents[n],!0),s&&s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked");for(u={},n=0,r=c.length;r>n;n++)-1!==l.indexOf("down")&&-1!==e.inArray(c[n],o.children_d)||-1!==l.indexOf("up")&&-1!==e.inArray(c[n],o.parents)||(u[c[n]]=!0);c=[];for(n in u)u.hasOwnProperty(n)&&c.push(n);this._data[d?"core":"checkbox"].selected=c,-1!==l.indexOf("down")&&a.length&&a.find(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,i){for(var n,r,s,o,a=this.get_node(i.parent),l=this._model.data,d=this.settings.checkbox.tie_selection;a&&a.id!==e.jstree.root&&!a.state[d?"selected":"checked"];){for(s=0,n=0,r=a.children.length;r>n;n++)s+=l[a.children[n]].state[d?"selected":"checked"];if(!(r>0&&s===r))break;a.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(a.id),o=this.get_node(a,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}},this)).on("move_node.jstree",e.proxy(function(t,i){var n,r,s,o,a,l=i.is_multi,d=i.old_parent,c=this.get_node(i.parent),u=this._model.data,h=this.settings.checkbox.tie_selection;if(!l)for(n=this.get_node(d);n&&n.id!==e.jstree.root&&!n.state[h?"selected":"checked"];){for(r=0,s=0,o=n.children.length;o>s;s++)r+=u[n.children[s]].state[h?"selected":"checked"];if(!(o>0&&r===o))break;n.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),n=this.get_node(n.parent)}for(n=c;n&&n.id!==e.jstree.root;){for(r=0,s=0,o=n.children.length;o>s;s++)r+=u[n.children[s]].state[h?"selected":"checked"];if(r===o)n.state[h?"selected":"checked"]||(n.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"));else{if(!n.state[h?"selected":"checked"])break;n.state[h?"selected":"checked"]=!1,this._data[h?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[h?"core":"checkbox"].selected,n.id),a=this.get_node(n,!0),a&&a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass(h?"jstree-clicked":"jstree-checked")}n=this.get_node(n.parent)}},this))},this._undetermined=function(){if(null!==this.element){var i,n,r,s,o={},a=this._model.data,l=this.settings.checkbox.tie_selection,d=this._data[l?"core":"checkbox"].selected,c=[],u=this;for(i=0,n=d.length;n>i;i++)if(a[d[i]]&&a[d[i]].parents)for(r=0,s=a[d[i]].parents.length;s>r&&o[a[d[i]].parents[r]]===t;r++)a[d[i]].parents[r]!==e.jstree.root&&(o[a[d[i]].parents[r]]=!0,c.push(a[d[i]].parents[r]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var l,d=u.get_node(this);if(d.state.loaded){for(i=0,n=d.children_d.length;n>i;i++)if(l=a[d.children_d[i]],!l.state.loaded&&l.original&&l.original.state&&l.original.state.undetermined&&l.original.state.undetermined===!0)for(o[l.id]===t&&l.id!==e.jstree.root&&(o[l.id]=!0,c.push(l.id)),r=0,s=l.parents.length;s>r;r++)o[l.parents[r]]===t&&l.parents[r]!==e.jstree.root&&(o[l.parents[r]]=!0,c.push(l.parents[r]))}else if(d.original&&d.original.state&&d.original.state.undetermined&&d.original.state.undetermined===!0)for(o[d.id]===t&&d.id!==e.jstree.root&&(o[d.id]=!0,c.push(d.id)),r=0,s=d.parents.length;s>r;r++)o[d.parents[r]]===t&&d.parents[r]!==e.jstree.root&&(o[d.parents[r]]=!0,c.push(d.parents[r]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,n=c.length;n>i;i++)a[c[i]].state[l?"selected":"checked"]||(d=this.get_node(c[i],!0),d&&d.length&&d.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(t,i,r,s){if(t=n.redraw_node.apply(this,arguments)){var o,a,l=null,c=null;for(o=0,a=t.childNodes.length;a>o;o++)if(t.childNodes[o]&&t.childNodes[o].className&&-1!==t.childNodes[o].className.indexOf("jstree-anchor")){l=t.childNodes[o];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),c=d.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(c.className+=" jstree-checkbox-disabled"),l.insertBefore(c,l.childNodes[0]))}return r||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var i,n,r=this.settings.checkbox.cascade,s=this.settings.checkbox.tie_selection,o=this._data[s?"core":"checkbox"].selected,a=this._model.data;if(!t||t.state[s?"selected":"checked"]===!0||-1===r.indexOf("undetermined")||-1===r.indexOf("down")&&-1===r.indexOf("up"))return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(i=0,n=t.children_d.length;n>i;i++)if(-1!==e.inArray(t.children_d[i],o)||!a[t.children_d[i]].state.loaded&&a[t.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var i,n,r;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.disable_checkbox(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(r=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t})))):!1},this.enable_checkbox=function(t){var i,n,r;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.enable_checkbox(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(r=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t})))):!1},this.activate_node=function(t,i){return e(i.target).hasClass("jstree-checkbox-disabled")?!1:(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(i.target).hasClass("jstree-checkbox")?n.activate_node.call(this,t,i):this.is_disabled(t)?!1:(this.is_checked(t)?this.uncheck_node(t,i):this.check_node(t,i),void this.trigger("activate_node",{node:this.get_node(t)})))},this.check_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,i);var n,r,s;if(e.isArray(t)){for(t=t.slice(),r=0,s=t.length;s>r;r++)this.check_node(t[r],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(n=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),n&&n.length&&n.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.uncheck_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,i);var n,r,s;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.uncheck_node(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(s=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,i;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,i=this._data.checkbox.selected.length;i>t;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,i=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:i})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):(t=this.get_node(t),t&&t.id!==e.jstree.root?t.state.checked:!1)},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var i,n,r,s,o=this.get_checked(!0),a={};for(i=0,n=o.length;n>i;i++)a[o[i].id]=o[i];for(i=0,n=o.length;n>i;i++)for(r=0,s=o[i].children_d.length;s>r;r++)a[o[i].children_d[r]]&&delete a[o[i].children_d[r]];o=[];for(i in a)a.hasOwnProperty(i)&&o.push(i);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var i,n,r=this.get_checked(!0),s=[];for(i=0,n=r.length;n>i;i++)r[i].children.length||s.push(r[i].id);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},this.load_node=function(t,i){var r,s,o,a;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(a=this.get_node(t),a&&a.state.loaded))for(r=0,s=a.children_d.length;s>r;r++)this._model.data[a.children_d[r]].state.checked&&(o=!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,a.children_d[r]));return n.load_node.apply(this,arguments)},this.get_state=function(){var e=n.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,i){var r=n.set_state.apply(this,arguments);if(r&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var s=this;e.each(t.checkbox,function(e,t){s.check_node(t)})}return delete t.checkbox,this.set_state(t,i),!1}return r},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),n.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,i){this.settings.conditionalselect.call(this,this.get_node(e),i)&&t.activate_node.call(this,e,i)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,i){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.create_node(n,{},"last",function(e){setTimeout(function(){i.edit(e)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.edit(n)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.is_selected(n)?i.delete_node(i.get_selected()):i.delete_node(n)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.is_selected(n)?i.cut(i.get_top_selected()):i.cut(n)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.is_selected(n)?i.copy(i.get_top_selected()):i.copy(n)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.paste(n)}}}}}}},e.jstree.plugins.contextmenu=function(i,n){this.bind=function(){n.bind.call(this);var t,i,r=0,s=null;this.element.on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),r=e.ctrlKey?+new Date:0,(t||s)&&(r=+new Date+1e4),s&&clearTimeout(s),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!r||+new Date-r>250)&&e.vakata.context.hide(),r=0},this)).on("touchstart.jstree",".jstree-anchor",function(n){n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(t=n.originalEvent.changedTouches[0].clientX,i=n.originalEvent.changedTouches[0].clientY,s=setTimeout(function(){e(n.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){s&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(t-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(i-e.originalEvent.changedTouches[0].clientY)>50)&&clearTimeout(s)}).on("touchend.vakata.jstree",function(e){s&&clearTimeout(s)}),e(l).on("context_hide.vakata.jstree",e.proxy(function(t,i){this._data.contextmenu.visible=!1,e(i.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),n.teardown.call(this)},this.show_contextmenu=function(i,n,r,s){if(i=this.get_node(i),!i||i.id===e.jstree.root)return!1;var o=this.settings.contextmenu,a=this.get_node(i,!0),l=a.children(".jstree-anchor"),d=!1,c=!1;(o.show_at_node||n===t||r===t)&&(d=l.offset(),n=d.left,r=d.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(i)&&this.activate_node(i,s),c=o.items,e.isFunction(c)&&(c=c.call(this,i,e.proxy(function(e){this._show_contextmenu(i,n,r,e)},this))),e.isPlainObject(c)&&this._show_contextmenu(i,n,r,c)},this._show_contextmenu=function(t,i,n,r){var s=this.get_node(t,!0),o=s.children(".jstree-anchor");e(l).one("context_show.vakata.jstree",e.proxy(function(t,i){var n="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(i.element).addClass(n),o.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(o,{x:i,y:n},r),this.trigger("show_contextmenu",{node:t,x:i,y:n})}},function(e){var t=!1,i={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(l).triggerHandler("context_"+t+".vakata",{reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}})},_execute:function(t){return t=i.items[t],t&&(!t._disabled||e.isFunction(t._disabled)&&!t._disabled({item:t,reference:i.reference,element:i.element}))&&t.action?t.action.call(null,{item:t,reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}}):!1},_parse:function(t,n){if(!t)return!1;n||(i.html="",i.items=[]);var r,s="",o=!1;return n&&(s+="<ul>"),e.each(t,function(t,n){return n?(i.items.push(n),!o&&n.separator_before&&(s+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),o=!1,s+="<li class='"+(n._class||"")+(n._disabled===!0||e.isFunction(n._disabled)&&n._disabled({item:n,reference:i.reference,element:i.element})?" vakata-contextmenu-disabled ":"")+"' "+(n.shortcut?" data-shortcut='"+n.shortcut+"' ":"")+">",s+="<a href='#' rel='"+(i.items.length-1)+"' "+(n.title?"title='"+n.title+"'":"")+">",e.vakata.context.settings.icons&&(s+="<i ",n.icon&&(s+=-1!==n.icon.indexOf("/")||-1!==n.icon.indexOf(".")?" style='background:url(\""+n.icon+"\") center center no-repeat' ":" class='"+n.icon+"' "),s+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),s+=(e.isFunction(n.label)?n.label({item:t,reference:i.reference,element:i.element}):n.label)+(n.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+n.shortcut+'">'+(n.shortcut_label||"")+"</span>":"")+"</a>",n.submenu&&(r=e.vakata.context._parse(n.submenu,!0),r&&(s+=r)),s+="</li>",void(n.separator_after&&(s+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",o=!0))):!0}),s=s.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),n&&(s+="</ul>"),n||(i.html=s,e.vakata.context._trigger("parse")),s.length>10?s:!1},_show_submenu:function(i){if(i=e(i),i.length&&i.children("ul").length){var n=i.children("ul"),r=i.offset().left,s=r+i.outerWidth(),o=i.offset().top,a=n.width(),l=n.height(),d=e(window).width()+e(window).scrollLeft(),c=e(window).height()+e(window).scrollTop();t?i[s-(a+10+i.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):i[s+a>d&&r>d-s?"addClass":"removeClass"]("vakata-context-right"),o+l+10>c&&n.css("bottom","-1px"),i.hasClass("vakata-context-right")?a>r&&n.css("margin-right",r-a):a>d-s&&n.css("margin-left",d-s-a),n.show()}},show:function(n,r,s){var o,a,l,d,c,u,h,p,f=!0;switch(i.element&&i.element.length&&i.element.width(""),f){case!r&&!n:return!1;case!!r&&!!n:i.reference=n,i.position_x=r.x,i.position_y=r.y;break;case!r&&!!n:i.reference=n,o=n.offset(),i.position_x=o.left+n.outerHeight(),i.position_y=o.top;break;case!!r&&!n:i.position_x=r.x,i.position_y=r.y}n&&!s&&e(n).data("vakata_contextmenu")&&(s=e(n).data("vakata_contextmenu")),e.vakata.context._parse(s)&&i.element.html(i.html),i.items.length&&(i.element.appendTo("body"),a=i.element,l=i.position_x,d=i.position_y,c=a.width(),u=a.height(),h=e(window).width()+e(window).scrollLeft(),p=e(window).height()+e(window).scrollTop(),t&&(l-=a.outerWidth()-e(n).outerWidth(),l<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20)),l+c+20>h&&(l=h-(c+20)),d+u+20>p&&(d=p-(u+20)),i.element.css({left:l,top:d}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),i.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){i.is_visible&&(i.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),i.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var n=!1;i.element=e("<ul class='vakata-context'></ul>"),i.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(n&&clearTimeout(n),i.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(n=setTimeout(function(t){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(t){var n=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:i.is_visible&&(i.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:i.is_visible&&(n=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),n.length||(n=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:i.is_visible&&(i.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:i.is_visible&&(n=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),n.length||(n=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=i.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(l).on("mousedown.vakata.jstree",function(t){i.is_visible&&!e.contains(i.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,n){i.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&i.element.addClass("vakata-context-rtl").css("direction","rtl"),i.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var c,u;e.jstree.plugins.dnd=function(t,i){this.init=function(e,t){i.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in l.createElement("span")},this.bind=function(){i.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var i=this.get_node(t.target),n=this.is_selected(i)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,r=n>1?n+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(r=e.vakata.html.escape(r)),i&&i.id&&i.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(this.settings.dnd.is_draggable===!0||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,n>1?this.get_top_selected(!0):[i],t))){if(c={jstree:!0,origin:this,obj:this.get_node(i,!0),nodes:n>1?this.get_top_selected():[i.id]},u=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,c,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+r+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:u,data:c})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:u,data:c}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:u,data:c}),!1},this))},this.redraw_node=function(e,t,n,r){if(e=i.redraw_node.apply(this,arguments),e&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var s,o,a=null;for(s=0,o=e.childNodes.length;o>s;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){a=e.childNodes[s];break}a&&a.setAttribute("draggable",!0)}return e}},e(function(){var i=!1,n=!1,r=!1,s=!1,o=e('<div id="jstree-marker">&#160;</div>').hide();e(l).on("dnd_start.vakata.jstree",function(e,t){i=!1,r=!1,t&&t.data&&t.data.jstree&&o.appendTo("body")}).on("dnd_move.vakata.jstree",function(a,l){if(s&&(l.event&&"dragover"===l.event.type&&l.event.target===r.target||clearTimeout(s)),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){r=l.event;var d,c,u,h,p,f,g,m,v,_,y,b,w,k,x,C,$=e.jstree.reference(l.event.target),j=!1,T=!1,D=!1;if($&&$._data&&$._data.dnd)if(o.attr("class","jstree-"+$.get_theme()+($.settings.core.themes.responsive?" jstree-dnd-responsive":"")),x=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+$.get_theme()+" jstree-"+$.get_theme()+"-"+$.get_theme_variant()+" "+($.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[x?"show":"hide"](),l.event.target!==$.element[0]&&l.event.target!==$.get_container_ul()[0]||0!==$.get_container_ul().children().length){if(j=$.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"),j&&j.length&&j.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(T=j.offset(),D=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-T.top,u=j.outerHeight(),f=u/3>D?["b","i","a"]:D>u-u/3?["a","i","b"]:D>u/2?["i","a","b"]:["i","b","a"],e.each(f,function(t,r){switch(r){case"b":d=T.left-6,c=T.top,h=$.get_parent(j),p=j.parent().index();break;case"i":w=$.settings.dnd.inside_pos,k=$.get_node(j.parent()),d=T.left-2,c=T.top+u/2+1,h=k.id,p="first"===w?0:"last"===w?k.children.length:Math.min(w,k.children.length);break;case"a":d=T.left-6,c=T.top+u,h=$.get_parent(j),p=j.parent().index()+1}for(g=!0,m=0,v=l.data.nodes.length;v>m;m++)if(_=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",y=p,"move_node"===_&&"a"===r&&l.data.origin&&l.data.origin===$&&h===$.get_parent(l.data.nodes[m])&&(b=$.get_node(h),y>e.inArray(l.data.nodes[m],b.children)&&(y-=1)),g=g&&($&&$.settings&&$.settings.dnd&&$.settings.dnd.check_while_dragging===!1||$.check(_,l.data.origin&&l.data.origin!==$?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],h,y,{dnd:!0,ref:$.get_node(j.parent()),pos:r,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==$,is_foreign:!l.data.origin})),!g){$&&$.last_error&&(n=$.last_error());break}return"i"===r&&j.parent().is(".jstree-closed")&&$.settings.dnd.open_timeout&&(s=setTimeout(function(e,t){return function(){e.open_node(t)}}($,j),$.settings.dnd.open_timeout)),g?(C=$.get_node(h,!0),C.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C.addClass("jstree-dnd-parent")),i={ins:$,par:h,pos:"i"!==r||"last"!==w||0!==p||$.is_loaded(k)?p:"last"},o.css({left:d+"px",top:c+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=x?"copy":"move"),n={},f=!0,!1):void 0}),f===!0))return}else{for(g=!0,m=0,v=l.data.nodes.length;v>m&&(g=g&&$.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==$?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],e.jstree.root,"last",{dnd:!0,ref:$.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==$,is_foreign:!l.data.origin}),g);m++);if(g)return i={ins:$,par:e.jstree.root,pos:"last"},o.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=x?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),i=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect="none"),o.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(o.hide(),i=!1,r=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,a){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),s&&clearTimeout(s),a&&a.data&&a.data.jstree){o.hide().detach();var l,d,c=[];if(i){for(l=0,d=a.data.nodes.length;d>l;l++)c[l]=a.data.origin?a.data.origin.get_node(a.data.nodes[l]):a.data.nodes[l];i.ins[a.data.origin&&(a.data.origin.settings.dnd.always_copy||a.data.origin.settings.dnd.copy&&(a.event.metaKey||a.event.ctrlKey))?"copy_node":"move_node"](c,i.par,i.pos,!1,!1,!1,a.data.origin)}else l=e(a.event.target).closest(".jstree"),l.length&&n&&n.error&&"check"===n.error&&(l=l.jstree(!0),
l&&l.settings.core.error.call(this,n));r=!1,i=!1}}).on("keyup.jstree keydown.jstree",function(t,a){a=e.vakata.dnd._get(),a&&a.data&&a.data.jstree&&("keyup"===t.type&&27===t.which?(s&&clearTimeout(s),i=!1,n=!1,r=!1,s=!1,o.hide().detach(),e.vakata.dnd._clean()):(a.helper.find(".jstree-copy").first()[a.data.origin&&(a.data.origin.settings.dnd.always_copy||a.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),r&&(r.metaKey=t.metaKey,r.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",r))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(i,n,r){r===t&&(r=e.vakata.dnd._get()),r.event=n,e(l).triggerHandler("dnd_"+i+".vakata",r)},_get:function(){return{data:i.data,element:i.element,helper:i.helper}},_clean:function(){i.helper&&i.helper.remove(),i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(l).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!i.scroll_e||!i.scroll_l&&!i.scroll_t)return i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),!1;if(!i.scroll_i)return i.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(t===!0)return!1;var n=i.scroll_e.scrollTop(),r=i.scroll_e.scrollLeft();i.scroll_e.scrollTop(n+i.scroll_t*e.vakata.dnd.settings.scroll_speed),i.scroll_e.scrollLeft(r+i.scroll_l*e.vakata.dnd.settings.scroll_speed),(n!==i.scroll_e.scrollTop()||r!==i.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",i.scroll_e)},start:function(t,n,r){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(s){}return i.init_x=t.pageX,i.init_y=t.pageY,i.data=n,i.is_down=!0,i.element=t.currentTarget,i.target=t.target,i.is_touch="touchstart"===t.type,r!==!1&&(i.helper=e("<div id='vakata-dnd'></div>").html(r).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(l).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_down){if(!i.is_drag){if(!(Math.abs(t.pageX-i.init_x)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-i.init_y)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;i.helper&&(i.helper.appendTo("body"),i.helper_w=i.helper.outerWidth()),i.is_drag=!0,e(i.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var n=!1,r=!1,s=!1,o=!1,a=!1,d=!1,c=!1,u=!1,h=!1,p=!1;return i.scroll_t=0,i.scroll_l=0,i.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var n=e(this),r=n.offset();return this.scrollHeight>this.offsetHeight&&(r.top+n.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),t.pageY-r.top<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(r.left+n.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),t.pageX-r.left<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1)),i.scroll_t||i.scroll_l?(i.scroll_e=e(this),!1):void 0}),i.scroll_e||(n=e(l),r=e(window),s=n.height(),o=r.height(),a=n.width(),d=r.width(),c=n.scrollTop(),u=n.scrollLeft(),s>o&&t.pageY-c<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1),s>o&&o-(t.pageY-c)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),a>d&&t.pageX-u<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1),a>d&&d-(t.pageX-u)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),(i.scroll_t||i.scroll_l)&&(i.scroll_e=n)),i.scroll_e&&e.vakata.dnd._scroll(!0),i.helper&&(h=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),p=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),s&&h+25>s&&(h=s-50),a&&p+i.helper_w>a&&(p=a-(i.helper_w+2)),i.helper.css({left:p+"px",top:h+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag)t.target!==i.target&&e(i.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===i.target){var n=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){n&&clearTimeout(n)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,i){this.init=function(e,t){this._data.massload={},i.init.call(this,e,t)},this._load_nodes=function(t,n,r,s){var o,a,l,d=this.settings.massload,c=(JSON.stringify(t),[]),u=this._model.data;if(!r){for(o=0,a=t.length;a>o;o++)(!u[t[o]]||!u[t[o]].state.loaded&&!u[t[o]].state.failed||s)&&(c.push(t[o]),l=this.get_node(t[o],!0),l&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},c.length){if(e.isFunction(d))return d.call(this,c,e.proxy(function(e){var o,a;if(e)for(o in e)e.hasOwnProperty(o)&&(this._data.massload[o]=e[o]);for(o=0,a=t.length;a>o;o++)l=this.get_node(t[o],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,n,r,s)},this));if("object"==typeof d&&d&&d.url)return d=e.extend(!0,{},d),e.isFunction(d.url)&&(d.url=d.url.call(this,c)),e.isFunction(d.data)&&(d.data=d.data.call(this,c)),e.ajax(d).done(e.proxy(function(e,o,a){var d,c;if(e)for(d in e)e.hasOwnProperty(d)&&(this._data.massload[d]=e[d]);for(d=0,c=t.length;c>d;d++)l=this.get_node(t[d],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,n,r,s)},this)).fail(e.proxy(function(e){i._load_nodes.call(this,t,n,r,s)},this))}}return i._load_nodes.call(this,t,n,r,s)},this._load_node=function(t,n){var r,s=this._data.massload[t.id],o=null;return s?(o=this["string"==typeof s?"_append_html_data":"_append_json_data"](t,"string"==typeof s?e(e.parseHTML(s)).filter(function(){return 3!==this.nodeType}):s,function(e){n.call(this,e)}),r=this.get_node(t.id,!0),r&&r.length&&r.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],o):i._load_node.call(this,t,n)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(i,n){this.bind=function(){n.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,i){if(this._data.search.som&&i.res.length){var n,r,s,o,a=this._model.data,l=[];for(n=0,r=i.res.length;r>n;n++)if(a[i.res[n]]&&!a[i.res[n]].state.hidden&&(l.push(i.res[n]),l=l.concat(a[i.res[n]].parents),this._data.search.smc))for(s=0,o=a[i.res[n]].children_d.length;o>s;s++)a[a[i.res[n]].children_d[s]]&&!a[a[i.res[n]].children_d[s]].state.hidden&&l.push(a[i.res[n]].children_d[s]);l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(i,n,r,s,o,a){if(i===!1||""===e.trim(i.toString()))return this.clear_search();s=this.get_node(s),s=s&&s.id?s.id:null,i=i.toString();var l,d,c=this.settings.search,u=c.ajax?c.ajax:!1,h=this._model.data,p=null,f=[],g=[];if(this._data.search.res.length&&!o&&this.clear_search(),r===t&&(r=c.show_only_matches),a===t&&(a=c.show_only_matches_children),!n&&u!==!1)return e.isFunction(u)?u.call(this,i,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,r,s,o,a)})},this),s):(u=e.extend({},u),u.data||(u.data={}),u.data.str=i,s&&(u.data.inside=s),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(u).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(u)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,r,s,o,a)})},this)),this._data.search.lastRequest);if(o||(this._data.search.str=i,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=r,this._data.search.smc=a),p=new e.vakata.search(i,!0,{caseSensitive:c.case_sensitive,fuzzy:c.fuzzy}),e.each(h[s?s:e.jstree.root].children_d,function(e,t){var n=h[t];n.text&&!n.state.hidden&&(!c.search_leaves_only||n.state.loaded&&0===n.children.length)&&(c.search_callback&&c.search_callback.call(this,i,n)||!c.search_callback&&p.search(n.text).isMatch)&&(f.push(t),g=g.concat(n.parents))}),f.length){for(g=e.vakata.array_unique(g),l=0,d=g.length;d>l;l++)g[l]!==e.jstree.root&&h[g[l]]&&this.open_node(g[l],null,0)===!0&&this._data.search.opn.push(g[l]);o?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(f,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(f))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(f,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=f),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:i,res:this._data.search.res,show_only_matches:r})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,i,r,s){if(t=n.redraw_node.apply(this,arguments),t&&-1!==e.inArray(t.id,this._data.search.res)){var o,a,l=null;for(o=0,a=t.childNodes.length;a>o;o++)if(t.childNodes[o]&&t.childNodes[o].className&&-1!==t.childNodes[o].className.indexOf("jstree-anchor")){l=t.childNodes[o];break}l&&(l.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,i,n){n=n||{},n=e.extend({},e.vakata.search.defaults,n),n.fuzzy!==!1&&(n.fuzzy=!0),t=n.caseSensitive?t:t.toLowerCase();var r,s,o,a,l=n.location,d=n.distance,c=n.threshold,u=t.length;return u>32&&(n.fuzzy=!1),n.fuzzy&&(r=1<<u-1,s=function(){var e={},i=0;for(i=0;u>i;i++)e[t.charAt(i)]=0;for(i=0;u>i;i++)e[t.charAt(i)]|=1<<u-i-1;return e}(),o=function(e,t){var i=e/u,n=Math.abs(l-t);return d?i+n/d:n?1:i}),a=function(e){if(e=n.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!n.fuzzy)return{isMatch:!1,score:1};var i,a,d,h,p,f,g,m,v,_=e.length,y=c,b=e.indexOf(t,l),w=u+_,k=1,x=[];for(-1!==b&&(y=Math.min(o(0,b),y),b=e.lastIndexOf(t,l+u),-1!==b&&(y=Math.min(o(0,b),y))),b=-1,i=0;u>i;i++){for(d=0,h=w;h>d;)o(i,l+h)<=y?d=h:w=h,h=Math.floor((w-d)/2+d);for(w=h,f=Math.max(1,l-h+1),g=Math.min(l+h,_)+u,m=new Array(g+2),m[g+1]=(1<<i)-1,a=g;a>=f;a--)if(v=s[e.charAt(a-1)],0===i?m[a]=(m[a+1]<<1|1)&v:m[a]=(m[a+1]<<1|1)&v|((p[a+1]|p[a])<<1|1)|p[a+1],m[a]&r&&(k=o(i,a-1),y>=k)){if(y=k,b=a-1,x.push(b),!(b>l))break;f=Math.max(1,2*l-b)}if(o(i+1,l)>y)break;p=m}return{isMatch:b>=0,score:k}},i===!0?{search:a}:a(i)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,i){var n,r;if(t=this.get_node(t),t&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),i))for(n=0,r=t.children_d.length;r>n;n++)this.sort(t.children_d[n],!1)}};var h=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,i){this.bind=function(){i.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){h&&clearTimeout(h),h=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,i){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(i){return!1}return t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl?!1:(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),t?(this.element.one("set_state.jstree",function(i,n){n.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0):!1)},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={"default":{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(i,n){this.init=function(i,r){var s,o;if(r&&r.types&&r.types["default"])for(s in r.types)if("default"!==s&&s!==e.jstree.root&&r.types.hasOwnProperty(s))for(o in r.types["default"])r.types["default"].hasOwnProperty(o)&&r.types[s][o]===t&&(r.types[s][o]=r.types["default"][o]);n.init.call(this,i,r),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,i){n.refresh.call(this,t,i),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(i,n){var r,s,o,a=this._model.data,l=n.nodes,d=this.settings.types,c="default";for(r=0,s=l.length;s>r;r++){if(c="default",a[l[r]].original&&a[l[r]].original.type&&d[a[l[r]].original.type]&&(c=a[l[r]].original.type),a[l[r]].data&&a[l[r]].data.jstree&&a[l[r]].data.jstree.type&&d[a[l[r]].data.jstree.type]&&(c=a[l[r]].data.jstree.type),a[l[r]].type=c,a[l[r]].icon===!0&&d[c].icon!==t&&(a[l[r]].icon=d[c].icon),d[c].li_attr!==t&&"object"==typeof d[c].li_attr)for(o in d[c].li_attr)if(d[c].li_attr.hasOwnProperty(o)){if("id"===o)continue;a[l[r]].li_attr[o]===t?a[l[r]].li_attr[o]=d[c].li_attr[o]:"class"===o&&(a[l[r]].li_attr["class"]=d[c].li_attr["class"]+" "+a[l[r]].li_attr["class"])}if(d[c].a_attr!==t&&"object"==typeof d[c].a_attr)for(o in d[c].a_attr)if(d[c].a_attr.hasOwnProperty(o)){if("id"===o)continue;a[l[r]].a_attr[o]===t?a[l[r]].a_attr[o]=d[c].a_attr[o]:"href"===o&&"#"===a[l[r]].a_attr[o]?a[l[r]].a_attr.href=d[c].a_attr.href:"class"===o&&(a[l[r]].a_attr["class"]=d[c].a_attr["class"]+" "+a[l[r]].a_attr["class"])}}a[e.jstree.root].type=e.jstree.root},this)),n.bind.call(this)},this.get_json=function(t,i,r){var s,o,a=this._model.data,l=i?e.extend(!0,{},i,{no_id:!1}):{},d=n.get_json.call(this,t,l,r);if(d===!1)return!1;if(e.isArray(d))for(s=0,o=d.length;o>s;s++)d[s].type=d[s].id&&a[d[s].id]&&a[d[s].id].type?a[d[s].id].type:"default",i&&i.no_id&&(delete d[s].id,d[s].li_attr&&d[s].li_attr.id&&delete d[s].li_attr.id,d[s].a_attr&&d[s].a_attr.id&&delete d[s].a_attr.id);else d.type=d.id&&a[d.id]&&a[d.id].type?a[d.id].type:"default",i&&i.no_id&&(d=this._delete_ids(d));return d},this._delete_ids=function(t){if(e.isArray(t)){for(var i=0,n=t.length;n>i;i++)t[i]=this._delete_ids(t[i]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(i,r,s,o,a){if(n.check.call(this,i,r,s,o,a)===!1)return!1;r=r&&r.id?r:this.get_node(r),s=s&&s.id?s:this.get_node(s);var l,d,c,u,h=r&&r.id?a&&a.origin?a.origin:e.jstree.reference(r.id):null;switch(h=h&&h._model&&h._model.data?h._model.data:null,i){case"create_node":case"move_node":case"copy_node":if("move_node"!==i||-1===e.inArray(r.id,s.children)){if(l=this.get_rules(s),l.max_children!==t&&-1!==l.max_children&&l.max_children===s.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+i,data:JSON.stringify({chk:i,pos:o,obj:r&&r.id?r.id:!1,par:s&&s.id?s.id:!1})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(r.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+i,data:JSON.stringify({chk:i,pos:o,obj:r&&r.id?r.id:!1,par:s&&s.id?s.id:!1})},!1;if(h&&r.children_d&&r.parents){for(d=0,c=0,u=r.children_d.length;u>c;c++)d=Math.max(d,h[r.children_d[c]].parents.length);d=d-r.parents.length+1}(0>=d||d===t)&&(d=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<d)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+i,data:JSON.stringify({chk:i,pos:o,obj:r&&r.id?r.id:!1,par:s&&s.id?s.id:!1})},!1;s=this.get_node(s.parent),l=this.get_rules(s),d++}while(s)}}return!0},this.get_rules=function(e){if(e=this.get_node(e),!e)return!1;var i=this.get_type(e,!0);return i.max_depth===t&&(i.max_depth=-1),i.max_children===t&&(i.max_children=-1),i.valid_children===t&&(i.valid_children=-1),i},this.get_type=function(t,i){return t=this.get_node(t),t?i?e.extend({type:t.type},this.settings.types[t.type]):t.type:!1},this.set_type=function(i,n){var r,s,o,a,l,d,c,u,h=this._model.data;if(e.isArray(i)){for(i=i.slice(),s=0,o=i.length;o>s;s++)this.set_type(i[s],n);return!0}if(r=this.settings.types,i=this.get_node(i),!r[n]||!i)return!1;if(c=this.get_node(i,!0),c&&c.length&&(u=c.children(".jstree-anchor")),a=i.type,l=this.get_icon(i),i.type=n,(l===!0||!r[a]||r[a].icon!==t&&l===r[a].icon)&&this.set_icon(i,r[n].icon!==t?r[n].icon:!0),r[a]&&r[a].li_attr!==t&&"object"==typeof r[a].li_attr)for(d in r[a].li_attr)if(r[a].li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(h[i.id].li_attr["class"]=(h[i.id].li_attr["class"]||"").replace(r[a].li_attr[d],""),c&&c.removeClass(r[a].li_attr[d])):h[i.id].li_attr[d]===r[a].li_attr[d]&&(h[i.id].li_attr[d]=null,c&&c.removeAttr(d))}if(r[a]&&r[a].a_attr!==t&&"object"==typeof r[a].a_attr)for(d in r[a].a_attr)if(r[a].a_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(h[i.id].a_attr["class"]=(h[i.id].a_attr["class"]||"").replace(r[a].a_attr[d],""),u&&u.removeClass(r[a].a_attr[d])):h[i.id].a_attr[d]===r[a].a_attr[d]&&("href"===d?(h[i.id].a_attr[d]="#",u&&u.attr("href","#")):(delete h[i.id].a_attr[d],u&&u.removeAttr(d)))}if(r[n].li_attr!==t&&"object"==typeof r[n].li_attr)for(d in r[n].li_attr)if(r[n].li_attr.hasOwnProperty(d)){if("id"===d)continue;h[i.id].li_attr[d]===t?(h[i.id].li_attr[d]=r[n].li_attr[d],c&&("class"===d?c.addClass(r[n].li_attr[d]):c.attr(d,r[n].li_attr[d]))):"class"===d&&(h[i.id].li_attr["class"]=r[n].li_attr[d]+" "+h[i.id].li_attr["class"],c&&c.addClass(r[n].li_attr[d]))}if(r[n].a_attr!==t&&"object"==typeof r[n].a_attr)for(d in r[n].a_attr)if(r[n].a_attr.hasOwnProperty(d)){if("id"===d)continue;h[i.id].a_attr[d]===t?(h[i.id].a_attr[d]=r[n].a_attr[d],u&&("class"===d?u.addClass(r[n].a_attr[d]):u.attr(d,r[n].a_attr[d]))):"href"===d&&"#"===h[i.id].a_attr[d]?(h[i.id].a_attr.href=r[n].a_attr.href,u&&u.attr("href",r[n].a_attr.href)):"class"===d&&(h[i.id].a_attr["class"]=r[n].a_attr["class"]+" "+h[i.id].a_attr["class"],u&&u.addClass(r[n].a_attr[d]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(i,n){this.check=function(t,i,r,s,o){if(n.check.call(this,t,i,r,s,o)===!1)return!1;if(i=i&&i.id?i:this.get_node(i),r=r&&r.id?r:this.get_node(r),!r||!r.children)return!0;var a,l,d="rename_node"===t?s:i.text,c=[],u=this.settings.unique.case_sensitive,h=this._model.data;for(a=0,l=r.children.length;l>a;a++)c.push(u?h[r.children[a]].text:h[r.children[a]].text.toLowerCase());switch(u||(d=d.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return a=-1===e.inArray(d,c)||i.text&&i.text[u?"toString":"toLowerCase"]()===d,a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a;case"create_node":return a=-1===e.inArray(d,c),a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a;case"copy_node":return a=-1===e.inArray(d,c),a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a;case"move_node":return a=i.parent===r.id&&(!o||!o.is_multi)||-1===e.inArray(d,c),a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a}return!0},this.create_node=function(i,r,s,o,a){if(!r||r.text===t){if(null===i&&(i=e.jstree.root),i=this.get_node(i),!i)return n.create_node.call(this,i,r,s,o,a);if(s=s===t?"last":s,!s.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(i))return n.create_node.call(this,i,r,s,o,a);r||(r={});var l,d,c,u,h,p=this._model.data,f=this.settings.unique.case_sensitive,g=this.settings.unique.duplicate;for(d=l=this.get_string("New node"),c=[],u=0,h=i.children.length;h>u;u++)c.push(f?p[i.children[u]].text:p[i.children[u]].text.toLowerCase());for(u=1;-1!==e.inArray(f?d:d.toLowerCase(),c);)d=g.call(this,l,++u).toString();r.text=d}return n.create_node.call(this,i,r,s,o,a)}};var p=l.createElement("DIV");if(p.setAttribute("unselectable","on"),p.setAttribute("role","presentation"),p.className="jstree-wholerow",p.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,n,r=!1;for(i=0,n=t.selected.length;n>i;i++)r=this.get_node(t.selected[i],!0),r&&r.length&&r.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var i=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),i.teardown.call(this)},this.redraw_node=function(t,n,r,s){if(t=i.redraw_node.apply(this,arguments)){var o=p.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(o.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(o.className+=" jstree-wholerow-hovered"),t.insertBefore(o,t.childNodes[0])}return t}},l.registerElement&&Object&&Object.create){var f=Object.create(HTMLElement.prototype);f.createdCallback=function(){var t,i={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(i.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(i[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(i.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(i)};try{l.registerElement("vakata-jstree",{prototype:f})}catch(g){}}}}),function(e){function t(t){this.element=e("[data-tree]"),this.tree=this.element.find("[data-tree-container]"),this.search=this.element.find("[data-tree-search]"),this.url={},this.url.data=this.element.data("tree"),this.url.category_move="/categories/navigation-move-node/",this.url.category_create="/categories/create/#",this.url.symbolic_create="/categories/symbolic/create/#/?dialog=true",this.url.category_detail="/categories/#/",this.url.symbolic_detail="/categories/symbolic/#/",this.plugins=[];var i=this;i.init()}t.prototype.init=function(){var t=this;t.config(),t.build(),e.inArray("search",t.plugins)&&this.search.submit(function(e){t.searchInTree(e)}),t.tree.on("move_node.jstree",function(e,i){t.isDragged(e,i)})},t.prototype.config=function(){var e=this;e.setDnd(),e.setTypes(),e.setContextmenu(),e.plugins.push("wholerow"),e.search.length&&e.plugins.push("search")},t.prototype.setDnd=function(){var e=this;e.plugins.push("dnd"),e.dnd_callback={drop_check:function(e){console.log(e,"checked")}}},t.prototype.setTypes=function(){var e=this;e.plugins.push("types"),e.types={},e.types.symbolic={icon:"symbolic"}},t.prototype.setContextmenu=function(){var e=this;e.plugins.push("contextmenu");var t=function(t){var i={Open:{label:"Open",action:function(i){window.location=e.url.category_detail.replace("#",t.id)}},Create:{label:"Create new",action:function(i){e.createCategory(t)}},Other:{label:"Add other",submenu:{Symbolic:{label:"Create symbolic",action:function(i){e.createSymbolic(t)}}}}};return i},i=function(t){var i={Open:{label:"Open",action:function(i){window.location=e.url.symbolic_detail.replace("#",t.id)}}};return i};e.contextmenu={items:function(e){return"symboliccategory"==e.li_attr.type?i(e):t(e)}}},t.prototype.build=function(){var e=this;e.tree.jstree({core:{check_callback:function(e,t,i,n,r){return r&&r.dnd&&"move_node"===e&&t.parent!==i.id?!1:!0},data:{url:e.url.data,data:function(e){return"#"==e.id?{level:0}:{id:e.id}}}},plugins:e.plugins,types:e.types,contextmenu:e.contextmenu,dnd:e.dnd})},t.prototype.isDragged=function(t,i){var n=this,r=arctic.utils.growl("warning","Saving...","your latest changes to the server"),s={};s.parent=i.parent,s.move=i.node.id,s.position=i.position;var o=e.ajax({type:"POST",url:n.url.category_move,data:s,dataType:"json"});o.success(function(){r.remove();var e=arctic.utils.growl("success","Saved","your latest changes");e.delay(1e3).fadeOut()}),o.fail(function(){r.remove();arctic.utils.growl("error","Error...","when sending drag change");throw new Error("Error when sending drag change")})},t.prototype.searchInTree=function(t){t.preventDefault();var i=this,n=i.search.find("input[type=text]").val();e("[data-tree-container]").jstree(!0).search(n)},t.prototype.createCategory=function(t){var i=this,n=e("[data-reveal]");if(n&&t.id){var r=i.url.category_create.replace("#",t.id);window.location=r}},t.prototype.createSymbolic=function(t){var i=this,n=e("[data-reveal]");if(n&&t.id){var r=i.url.symbolic_create.replace("#",t.id);arctic.utils.revealInIframe.open(r,"tiny")}},e(function(){new t})}(jQuery);